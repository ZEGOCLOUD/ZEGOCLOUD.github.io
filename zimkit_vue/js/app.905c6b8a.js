(function(e){function t(t){for(var a,o,s=t[0],c=t[1],u=t[2],l=0,p=[];l<s.length;l++)o=s[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);g&&g(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var s=n[o];0!==r[s]&&(a=!1)}a&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},o={app:0},r={app:0},i=[];function s(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"527668c7"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={about:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var a="css/"+({about:"about"}[e]||e)+"."+{about:"45c3bbe0"}[e]+".css",r=c.p+a,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var u=i[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===r))return t()}var p=document.getElementsByTagName("style");for(s=0;s<p.length;s++){u=p[s],l=u.getAttribute("data-href");if(l===a||l===r)return t()}var g=document.createElement("link");g.rel="stylesheet",g.type="text/css",g.onload=t,g.onerror=function(t){var a=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete o[e],g.parentNode.removeChild(g),n(i)},g.href=r;var d=document.getElementsByTagName("head")[0];d.appendChild(g)})).then((function(){o[e]=0})));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(e);var p=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(g);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",p.name="ChunkLoadError",p.type=a,p.request=o,n[1](p)}r[e]=void 0}};var g=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var g=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0151":function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.show?t("div",{staticClass:"group-container"},[t("div",{staticClass:"form-box"},[t("div",{staticClass:"id"},[t("div",{staticClass:"label"},[e._v(e._s(e.$t("group_group_id")))]),t("div",{staticClass:"value"},[e._v(e._s(e.group&&e.group.baseInfo?e.group.baseInfo.groupID:""))])]),t("div",{staticClass:"btn copy-btn",on:{click:e.copy}},[e._v(e._s(e.$t("group_copy")))])])]):e._e()},o=[],r=(n("d9e2"),n("f8c9"),n("14d9"),n("1b40")),i=n("9f8e"),s=n("951c"),c=n("0a03"),u=n("1e09"),l=n("a072"),p=(n("db14"),n("f87a")),g=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),d=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},f=function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function i(e){try{c(a.next(e))}catch(t){r(t)}}function s(e){try{c(a["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))},h=function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=2&r[0]?a["return"]:r[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(s){r=[6,s],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.groupListVM=i["a"].getInstance(),t}return g(t,e),t.prototype.mounted=function(){var e=this;i["a"].getInstance().registerLoginStateChangedCallback((function(t){return f(e,void 0,void 0,(function(){return h(this,(function(e){return t&&i["a"].getInstance().queryGroupList(),[2]}))}))})),p["a"].getInstance().isLoggedIn&&i["a"].getInstance().queryGroupList(),c["a"].getInstance().addEventListener(u["a"].zimKitCurrentConversationChanged,[function(t){return f(e,void 0,void 0,(function(){var e;return h(this,(function(n){return 2===t.type&&(e=this.groupListVM.groupList.get(t.conversationID),e||this.groupListVM.groupList.set(t.conversationID,new s["a"]({baseInfo:{groupID:t.conversationID,groupName:t.conversationName}})),this.group=this.groupListVM.groupList.get(t.conversationID)),[2]}))}))}])},t.prototype.copy=function(){navigator.clipboard.writeText(this.group.baseInfo.groupID),Object(l["e"])(!0,{duration:!0,text:"".concat(this.$t("group_copy_success")),type:"default"})},d([Object(r["b"])(Boolean)],t.prototype,"show",void 0),t=d([Object(r["a"])({})],t),t}(r["c"]),v=m,y=v,_=(n("cfec"),n("2877")),C=Object(_["a"])(y,a,o,!1,null,"7270041c",null);t["a"]=C.exports},"06e8":function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"chat"},[e.currentChat.chatID?[t("div",{staticClass:"header"},[t("div",{staticClass:"title"},[e._v(e._s(e.currentChat.chatName?e.currentChat.chatName:0===e.currentChat.chatType?e.$t("message_title_chat"):e.$t("message_title_group_chat")))]),2===e.currentChat.chatType?t("div",{staticClass:"more-icon"}):e._e()]),t("div",{staticClass:"message-content",on:{scroll:function(t){return e.listScroll()}}},e._l(e.currentMessageList,(function(a,o){return t("div",{key:a.mMessage.messageID,staticClass:"message-item"},[e.dateFormat(a,e.currentMessageList[o-1])?t("div",{staticClass:"time-box"},[e._v(" "+e._s(e.dateFormat(a,e.currentMessageList[o-1]))+" ")]):e._e(),t("div",{staticClass:"message-box"},[e.isMultiSelectMode?[t("div",{staticClass:"multi-select"},[t("div",{staticClass:"select-icon",class:{selected:a.selected},on:{click:function(t){return e.selectMessage(a)}}})])]:e._e(),a.mMessage.senderUserID!==e.userInfo.userID?[t("div",{staticClass:"left-msg"},[t("div",{staticClass:"head-portrait"},[0===a.mMessage.conversationType?[t("img",{attrs:{src:e.currentChat.chatAvatarUrl?e.currentChat.chatAvatarUrl:n("0922")}})]:[t("img",{attrs:{src:a.senderUserAvatarUrl?a.senderUserAvatarUrl:n("0922")}})]],2),t("div",{staticClass:"message-bubble"},[2===a.mMessage.conversationType?t("div",{staticClass:"send-name"},[e._v(e._s(a.senderUserName||a.mMessage.senderUserID))]):e._e(),1===a.mMessage.type?[t("div",{staticClass:"msg-text",on:{contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[e._v(e._s(a.mMessage.message))])]:11===a.mMessage.type?[t("div",{staticClass:"msg-img",style:`width: ${a.thumbnailImgConWidth}px;height: ${a.thumbnailImgConHeight}px`,on:{click:function(t){return e.showLargeImg(a)},contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[t("img",{class:"img"+a.mMessage.messageID,style:`width: ${a.thumbnailImgWidth}px;height: ${a.thumbnailImgHeight}px`,attrs:{alt:""}})]),t("div",{staticClass:"err-img",style:`width: ${a.thumbnailImgConWidth}px;height: ${a.thumbnailImgConHeight}px`,on:{click:function(t){return e.showLargeImg(a)},contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[t("div",{staticClass:"default-img"})])]:12===a.mMessage.type?[t("div",{staticClass:"msg-file",on:{contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[t("div",{staticClass:"file-info"},[t("div",{staticClass:"file-name"},[e._v(e._s(a.mMessage.fileName))]),t("div",{staticClass:"file-size"},[e._v(e._s(e.fileSizeFormat(a.mMessage.fileSize)))])]),t("div",{staticClass:"file-icon",class:e.getFileIcon(a)})])]:13===a.mMessage.type?[t("div",{staticClass:"msg-audio",class:{audioLoading:1===a.loadStatus},style:`width:${e.getAudioWidth(a)}px`,on:{click:function(t){return e.playAudio(a)},contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[t("audio",{attrs:{id:"audio"+a.mMessage.messageID,src:a.mMessage.fileDownloadUrl}}),t("div",{staticClass:"play-animation",class:{playing:a.isPlaying}}),t("div",{staticClass:"audio-length"},[e._v(e._s(a.mMessage.audioDuration)+"''")])])]:14===a.mMessage.type?[t("div",{staticClass:"msg-video",style:`width: ${a.thumbnailImgConWidth}px;height: ${a.thumbnailImgConHeight}px`,on:{click:function(t){return e.showLargeImg(a)},contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[t("img",{class:"img"+a.mMessage.messageID,style:`width: ${a.thumbnailImgWidth}px;height: ${a.thumbnailImgHeight}px`,attrs:{alt:""}}),t("div",{staticClass:"play-icon"})]),t("div",{staticClass:"err-video",style:`width: ${a.thumbnailImgConWidth}px;height: ${a.thumbnailImgConHeight}px`,on:{click:function(t){return e.showLargeImg(a)},contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[t("div",{staticClass:"default-img"}),t("div",{staticClass:"play-icon"})])]:[t("div",{staticClass:"msg-text"},[e._v(e._s(e.$t("common_message_unknown")))])]],2)])]:99===a.type?[t("div",{staticClass:"center-msg"},[e._v(" "+e._s(a.mMessage.message)+" ")])]:[t("div",{staticClass:"right-msg"},[99!==a.type&&2===a.mMessage.sentStatus?t("div",{staticClass:"err-icon"}):e._e(),0===a.mMessage.sentStatus?t("div",{staticClass:"loading"}):e._e(),t("div",{staticClass:"message-bubble"},[1===a.mMessage.type?[t("div",{staticClass:"msg-text",on:{contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[e._v(e._s(a.mMessage.message))])]:11===a.mMessage.type?[t("div",{staticClass:"msg-img",style:`width: ${a.thumbnailImgConWidth}px;height: ${a.thumbnailImgConHeight}px`,on:{click:function(t){return e.showLargeImg(a)},contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[t("img",{class:"img"+a.mMessage.messageID,style:`width: ${a.thumbnailImgWidth}px;height: ${a.thumbnailImgHeight}px`,attrs:{alt:""}})]),t("div",{staticClass:"err-img",style:`width: ${a.thumbnailImgConWidth}px;height: ${a.thumbnailImgConHeight}px`,on:{click:function(t){return e.showLargeImg(a)},contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[t("div",{staticClass:"default-img"})])]:12===a.mMessage.type?[t("div",{staticClass:"msg-file",on:{contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[t("div",{staticClass:"file-info"},[t("div",{staticClass:"file-name"},[e._v(e._s(a.mMessage.fileName))]),t("div",{staticClass:"file-size"},[e._v(e._s(e.fileSizeFormat(a.mMessage.fileSize)))])]),t("div",{staticClass:"file-icon",class:e.getFileIcon(a)})])]:13===a.mMessage.type?[t("div",{staticClass:"msg-audio",class:{audioLoading:1===a.loadStatus},style:`width:${e.getAudioWidth(a)}px`,on:{click:function(t){return e.playAudio(a)},contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[t("audio",{attrs:{id:"audio"+a.mMessage.messageID,src:a.mMessage.fileDownloadUrl}}),t("div",{staticClass:"audio-length"},[e._v(e._s(a.mMessage.audioDuration)+"''")]),t("div",{staticClass:"play-animation",class:{playing:a.isPlaying}})])]:14===a.mMessage.type?[t("div",{staticClass:"msg-video",style:`width: ${a.thumbnailImgConWidth}px;height: ${a.thumbnailImgConHeight}px`,on:{click:function(t){return e.showLargeImg(a)},contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[t("img",{class:"img"+a.mMessage.messageID,style:`width: ${a.thumbnailImgWidth}px;height: ${a.thumbnailImgHeight}px`,attrs:{alt:""}}),t("div",{staticClass:"play-icon"})]),t("div",{staticClass:"err-video",style:`width: ${a.thumbnailImgConWidth}px;height: ${a.thumbnailImgConHeight}px`,on:{click:function(t){return e.showLargeImg(a)},contextmenu:function(t){return t.preventDefault(),e.operation(t,a)}}},[t("div",{staticClass:"default-img"}),t("div",{staticClass:"play-icon"})])]:[t("div",{staticClass:"msg-text"},[e._v(e._s(e.$t("common_message_unknown")))])]],2),t("div",{staticClass:"head-portrait"},[t("img",{attrs:{src:e.userInfo.userAvatarUrl?e.userInfo.userAvatarUrl:n("0922")}})])])]],2)])})),0),e.isMultiSelectMode?[t("div",{staticClass:"multi-select-operation-box"},[t("div",{staticClass:"operation-content"},[t("div",{staticClass:"operation-item"},[t("div",{staticClass:"operation-icon delete",on:{click:e.deleteMessage}}),t("div",{staticClass:"operation-desc"},[e._v(e._s(e.$t("conversation_delete")))])])]),t("div",{staticClass:"close-icon",on:{click:e.closeMultiSelectMode}})])]:[t("div",{staticClass:"send-box"},[t("div",{staticClass:"tool-box"},[t("div",{staticClass:"expression"},[e.showExpressionBox?t("div",{staticClass:"expression-content"},[t("ExpressionBox",{on:{addExpression:e.addExpression}})],1):e._e()]),t("div",{staticClass:"image-file",on:{click:e.clickUploadImageFile}},[t("input",{attrs:{id:"uploadImageFile",type:"file",multiple:"true",accept:"image/png,image/jpg,image/jpeg,image/bmp,image/gif"},on:{change:e.handleImageChange}})]),t("div",{staticClass:"video-file",on:{click:e.clickUploadVideoFile}},[t("input",{attrs:{id:"uploadVideoFile",type:"file",multiple:"true",accept:".mp4,.MP4,.mov,.MOV"},on:{change:e.handleVideoFileChange}})]),t("div",{staticClass:"other-file",on:{click:e.clickUploadFile}},[t("input",{attrs:{id:"uploadFile",type:"file"},on:{change:e.handleFileChange}})])]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],ref:"textarea",staticClass:"text-area",domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}}),t("button",{staticClass:"btn send-button",attrs:{disabled:!e.message},on:{click:e.sendMessage}},[e._v(e._s(e.$t("message_send")))])])]]:[t("div",{staticClass:"default-content"},[t("div",{staticClass:"img"}),t("div",{staticClass:"text"},[e._v(e._s(e.$t("message_empty_w")))])])],e.showLargeImgBox?t("LargeImgBox",{attrs:{largeImg:e.largeImg},on:{close:e.handleCloseLargeImgBox}}):e._e()],2)},o=[],r=(n("d9e2"),n("f8c9"),n("14d9"),n("1b40")),i=n("f87a"),s=n("83bc"),c=n("f527"),u=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"expression-box"},e._l(e.expressionList,(function(n,a){return t("div",{key:a,staticClass:"item",on:{click:function(t){return e.chooseExpression(n)}}},[e._v(e._s(n))])})),0)},l=[],p=["😀","😃","😄","😁","😆","😅","😂","🤣","😇","😉","😊","🙂","🙃","😋","😌","😍","🥰","😘","😗","😙","😚","🤪","😜","😝","😛","🤑","😎","🤓","🧐","🤠","🥳","🤡","😏","😶","😐","😑","😒","🙄","🤨","🤔","🤫","🤭","🤗","🤥","😳","😞","😟","😤","😠","😡","🤬","😔","😕","🙁","😬","🥺","😣","😖","😫","😩","🥱","😪","😮","😱","😨","😰","😥","😓","😯","😦","😧","😢","😭","🤤","🤩","😵","🥴","😲","🤯","🤐","😷","🤕","🤒","🤮","🤢","🤧","🥵","🥶","😴","💤","😈","👿","👹","👺","💩","👻","💀","👽","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","👐","🤲","🙌","👏","🙏","🤝","👍","👎","👊","✊","🤛","🤜","🤞","🤘","🤟","👌","🤏","👈","👉","👆","👇","✋","🤚","🖐","🖖","👋","🤙","💪","🦾","🖕","🤳","💅","🦵","🦿","🦶","👄","🦷","👅","👂","🦻","👃","👁","👀","🧠","🦴","👶","👧","🧒","👦","👩","🧑","👨","👩‍🦱","👨‍🦱","👩‍🦰","👨‍🦰","👱","👩‍🦳","👨‍🦳","👩‍🦲","👨‍🦲","🧔","👵","🧓","👴","👲","👳‍","🧕","👼","👸","🤴","👰","🤵","🙇","💁","🙅‍","🙆","🤷","🙋","🤦","🧏","🙎","🙍","💇","💆","🤰","🤱","🧎","🧍","💃","🕺","👫","👭","👬","🧑‍🤝‍🧑","🧡","💛","💚","💙","💜","🤎","🖤","🤍","💔","💕","💞","💓","💗","💖","💘","💝","💟"],g=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),d=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.expressionList=p,t}return g(t,e),t.prototype.chooseExpression=function(e){this.$emit("addExpression",e)},t=d([Object(r["a"])({})],t),t}(r["c"]),h=f,m=h,v=(n("3f5b"),n("2877")),y=Object(v["a"])(m,u,l,!1,null,"37c1a1c3",null),_=y.exports,C=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"large-img-container"},[t("div",{staticClass:"large-img-box"},[t("div",{staticClass:"top"},[t("div",{staticClass:"close-icon",on:{click:e.handleClose}})]),t("div",{staticClass:"content"},[t("div",{staticClass:"content-box",class:{largeW:e.isWidthExceed,largeH:e.isHeightExceed}},[11===e.largeImg.mMessage.type?t("img",{attrs:{id:"img"}}):e._e(),14===e.largeImg.mMessage.type?t("video",{attrs:{id:"video",src:e.largeImg.mMessage.fileDownloadUrl,autoplay:"",controls:"",controlslist:"nodownload noplaybackrate noremoteplayback",disablePictureInPicture:"true"}}):e._e()]),e._m(0)]),t("div",{staticClass:"operation"},[e.isError?t("div",{staticClass:"btn reload-btn",on:{click:e.reload}},[e._v(e._s(e.$t("album_redownload_image")))]):t("div",{staticClass:"operation-item download-icon",attrs:{title:"download"},on:{click:e.handleDownload}})])])])},b=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"content-box err-box"},[t("div",{staticClass:"err-img"})])}],I=n("1e09"),w=n("0a03"),M=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),L=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isWidthExceed=!1,t.isHeightExceed=!1,t.isError=!1,t}return M(t,e),t.prototype.created=function(){if(11===this.largeImg.mMessage.type){if(this.largeImg.mMessage.largeImageHeight>532){var e=532/this.largeImg.mMessage.largeImageHeight*this.largeImg.mMessage.largeImageWidth;e>800?this.isWidthExceed=!0:this.isHeightExceed=!0}if(this.largeImg.mMessage.largeImageWidth>800){var t=800/this.largeImg.mMessage.largeImageWidth*this.largeImg.mMessage.largeImageHeight;t>532?this.isHeightExceed=!0:this.isWidthExceed=!0}}},t.prototype.mounted=function(){var e=this;11===this.largeImg.mMessage.type&&this.loadImg(),w["a"].getInstance().addEventListener(I["a"].zimKitNetworkChanged,[function(t){1===t&&e.reload()}])},t.prototype.handleDownload=function(){var e=this,t=new XMLHttpRequest;t.open("GET",this.largeImg.mMessage.fileDownloadUrl,!0),t.responseType="blob",t.onload=function(){if(200===t.status){var n=document.createElement("a");n.href=window.URL.createObjectURL(t.response),n.download=e.largeImg.mMessage.fileName,n.click()}},t.send()},t.prototype.handleClose=function(){this.$emit("close")},t.prototype.loadImg=function(){var e=this,t=document.querySelector("#img"),n=document.querySelector(".err-box");t&&(t.src=this.largeImg.mMessage.largeImageDownloadUrl,t.onload=function(){e.isError=!1,n.style.zIndex="1"},t.onerror=function(){e.isError=!0,n.style.zIndex="3"})},t.prototype.loadVideo=function(){var e=document.querySelector("#video");e&&(e.src=this.largeImg.mMessage.fileDownloadUrl,e.onloadedmetadata=function(){e.play()})},t.prototype.reload=function(){11===this.largeImg.mMessage.type?this.loadImg():this.loadVideo()},L([Object(r["b"])(Object)],t.prototype,"largeImg",void 0),t=L([Object(r["a"])({})],t),t}(r["c"]),x=D,k=x,S=(n("eb74"),Object(v["a"])(k,C,b,!1,null,"5b69a80f",null)),U=S.exports,O=function(){function e(){return this.isInit=!1,this.renderContainerID="",this.renderImgID="",this.messageList=[],this.maxLoadNum=10,this.scrollListenSwitch=!0,this.cRatio=2,e.instance||(e.instance=this),e.instance}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.init=function(e,t){this.renderContainerID=e,this.renderImgID=t;var n=document.querySelector(this.renderContainerID);n?(n.removeEventListener("scroll",this.handleScroll.bind(this)),n.addEventListener("scroll",this.handleScroll.bind(this)),this.isInit=!0):this.isInit=!1},e.prototype.unInit=function(){if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");var e=document.querySelector(this.renderContainerID);e&&e.removeEventListener("scroll",this.handleScroll),this.renderContainerID="",this.renderImgID="",this.messageList.length=0},e.prototype.initMessageListHandle=function(e){var t=this;if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");e&&(e.forEach((function(e){(11===e.mMessage.type&&e.mMessage.thumbnailDownloadUrl||14===e.mMessage.type&&e.mMessage.videoFirstFrameDownloadUrl)&&(e.loadStatus=0,t.countRenderSizeHandle(e),w["a"].getInstance().actionListener(I["a"].zimKitImgMessageUpdated,e))})),this.messageList=e)},e.prototype.appendMessageHandle=function(e){var t=this;if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");e.forEach((function(e){(11===e.mMessage.type&&e.mMessage.thumbnailDownloadUrl||14===e.mMessage.type&&e.mMessage.videoFirstFrameDownloadUrl)&&(e.loadStatus=0,t.countRenderSizeHandle(e),w["a"].getInstance().actionListener(I["a"].zimKitImgMessageUpdated,e))})),this.messageList=this.messageList.concat(e)},e.prototype.updateMessageHandle=function(e){var t=this;if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");e.forEach((function(e){t.countRenderSizeHandle(e)})),this.messageList=e},e.prototype.setScrollListenSwitchHandle=function(e){if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");console.warn("setScrollListenSwitchHandle",e),this.scrollListenSwitch=!!e},e.prototype.loadImgByMessageHandle=function(e){if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");this.scrollListenSwitch||(console.warn("loadImgByMessageHandle load"),this.loadImgHandle(e))},e.prototype.loadLatestImgHandle=function(){if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");this.scrollListenSwitch||(console.warn("loadLatestImgHandle load"),this.loadImgHandle(this.messageList.slice(-8)))},e.prototype.registerImgMessageUpdatedCallback=function(e){w["a"].getInstance().addEventListener(I["a"].zimKitImgMessageUpdated,[e])},e.prototype.countRenderSizeHandle=function(e){if(e.mMessage.messageID){var t,n,a,o,r=0,i=0,s=0,c=0;if(11===e.mMessage.type?(t=e.mMessage.thumbnailWidth,n=e.mMessage.thumbnailHeight,a=255,o=127.5):(t=e.mMessage.videoFirstFrameWidth,n=e.mMessage.videoFirstFrameHeight,a=170,o=85),t||n)if(t>n){var u=n/t*a;u<o?(i=o,r=t/n*o,s=a,c=o):(i=u,r=a,s=a,c=u)}else{var l=t/n*a;l<o?(r=o,i=n/t*o,s=o,c=a):(r=l,i=a,s=l,c=a)}else r=a,i=a,s=a,c=a;e.thumbnailImgWidth=r,e.thumbnailImgHeight=i,e.thumbnailImgConWidth=s,e.thumbnailImgConHeight=c}},e.prototype.handleScroll=function(){this.scrollListenSwitch&&(console.warn("handleScroll load"),this.loadImgHandle(this.messageList))},e.prototype.loadImgHandle=function(e){var t=this;e.forEach((function(e){if(11===e.mMessage.type||14===e.mMessage.type){if(!i["a"].getInstance().networkStatus&&3===e.loadStatus)return;var n=e.mMessage.thumbnailDownloadUrl||e.mMessage.videoFirstFrameDownloadUrl,a=document.querySelector(".img".concat(e.mMessage.messageID));n&&1!==e.loadStatus&&2!==e.loadStatus?a&&t.countTopHandle(a)&&(e.loadStatus=1,w["a"].getInstance().actionListener(I["a"].zimKitImgMessageUpdated,e),a.src=n,a.onload=function(){e.loadStatus=2,w["a"].getInstance().actionListener(I["a"].zimKitImgMessageUpdated,e)},a.onerror=function(){e.loadStatus=3,w["a"].getInstance().actionListener(I["a"].zimKitImgMessageUpdated,e)}):a&&!a.src&&(a.src=n,w["a"].getInstance().actionListener(I["a"].zimKitImgMessageUpdated,e))}}))},e.prototype.countTopHandle=function(e){var t,n,a=!1,o=document.querySelector(this.renderContainerID);if(o){var r=o.scrollTop,i=(null===(t=e.parentElement)||void 0===t?void 0:t.parentElement).offsetTop,s=(null===(n=e.parentElement)||void 0===n?void 0:n.parentElement).clientHeight,c=-150;a=r<i+s-c}return a},e}(),z=O,j=n("a072"),E=function(e){var t="",n="0B";return e?(t=e<1024?e.toFixed(2)+" B":e<1048576?(e/1024).toFixed(2)+" KB":e<1073741824?(e/1048576).toFixed(2)+" MB":(e/1073741824).toFixed(2)+" GB",t):n},P=n("e35c"),A=n("56b9"),T=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),N=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},G=function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function i(e){try{c(a.next(e))}catch(t){r(t)}}function s(e){try{c(a["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))},K=function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=2&r[0]?a["return"]:r[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(s){r=[6,s],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showExpressionBox=!1,t.currentChat={},t.message="",t.userInfo=i["a"].getInstance().userInfo,t.oldScrollHeight=0,t.newScrollHeight=0,t.currentMessageList=[],t.showLargeImgBox=!1,t.largeImg={},t.audioItem={},t.isScrolled=!1,t.isMultiSelectMode=s["a"].getInstance().mode,t}return T(t,e),t.prototype.mounted=function(){var e=this;window.addEventListener("click",this.handleClick),s["a"].getInstance().registerLoginUserUpdatedCallback((function(t){e.userInfo=t})),s["a"].getInstance().registerCurrentChatChangedCallback(this.currentChatChangedCallback()),s["a"].getInstance().registerCurrentChatUpdatedCallback(this.currentChatUpdatedCallback()),s["a"].getInstance().registerModeChangedCallback(this.modeChangedCallback()),z.getInstance().registerImgMessageUpdatedCallback((function(t){e.currentMessageList.forEach((function(e){if((11===e.mMessage.type||14===e.mMessage.type)&&e.mMessage.messageID===t.mMessage.messageID){e=t;var n=document.querySelector(".img".concat(t.mMessage.messageID));n&&(2===t.loadStatus&&(n.parentElement.style.zIndex="2"),3===t.loadStatus&&(n.parentElement.style.zIndex="0"))}}))})),A["a"].on("expressionBoxOperation",(function(t){e.showExpressionBox=!t&&!e.showExpressionBox}))},t.prototype.beforeDestroy=function(){window.removeEventListener("click",this.handleClick),s["a"].getInstance().unInit(),s["a"].getInstance().removeCurrentChatChangedCallback(this.currentChatChangedCallback()),s["a"].getInstance().removeCurrentChatUpdatedCallback(this.currentChatUpdatedCallback()),s["a"].getInstance().removeModeChangedCallback(this.modeChangedCallback())},t.prototype.currentChatChangedCallback=function(){var e=this;return function(t){console.log("kitlog currentchat change",t,e.currentChat),e.currentChat=t,e.message="",i["a"].getInstance().networkStatus?e.currentMessageList=[]:e.currentMessageList=e.currentChat.currentMessageList,e.isScrolled=!1,e.$nextTick((function(){var t=document.getElementsByClassName("text-area")[0];t&&t.focus(),e.scrollToBottom()}))}},t.prototype.currentChatUpdatedCallback=function(){var e=this;return function(t){if(console.log("kitlog current chat update",e.currentChat,t,e.isScrolled),!Object.keys(e.currentChat).length||e.currentChat.chatID===t.chatID){var n=document.querySelector(".message-content");n&&(e.currentMessageList.length?(z.getInstance().updateMessageHandle(t.currentMessageList),e.currentMessageList=t.currentMessageList,z.getInstance().setScrollListenSwitchHandle(!1),e.$nextTick((function(){!e.isScrolled&&e.scrollToBottom(),z.getInstance().loadImgByMessageHandle(t.currentMessageList)})),requestAnimationFrame((function(){z.getInstance().setScrollListenSwitchHandle(!0)}))):(z.getInstance().init(".message-content",".msg-img"),z.getInstance().initMessageListHandle(t.currentMessageList),e.currentMessageList=t.currentMessageList,z.getInstance().setScrollListenSwitchHandle(!1),e.$nextTick((function(){!e.isScrolled&&e.scrollToBottom(),z.getInstance().loadLatestImgHandle()})),requestAnimationFrame((function(){z.getInstance().setScrollListenSwitchHandle(!0)}))))}}},t.prototype.modeChangedCallback=function(){var e=this;return function(t,n){e.isMultiSelectMode=t,n&&e.selectMessage(n)}},t.prototype.operation=function(e,t){if(!this.isMultiSelectMode){var n={x:e.pageX,y:e.pageY,messageItem:t};Object(j["d"])(!0,n);var a=document.querySelector(".message-content");a.style.overflowY="hidden"}},t.prototype.sendMessage=function(){2===this.currentChat.chatType?this.currentChat.sendGroupMessage(this.message):this.currentChat.sendPeerMessage(this.message),this.message="",this.isScrolled=!1},t.prototype.addExpression=function(e){this.showExpressionBox=!1;var t=document.querySelector(".text-area");t.focus();var n=this.message.split(""),a=t.selectionStart;n.splice(a,0,e),this.message=n.join(""),setTimeout((function(){t.setSelectionRange(a+2,a+2)}),0)},t.prototype.showLargeImg=function(e){var t=e.mMessage.fileName.split("."),n=t&&t[t.length-1].toLocaleLowerCase();if(n&&/mov/.test(n))Object(j["e"])(!0,{text:"".concat(this.$t("message_video_play_error_tips_w")),type:"default"});else if((11!==e.mMessage.type||e.mMessage.largeImageDownloadUrl)&&(14!==e.mMessage.type||e.mMessage.fileDownloadUrl)){if(14===e.mMessage.type&&Object.keys(this.audioItem).length){var a=document.querySelector("#audio".concat(this.audioItem.mMessage.messageID));a&&(a.pause(),a.currentTime=0),this.currentMessageList.filter((function(e){13===e.mMessage.type&&e.isPlaying&&(e.isPlaying=!1)})),this.audioItem={}}this.showLargeImgBox=!0,this.largeImg=e}},t.prototype.handleCloseLargeImgBox=function(){this.showLargeImgBox=!1,this.largeImg={}},t.prototype.clickUploadImageFile=function(){var e=document.getElementById("uploadImageFile");e.value="",e&&e.click()},t.prototype.clickUploadVideoFile=function(){var e=document.getElementById("uploadVideoFile");e.value="",e&&e.click()},t.prototype.clickUploadFile=function(){var e=document.getElementById("uploadFile");e.value="",e&&e.click()},t.prototype.handleImageChange=function(e){return G(this,void 0,void 0,(function(){var t,n;return K(this,(function(a){if(t=Array.from(e.target.files),t){if(t.length>9)return Object(j["e"])(!0,{text:"".concat(this.$t("message_send_img_exceed_tips_w")),type:"default"}),[2];for(n=0;n<t.length;n++)this.currentChat.sendMediaMessage(t[n],(function(e,t,n){console.log("===handleImageChange",e,t,n)}),{fileType:11}),this.isScrolled=!1}return[2]}))}))},t.prototype.handleVideoFileChange=function(e){var t=this,n=Array.from(e.target.files);if(n){if(n.length>9)return void Object(j["e"])(!0,{text:"".concat(this.$t("message_send_video_exceed_tips_w")),type:"default"});for(var a=function(e){var a=new Audio(URL.createObjectURL(n[e]));a.onloadedmetadata=function(){t.currentChat.sendMediaMessage(n[e],(function(e,t,n){console.log("===handleVideoFileChange",JSON.parse(JSON.stringify(e)),t,n)}),{fileType:14,videoDuration:a.duration}),t.isScrolled=!1}},o=0;o<n.length;o++)a(o)}},t.prototype.handleFileChange=function(e){var t=Array.from(e.target.files);if(t)for(var n=0;n<t.length;n++){if(!t[n].size)return void Object(j["e"])(!0,{text:"".concat(this.$t("message_file_empty_error_tips")),type:"default"});this.currentChat.sendMediaMessage(t[n],(function(e,t,n){console.log("===handleVideoFileChange",JSON.parse(JSON.stringify(e)),t,n)}),{fileType:12}),this.isScrolled=!1}},t.prototype.playAudio=function(e){e.loadStatus=1;var t=document.querySelector("#audio".concat(e.mMessage.messageID));if(this.currentMessageList.filter((function(e){13===e.mMessage.type&&e.isPlaying&&(e.isPlaying=!1)})),Object.keys(this.audioItem).length){var n=document.querySelector("#audio".concat(this.audioItem.mMessage.messageID));n&&(n.pause(),n.currentTime=0),this.audioItem.mMessage.messageID!==e.mMessage.messageID?this.startPlayingAudio(e,t):(e.loadStatus=2,e.isPlaying=!1,this.audioItem={})}else this.startPlayingAudio(e,t)},t.prototype.startPlayingAudio=function(e,t){var n=this;!i["a"].getInstance().networkStatus||t.src&&t.src===e.mMessage.fileDownloadUrl||(t.src=e.mMessage.fileDownloadUrl),t.error?(t.src="",Object(j["e"])(!0,{text:"".concat(this.$t("message_audio_play_error_tips")),type:"default"}),e.loadStatus=3,e.isPlaying=!1,this.audioItem={}):t.play(),t.onwaiting=function(){e.loadStatus=1,e.isPlaying=!1,n.audioItem=e},t.onplaying=function(){e.loadStatus=2,e.isPlaying=!0,n.audioItem=e},t.onpause=function(){e.loadStatus=0,e.isPlaying=!1,n.audioItem={}},t.onended=function(){e.loadStatus=2,e.isPlaying=!1,n.audioItem={}}},t.prototype.getAudioWidth=function(e){var t=e.mMessage.audioDuration,n=70+t/60*204;return n>204?204:n},t.prototype.dateFormat=function(e,t){if(e.mMessage.timestamp)return t&&e.mMessage.timestamp-t.mMessage.timestamp>3e5||e.mMessage.messageID===this.currentMessageList[0].mMessage.messageID?Object(c["a"])(e.mMessage.timestamp,!0):void 0},t.prototype.handleClick=function(e){var t=e.path||e.composedPath&&e.composedPath();if("expression"!==e.target.className){var n=document.querySelector(".expression-box"),a=!1;t.forEach((function(e){e===n&&(a=!0)})),n&&!a&&(this.showExpressionBox=!this.showExpressionBox)}else this.showExpressionBox=!this.showExpressionBox;if(this.showExpressionBox){var o=document.querySelector(".text-area");o&&o.focus()}if(e.target.className.includes("more-icon"))Object(j["c"])();else{var r=document.querySelector(".group-container"),i=!1;t.forEach((function(e){e===r&&(i=!0)})),r&&!i&&Object(j["c"])()}},t.prototype.getFileIcon=function(e){var t="",n=e.mMessage.fileName&&e.mMessage.fileName.split("."),a=n&&n[n.length-1].toLocaleLowerCase();if(a){var o={ppt:/ppt|pptx|pptm/,word:/doc|docx|rtf|dot|html|tmp|wps/,txt:/txt/,pdf:/pdf/,excel:/xlsx|xlsm|xlsb|xltx|xltm|xls|xlt|xml|xlr|xlw|xla|xlam/,zip:/rar|zip|arj|gz|arj|z/,video:/mp4|m4v|mov|qt|avi|flv|wmv|asf|mpeg|mpg|vob|mkv|asf|rm|rmvb|vob|ts|dat|3gp|3gpp|3g2|3gpp2|webm/,audio:/mp3|wma|wav|mid|ape|flac|ape|alac|m4a/,image:/tiff|heif|heic|jpg|jpeg|png|gif|bmp|webp/};Object.entries(o).forEach((function(e){var n=e[0],o=e[1];o.test(a)&&(t=n+"-icon")}))}return t||"unknow-icon"},t.prototype.fileSizeFormat=function(e){return E(e)},t.prototype.selectMessage=function(e){if(e.selected=!e.selected,e.selected)s["a"].getInstance().currentChat.selectedList.push(e.mMessage);else{var t=s["a"].getInstance().currentChat.selectedList.findIndex((function(t){return t.messageID===e.mMessage.messageID}));s["a"].getInstance().currentChat.selectedList.splice(t,1)}},t.prototype.closeMultiSelectMode=function(){s["a"].getInstance().mode=P["a"]["normal"],this.isMultiSelectMode=P["a"]["normal"],this.currentMessageList.map((function(e){e.selected=!1})),s["a"].getInstance().currentChat.selectedList=[]},t.prototype.deleteMessage=function(){s["a"].getInstance().currentChat.selectedList.length&&Object(j["a"])(!0,{desc:"".concat(this.$t("message_delete_confirmation_desc")),confirmText:"".concat(this.$t("conversation_delete")),cancelText:"".concat(this.$t("conversation_cancel")),hasCloseBtn:!1,confirmFunc:function(){s["a"].getInstance().currentChat.deleteMessages()}})},t.prototype.listScroll=function(){return G(this,void 0,void 0,(function(){var e,t,n,a,o=this;return K(this,(function(r){return e=document.querySelector(".message-content"),e&&(t=Math.round(e.scrollTop),n=e.scrollHeight,a=this.$data.currentChat,0==t&&this.currentChat.queryHistoryMessage(a.chatID,a.chatType).then((function(){o.oldScrollHeight=n,o.$nextTick((function(){o.newScrollHeight=e.scrollHeight,e.scrollTop=o.newScrollHeight-o.oldScrollHeight}))})),t<n-e.clientHeight?this.isScrolled=!0:this.isScrolled=!1),[2]}))}))},t.prototype.scrollToBottom=function(){var e=document.querySelector(".message-content");if(e){var t=Number(e.scrollHeight)-Number(e.clientHeight);e.scrollTop=t}},t=N([Object(r["a"])({components:{ExpressionBox:_,LargeImgBox:U}})],t),t}(r["c"]),$=H,q=$,R=(n("2ffe"),Object(v["a"])(q,a,o,!1,null,"ae829d38",null));t["a"]=R.exports},"0922":function(e,t,n){e.exports=n.p+"img/avatar-default.b325d72f.png"},"0a03":function(e,t,n){"use strict";n("14d9");var a=n("1e09"),o=function(){function e(){var t;return this.eventList=(t={},t[a["a"].zimError]=[],t[a["a"].zimConnectionStateChanged]=[],t[a["a"].zimTokenWillExpire]=[],t[a["a"].zimReceivePeerMessage]=[],t[a["a"].zimReceiveGroupMessage]=[],t[a["a"].zimConversationTotalUnreadMessageCountUpdated]=[],t[a["a"].zimConversationChanged]=[],t[a["a"].zimGroupMemberStateChanged]=[],t[a["a"].zimKitLoginStateChanged]=[],t[a["a"].zimKitLoginUserUpdate]=[],t[a["a"].zimKitDeleteConversation]=[],t[a["a"].zimKitConversationListUpdate]=[],t[a["a"].zimKitCurrentConversationUpdate]=[],t[a["a"].zimKitCurrentConversationChanged]=[],t[a["a"].zimKitConversationListQueryAbnormally]=[],t[a["a"].zimKitCurrentChatChanged]=[],t[a["a"].zimKitCurrentChatUpdated]=[],t[a["a"].zimKitImgMessageUpdated]=[],t[a["a"].zimKitNetworkChanged]=[],t[a["a"].zimKitModeChanged]=[],t),e.instance||(e.instance=this),e.instance}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.addEventListener=function(e,t){var n=this;return!!this.eventList[e]&&(!!Array.isArray(t)&&(t.forEach((function(t){!n.eventList[e].includes(t)&&n.eventList[e].push(t)})),!0))},e.prototype.removeEventListener=function(e,t){if(!this.eventList[e])return!1;var n=this.eventList[e];return t&&t.length?t.forEach((function(e){n.splice(n.indexOf(e),1)})):this.eventList[e]=[],!0},e.prototype.actionListener=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.eventList[e]&&this.eventList[e].forEach((function(e){e.apply(void 0,t)}))},e}();t["a"]=o},1:function(e,t){},1162:function(e,t,n){},1601:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"conversation"},[t("div",{staticClass:"left-banner"},[t("div",{staticClass:"top"},[t("div",{staticClass:"item"},[t("div",{staticClass:"icon message-icon"}),t("div",{staticClass:"text"},[e._v(e._s(e.$t("conversation_message_total_count")))]),e.conversation.totalUnreadMessageCount?t("div",{staticClass:"total"},[e._v(" "+e._s(e.conversation.totalUnreadMessageCount>99?"99+":e.conversation.totalUnreadMessageCount)+" ")]):e._e()]),t("div",{staticClass:"item",on:{click:e.triggerDialog}},[t("div",{staticClass:"icon create-chat-icon"}),t("div",{staticClass:"text create-chat-text"},[e._v(e._s(e.$t("conversation_start_chat_w")))])])]),t("div",{staticClass:"item",on:{click:e.logout}},[t("div",{staticClass:"icon exit-icon"}),t("div",{staticClass:"text exit-text"},[e._v(e._s(e.$t("common_logout")))])])]),e.isAbnormal?[t("div",{staticClass:"abnormal-content"},[t("div",{staticClass:"btn reload-btn",on:{click:function(t){return e.conversation.loadConversationList()}}},[e._v(" "+e._s(e.$t("conversation_reload"))+" ")])])]:[e.conversationList.size?t("div",{staticClass:"conversation-content",on:{scroll:function(t){return e.listScroll()}}},e._l(e.conversationList.values(),(function(a,o){return t("div",{key:o,staticClass:"conversation-item",class:{actived:e.conversation.activeConversationID===a.conversationID},on:{click:function(t){return e.switchConversation(a)},contextmenu:function(t){return t.preventDefault(),e.operationConversation(t,a)}}},[t("div",{staticClass:"head-portrait"},[0===a.type?[t("img",{attrs:{src:a.conversationAvatarUrl?a.conversationAvatarUrl:n("0922")}})]:[t("div",{staticClass:"group"})],a.unreadMessageCount?t("div",{staticClass:"unread-count"},[e._v(" "+e._s(a.unreadMessageCount>99?"99+":a.unreadMessageCount)+" ")]):e._e()],2),t("div",{staticClass:"conversation-info"},[t("div",{staticClass:"info-top"},[t("div",{staticClass:"item-name"},[e._v(" "+e._s(a.conversationName||a.conversationID)+" ")]),a.lastMessage?t("div",{staticClass:"item-date"},[e._v(" "+e._s(e.dateFormat(a.lastMessage.timestamp))+" ")]):e._e()]),a.lastMessage?t("div",{staticClass:"item-message"},[2===a.lastMessage.sentStatus?t("div",{staticClass:"err-icon"}):e._e(),t("div",{staticClass:"message-text"},[1===a.lastMessage.type?[e._v(e._s(a.lastMessage.message))]:e._e(),11===a.lastMessage.type?[e._v(e._s(e.$t("common_message_photo")))]:e._e(),12===a.lastMessage.type?[e._v(e._s(e.$t("common_message_file")))]:e._e(),13===a.lastMessage.type?[e._v(e._s(e.$t("common_message_audio")))]:e._e(),14===a.lastMessage.type?[e._v(e._s(e.$t("common_message_video")))]:e._e()],2)]):e._e()])])})),0):t("div",{staticClass:"default-content"},[t("div",{staticClass:"text"},[e._v(" "+e._s(e.$t("conversation_empty"))+" ")])])],e.createChatDialog?t("CreatChatDialog",{on:{closeDialog:e.closeDialog,createChat:e.createChat,createGroupChat:e.createGroupChat,joinGroup:e.joinGroup}}):e._e()],2)},o=[],r=(n("d9e2"),n("f8c9"),n("14d9"),n("1b40")),i=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"dialog"},[t("div",{staticClass:"top"},e._l(e.textList,(function(n){return t("div",{key:n.id,staticClass:"title",class:{actived:n.actived},on:{click:function(t){return e.titleClick(n)}}},[e._v(" "+e._s(e.$t(n.text))+" ")])})),0),t("div",{staticClass:"content"},[1===e.currentActived?[t("div",{staticClass:"peer"},[t("div",{staticClass:"input-box"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.toUserID,expression:"toUserID"}],class:{"en-input":e.lang.includes("en")},attrs:{type:"text",placeholder:e.$t("conversation_enter_touserid_w")},domProps:{value:e.toUserID},on:{input:[function(t){t.target.composing||(e.toUserID=t.target.value)},e.toUserIDInput]}}),e.peerErrTip?t("div",{staticClass:"err-tip"},[e._v(e._s(e.$t("message_input_user_id_error_tips")))]):e._e()]),t("div",{staticClass:"btn-box"},[t("button",{staticClass:"btn cancel-btn",on:{click:e.closeDialog}},[e._v(e._s(e.$t("conversation_cancel")))]),t("button",{staticClass:"btn create-peer-btn",attrs:{disabled:e.peerDisabled},on:{click:function(t){return e.createChat("peer")}}},[e._v(e._s(e.$t("conversation_start_single_chat")))])])])]:e._e(),2===e.currentActived?[t("div",{staticClass:"group"},[t("div",{staticClass:"input-box"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.groupName,expression:"groupName"}],class:{"en-input":e.lang.includes("en")},attrs:{type:"text",placeholder:e.$t("group_input_group_name"),maxlength:"12"},domProps:{value:e.groupName},on:{input:[function(t){t.target.composing||(e.groupName=t.target.value)},e.groupNameInput]}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userIDList,expression:"userIDList"}],class:{"en-input":e.lang.includes("en")},attrs:{type:"text",placeholder:e.$t("group_input_user_id_of_group")},domProps:{value:e.userIDList},on:{input:[function(t){t.target.composing||(e.userIDList=t.target.value)},e.userIDListInput]}}),e.groupErrTip?t("div",{staticClass:"err-tip"},[e._v(e._s(e.$t("message_input_user_id_error_tips")))]):e._e()]),t("div",{staticClass:"btn-box"},[t("button",{staticClass:"btn cancel-btn",on:{click:e.closeDialog}},[e._v(e._s(e.$t("conversation_cancel")))]),t("button",{staticClass:"btn create-peer-btn",attrs:{disabled:e.groupDisabled},on:{click:function(t){return e.createChat("group")}}},[e._v(e._s(e.$t("conversation_start_group_chat")))])])])]:e._e(),3===e.currentActived?[t("div",{staticClass:"attend"},[t("div",{staticClass:"input-box"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.groupID,expression:"groupID"}],class:{"en-input":e.lang.includes("en")},attrs:{type:"text",placeholder:e.$t("group_input_group_id_w")},domProps:{value:e.groupID},on:{input:[function(t){t.target.composing||(e.groupID=t.target.value)},e.toUserIDInput]}})]),t("div",{staticClass:"btn-box"},[t("button",{staticClass:"btn cancel-btn",on:{click:e.closeDialog}},[e._v(e._s(e.$t("conversation_cancel")))]),t("button",{staticClass:"btn create-peer-btn",attrs:{disabled:!e.groupID},on:{click:e.joinGroup}},[e._v(e._s(e.$t("conversation_join_group_chat")))])])])]:e._e()],2)])},s=[],c=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lang=navigator.language,t.toUserID="",t.peerErrTip=!1,t.peerDisabled=!0,t.groupErrTip=!1,t.userIDList="",t.groupName="",t.groupID="",t.groupDisabled=!0,t.joinGroupDisabled=!0,t.currentActived=1,t.textList=[{id:1,text:"conversation_start_single_chat",actived:!0},{id:2,text:"conversation_start_group_chat",actived:!1},{id:3,text:"conversation_join_group_chat",actived:!1}],t}return c(t,e),t.prototype.titleClick=function(e){this.textList.forEach((function(e){e.actived=!1})),e.actived=!0,this.currentActived=e.id},t.prototype.createChat=function(e){switch(e){case"peer":this.$emit("createChat",this.toUserID);break;case"group":this.$emit("createGroupChat",this.groupName,this.userIDList)}},t.prototype.toUserIDInput=function(){this.toUserID.length?this.toUserID.length<6||this.toUserID.length>12?(this.peerDisabled=!0,this.peerErrTip=!0):(this.peerErrTip=!1,this.peerDisabled=!1):(this.peerErrTip=!1,this.peerDisabled=!0)},t.prototype.groupNameInput=function(){this.groupName.length&&this.userIDList.length?this.groupDisabled=!1:this.groupDisabled=!0},t.prototype.userIDListInput=function(){var e=this;if(this.groupName.length&&this.userIDList.length?this.groupDisabled=!1:this.groupDisabled=!0,this.userIDList){var t=this.userIDList.split(";"),n=!1;t.forEach((function(t){(t.length<6||t.length>12)&&(n=!0,e.groupDisabled=!0)})),this.groupErrTip=n}else this.groupErrTip=!1},t.prototype.joinGroup=function(){this.$emit("joinGroup",this.groupID)},t.prototype.closeDialog=function(){this.$emit("closeDialog")},t=u([Object(r["a"])({})],t),t}(r["c"]),p=l,g=p,d=(n("edf0"),n("2877")),f=Object(d["a"])(g,i,s,!1,null,"2548f78d",null),h=f.exports,m=n("bae3"),v=n("9f8e"),y=n("f87a"),_=n("f527"),C=n("1e09"),b=n("0a03"),I=n("a072"),w=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),M=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},L=function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function i(e){try{c(a.next(e))}catch(t){r(t)}}function s(e){try{c(a["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))},D=function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=2&r[0]?a["return"]:r[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(s){r=[6,s],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.conversation=m["a"].getInstance(),t.createChatDialog=!1,t.conversationList=new Map,t.isAbnormal=!1,t}return w(t,e),t.prototype.mounted=function(){var e=this;b["a"].getInstance().addEventListener(C["a"].zimKitConversationListUpdate,[function(t){e.conversationList=new Map(t)}]),m["a"].getInstance().registerLoginStateChangedCallback((function(t){return L(e,void 0,void 0,(function(){return D(this,(function(e){return t&&m["a"].getInstance().loadConversationList(),[2]}))}))})),m["a"].getInstance().registerAbnormalCallback((function(t){e.isAbnormal=t})),y["a"].getInstance().isLoggedIn&&m["a"].getInstance().loadConversationList()},t.prototype.beforeDestroy=function(){m["a"].getInstance().unInit()},t.prototype.nameFormat=function(e){return(e.conversationName||e.conversationID).slice(0,1).toLowerCase()},t.prototype.dateFormat=function(e){return e?Object(_["a"])(e,!1):""},t.prototype.switchConversation=function(e){return L(this,void 0,void 0,(function(){return D(this,(function(t){return this.conversation.activeConversationID===e.conversationID||(this.conversation.activeConversationID=e.conversationID,e.unreadMessageCount&&e.clearConversationUnreadMessageCount(),b["a"].getInstance().actionListener(C["a"].zimKitCurrentConversationChanged,e)),[2]}))}))},t.prototype.triggerDialog=function(){this.createChatDialog=!0},t.prototype.closeDialog=function(){this.createChatDialog=!1},t.prototype.createChat=function(e){this.createChatDialog=!1;var t=this.conversationList.get(e);if(t)m["a"].getInstance().activeConversationID=t.conversationID,b["a"].getInstance().actionListener(C["a"].zimKitCurrentConversationChanged,t);else{var n={conversationID:e,conversationName:"",type:0};this.conversation.activeConversationID=e,b["a"].getInstance().actionListener(C["a"].zimKitCurrentConversationChanged,n)}},t.prototype.createGroupChat=function(e,t){var n=this,a=t.split(";");v["a"].getInstance().createGroup("",e,a).then((function(e){console.log("kitlog creategroup data",e);var t=e.groupInfo,a=e.errorUserList,o=t.baseInfo;if(a.length){var r=a.map((function(e){return e.userID})).join(" ");Object(I["a"])(!0,{desc:"".concat(n.$t("message_user_not_exit_please_again").replace("%s",r)),confirmText:"".concat(n.$t("common_return")),hasCloseBtn:!1})}else{n.createChatDialog=!1;var i={conversationID:o.groupID,conversationName:o.groupName,type:2};n.conversation.activeConversationID=i.conversationID,b["a"].getInstance().actionListener(C["a"].zimKitCurrentConversationChanged,i)}}))},t.prototype.operationConversation=function(e,t){var n={x:e.pageX,y:e.pageY,conversationItem:t};Object(I["d"])(!0,n);var a=document.querySelector(".conversation-content");a.style.overflowY="hidden"},t.prototype.logout=function(){y["a"].getInstance().disconnectUser()},t.prototype.listScroll=function(){return L(this,void 0,void 0,(function(){var e,t,n,a;return D(this,(function(o){return e=document.querySelector(".conversation-content"),t=Math.round(e.scrollTop),n=e.scrollHeight,a=e.clientHeight,t>=n-a&&this.conversation.loadNextPage(),[2]}))}))},t.prototype.joinGroup=function(e){var t=this;v["a"].getInstance().joinGroup(e).then((function(e){if(e){t.createChatDialog=!1;var n={conversationID:e.groupInfo.baseInfo.groupID,conversationName:e.groupInfo.baseInfo.groupName,type:2};t.conversation.activeConversationID=n.conversationID,b["a"].getInstance().actionListener(C["a"].zimKitCurrentConversationChanged,n)}})).catch((function(n){switch(n.code){case 6000523:Object(I["a"])(!0,{desc:"".concat(t.$t("group_group_id_not_exit").replace("%s",e)),confirmText:"".concat(t.$t("common_return")),hasCloseBtn:!1});break;case 6000522:Object(I["e"])(!0,{duration:!0,text:"".concat(t.$t("group_repeat_join_group_chat")),type:"default"});break;default:Object(I["e"])(!0,{duration:!0,text:n.message,type:"default"});break}}))},t=M([Object(r["a"])({components:{CreatChatDialog:h}})],t),t}(r["c"]),k=x,S=k,U=(n("b9aa"),Object(d["a"])(S,a,o,!1,null,"a8d325f8",null));t["a"]=U.exports},"1e09":function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e["zimError"]="error",e["zimConnectionStateChanged"]="connectionStateChanged",e["zimTokenWillExpire"]="tokenWillExpire",e["zimReceivePeerMessage"]="receivePeerMessage",e["zimReceiveGroupMessage"]="receiveGroupMessage",e["zimConversationTotalUnreadMessageCountUpdated"]="conversationTotalUnreadMessageCountUpdated",e["zimConversationChanged"]="conversationChanged",e["zimGroupMemberStateChanged"]="groupMemberStateChanged",e["zimKitDeleteConversation"]="deleteConversation",e["zimKitCurrentConversationUpdate"]="currentConversationUpdate",e["zimKitCurrentConversationChanged"]="currentConversationChanged",e["zimKitConversationListUpdate"]="currentConversationListUpdate",e["zimKitCurrentChatChanged"]="currentChatChanged",e["zimKitCurrentChatUpdated"]="currentChatUpdated",e["zimKitConversationListQueryAbnormally"]="conversationListQueryAbnormally",e["zimKitLoginStateChanged"]="loggedStateChanged",e["zimKitLoginUserUpdate"]="loginUserUpdate",e["zimKitImgMessageUpdated"]="imgMessageUpdated",e["zimKitNetworkChanged"]="networkChanged",e["zimKitModeChanged"]="modeChanged"}(a||(a={}))},"206b":function(e,t,n){"use strict";t["a"]={appID:2031514356,serverSecret:"6e46fa37db195c449155c9fbfded9c4b",tokenURL:""}},"27c5":function(e,t,n){"use strict";n("7353")},"2ffe":function(e,t,n){"use strict";n("1162")},3356:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("907a"),n("986a"),n("1d02"),n("3c5d"),n("b7ef"),n("3452");function a(e,t){return fetch(t.tokenURL+e).then((function(e){return e.json()})).then((function(e){return e.token}))}},"3f5b":function(e,t,n){"use strict";n("9c33")},"56b9":function(e,t,n){"use strict";var a=n("2b0e"),o=function(e,t,n){if(n||2===arguments.length)for(var a,o=0,r=t.length;o<r;o++)!a&&o in t||(a||(a=Array.prototype.slice.call(t,0,o)),a[o]=t[o]);return e.concat(a||Array.prototype.slice.call(t))};t["a"]=new a["a"]({methods:{on:function(e,t){return this.$on(e,t),this},once:function(e,t){return this.$once(e,t),this},off:function(e,t){return this.$off(e,t),this},emit:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.$emit.apply(this,o([e],t,!1)),this}}})},"6ce6":function(e,t,n){"use strict";n("a82d")},7353:function(e,t,n){},8383:function(e,t,n){},"83bc":function(e,t,n){"use strict";n("d9e2"),n("14d9");var a,o=n("f87a"),r=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=function(){function e(e){this.chatID=e.conversationID,this.chatType=e.type,this.chatName=e.conversationName,this.chatAvatarUrl=e.conversationAvatarUrl}return e}(),s=function(){function e(e){this.mMessage=e.mMessage,this.senderUserName=e.senderUserName,this.senderUserAvatarUrl=e.senderUserAvatarUrl,this.loadStatus=e.loadStatus,this.type=e.type,this.selected=e.selected}return e}();(function(e){e[e["Tip"]=99]="Tip"})(a||(a={}));var c=function(e){function t(t){var n=e.call(this,t)||this;return n.thumbnailImgWidth=t.thumbnailImgWidth,n.thumbnailImgHeight=t.thumbnailImgHeight,n.thumbnailImgConWidth=t.thumbnailImgConWidth,n.thumbnailImgConHeight=t.thumbnailImgConHeight,n.mMessage=t.mMessage,n}return r(t,e),t}(s),u=function(e){function t(t){var n=e.call(this,t)||this;return n.mMessage=t.mMessage,n.type=t.type,n.message=t.message,n}return r(t,e),t}(s),l=function(e){function t(t){var n=e.call(this,t)||this;return n.mMessage=t.mMessage,n.isPlaying=t.isPlaying,n}return r(t,e),t}(s),p=function(e){function t(t){var n=e.call(this,t)||this;return n.mMessage=t.mMessage,n.thumbnailImgWidth=t.thumbnailImgWidth,n.thumbnailImgHeight=t.thumbnailImgHeight,n.thumbnailImgConWidth=t.thumbnailImgConWidth,n.thumbnailImgConHeight=t.thumbnailImgConHeight,n}return r(t,e),t}(s),g=function(e){function t(t){var n=e.call(this,t)||this;return n.mMessage=t.mMessage,n}return r(t,e),t}(s),d=n("0a03"),f=n("a072"),h=n("1e09"),m=n("cf8b"),v=function(e){var t=e;switch(e.mMessage.type){case 1:t=new u(e);break;case 11:t=new c(e);break;case 12:t=new g(e);break;case 13:t=new l(e);break;case 14:t=new p(e);break;default:break}return t},y=n("9f8e"),_=n("e35c"),C=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),b=function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function i(e){try{c(a.next(e))}catch(t){r(t)}}function s(e){try{c(a["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))},I=function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=2&r[0]?a["return"]:r[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(s){r=[6,s],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentMessageList=[],t.messageCount=30,t.memberList=[],t.selectedList=[],t}return C(t,e),t.prototype.queryHistoryMessage=function(e,t){var n=this,a={nextMessage:this.currentMessageList.length?this.currentMessageList[0].mMessage:void 0,count:this.messageCount,reverse:!0};return o["a"].getInstance().zim.queryHistoryMessage(e,t,a).then((function(e){e.messageList.length&&(e.messageList.forEach((function(e){var a={mMessage:e};if(2===t){var o=n.memberList&&n.memberList.filter((function(t){return t.userID===e.senderUserID}))[0];a.senderUserName=o&&o.userName||"",a.senderUserAvatarUrl=o&&o.memberAvatarUrl||""}13===e.type&&(a.loadStatus=0,a.isPlaying=!1),n.currentMessageList.some((function(t){return t.mMessage.messageID===e.messageID}))||n.currentMessageList.push(v(a))})),n.currentMessageList.sort((function(e,t){return e.mMessage.orderKey-t.mMessage.orderKey})),d["a"].getInstance().actionListener(h["a"].zimKitCurrentChatUpdated,n)),console.log("kitlog queryHistoryMessage data:",e,"messageList:",n.currentMessageList)}))},t.prototype.sendPeerMessage=function(e){var t=this,n=/\S/;if(n.test(e)){var a={priority:1},r=v({senderUserName:o["a"].getInstance().userInfo.userName,senderUserAvatarUrl:o["a"].getInstance().userInfo.userAvatarUrl,loadStatus:0,mMessage:{type:1,message:e,senderUserID:o["a"].getInstance().userInfo.userID,sentStatus:0}});return this.currentMessageList.push(r),d["a"].getInstance().actionListener(h["a"].zimKitCurrentChatUpdated,this),o["a"].getInstance().zim.sendPeerMessage(r.mMessage,this.chatID,a).then((function(e){console.log("kitlog sendPeerMessage data:",e,"message:",r,"messageList:",t.currentMessageList)})).catch((function(e){switch(console.log("kitlog sendPeerMessage err",e),e.code){case 6000204:var n=v({type:99,senderUserName:o["a"].getInstance().userInfo.userName,senderUserAvatarUrl:o["a"].getInstance().userInfo.userAvatarUrl,loadStatus:0,mMessage:{messageID:String((new Date).getTime()),message:"".concat(m["a"].t("message_user_not_exit_please_again").replace("%s",t.chatID)),senderUserID:o["a"].getInstance().userInfo.userID,sentStatus:0}});t.currentMessageList.push(n);break;case 6000104:Object(f["e"])(!0,{duration:!0,text:"".concat(m["a"].t("message_network_anomaly")),type:"default"});break;default:Object(f["e"])(!0,{duration:!0,text:e.message,type:"default"});break}return e})).finally((function(){d["a"].getInstance().actionListener(h["a"].zimKitCurrentChatUpdated,t)}))}Object(f["e"])(!0,{text:"".concat(m["a"].t("message_cant_send_empty_msg")),type:"default"})},t.prototype.sendGroupMessage=function(e){var t=this,n=/\S/;if(n.test(e)){var a={priority:1},r=v({senderUserName:o["a"].getInstance().userInfo.userName,senderUserAvatarUrl:o["a"].getInstance().userInfo.userAvatarUrl,loadStatus:0,mMessage:{type:1,message:e,senderUserID:o["a"].getInstance().userInfo.userID,sentStatus:0}});return this.currentMessageList.push(r),d["a"].getInstance().actionListener(h["a"].zimKitCurrentChatUpdated,this),o["a"].getInstance().zim.sendGroupMessage(r.mMessage,this.chatID,a).then((function(e){console.log("kitlog sendGroupMessage data:",e,"message:",r,"messageList:",t.currentMessageList)})).catch((function(e){switch(console.log("kitlog sendGroupMessage err",e),e.code){case 6000104:Object(f["e"])(!0,{duration:!0,text:"".concat(m["a"].t("message_network_anomaly")),type:"default"});break;default:Object(f["e"])(!0,{duration:!0,text:e.message,type:"default"});break}})).finally((function(){d["a"].getInstance().actionListener(h["a"].zimKitCurrentChatUpdated,t)}))}Object(f["e"])(!0,{text:"".concat(m["a"].t("message_cant_send_empty_msg")),type:"default"})},t.prototype.sendMediaMessage=function(e,t,n){var a=this,r={priority:1},i=v({senderUserName:o["a"].getInstance().userInfo.userName,senderUserAvatarUrl:o["a"].getInstance().userInfo.userAvatarUrl,loadStatus:0,mMessage:{type:n.fileType,fileLocalPath:e,senderUserID:o["a"].getInstance().userInfo.userID,sentStatus:0,messageID:(new Date).getTime()}});if(n)switch(n.fileType){case 12:i.mMessage.fileName=e.name,i.mMessage.fileSize=e.size;break;case 13:i.mMessage.audioDuration=n.audioDuration;break;case 14:i.mMessage.videoDuration=n.videoDuration;break}return this.currentMessageList.push(i),d["a"].getInstance().actionListener(h["a"].zimKitCurrentChatUpdated,this),o["a"].getInstance().zim.sendMediaMessage(i.mMessage,this.chatID,this.chatType,r,t).then((function(e){console.log("kitlog sendMediaMessage data:",e,"message:",JSON.parse(JSON.stringify(i)),"messageList:",a.currentMessageList)})).catch((function(e){switch(console.log("kitlog sendMediaMessage err:",e),e.code){case 6000212:Object(f["e"])(!0,{duration:!0,text:"".concat(m["a"].t("message_size_over_limit")),type:"default"});break;case 6000104:Object(f["e"])(!0,{duration:!0,text:"".concat(m["a"].t("message_network_anomaly")),type:"default"});break;case 6000214:e.message.includes("110020")?Object(f["e"])(!0,{duration:!0,text:"".concat(m["a"].t("message_photo_size_err_tips")),type:"default"}):e.message.includes("110024")?Object(f["e"])(!0,{duration:!0,text:"".concat(m["a"].t("message_video_size_err_tips")),type:"default"}):e.message.includes("110017")&&Object(f["e"])(!0,{duration:!0,text:"".concat(m["a"].t("message_file_size_err_tips")),type:"default"});break;default:Object(f["e"])(!0,{duration:!0,text:e.message,type:"default"});break}})).finally((function(){d["a"].getInstance().actionListener(h["a"].zimKitCurrentChatUpdated,a)}))},t.prototype.queryCurrentChatGroupMemberList=function(e){return b(this,void 0,void 0,(function(){var t,n=this;return I(this,(function(a){return t=y["a"].getInstance().groupList.get(e),[2,y["a"].getInstance().queryGroupMemberList(e).then((function(e){return console.log("kitlog queryGroupMemberList data",e),n.memberList=e.userList,t&&(t.memberList=e.userList),e.userList})).catch((function(e){console.log("kitlog queryGroupMemberList err",e)}))]}))}))},t.prototype.deleteMessages=function(e){var t=this,n={isAlsoDeleteServerMessage:!0},a=[];return e?a.push(e):a=this.selectedList,o["a"].getInstance().zim.deleteMessages(a,this.chatID,this.chatType,n).then((function(n){console.log("kitlog deleteMessages data",n),a.forEach((function(e){var n=t.currentMessageList.findIndex((function(t){return t.mMessage.messageID===e.messageID}));t.currentMessageList.splice(n,1)})),e||(t.selectedList=[]),Object(f["e"])(!0,{type:"default",text:"".concat(m["a"].t("message_delete_succeed_tips"))})})).catch((function(e){console.log("kitlog deleteMessages err",e)})).finally((function(){d["a"].getInstance().actionListener(h["a"].zimKitCurrentChatUpdated,t),z.getInstance().mode=_["a"]["normal"],d["a"].getInstance().actionListener(h["a"].zimKitModeChanged,z.getInstance().mode)}))},t}(i),M=w,L=function(){function e(e){this.userID=e.userID,this.userName=e.userName,this.userAvatarUrl=e.userAvatarUrl}return e}(),D=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.queryUsersInfo=function(){var e=this;return o["a"].getInstance().zim.queryUsersInfo([this.userID],{isQueryFromServer:!0}).then((function(t){console.log("kitlog queryUsersInfo success===",t),t.userList.forEach((function(t){t.baseInfo.userID===e.userID&&(e.userName=t.baseInfo.userName,e.userAvatarUrl=t.userAvatarUrl)}))})).catch((function(e){console.log("kitlog queryUsersInfo err",e)}))},t}(L),k=x,S=function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function i(e){try{c(a.next(e))}catch(t){r(t)}}function s(e){try{c(a["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))},U=function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=2&r[0]?a["return"]:r[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(s){r=[6,s],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},O=function(){function e(){return this.chatList=new Map,this.currentConversation={},this.currentChat={},this.mode=_["a"]["normal"],e.instance||(e.instance=this,e.instance.initListenerHandle()),e.instance}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.initListenerHandle=function(){var e=this;d["a"].getInstance().addEventListener(h["a"].zimKitCurrentConversationChanged,[function(t){return S(e,void 0,void 0,(function(){var e,n;return U(this,(function(a){switch(a.label){case 0:return console.log("kitlog conversation changed",t,this.currentChat,this.chatList),this.mode=_["a"]["normal"],d["a"].getInstance().actionListener(h["a"].zimKitModeChanged,this.mode),t.conversationName||(e={userID:t.conversationID,userName:t.conversationName,userAvatarUrl:t.conversationAvatarUrl},n=new k(e),n.queryUsersInfo().then((function(){t.conversationName=n.userName,t.conversationAvatarUrl=n.userAvatarUrl}))),this.currentConversation=t,this.chatList.get(t.conversationID)?this.currentChat=this.chatList.get(t.conversationID):this.currentChat=new M(t),o["a"].getInstance().networkStatus?2!==t.type||this.currentChat.memberList.length?[3,2]:[4,this.currentChat.queryCurrentChatGroupMemberList(t.conversationID)]:[3,3];case 1:a.sent(),a.label=2;case 2:this.currentChat.currentMessageList=[],this.currentChat.queryHistoryMessage(this.currentConversation.conversationID,this.currentConversation.type),a.label=3;case 3:return this.chatList.set(t.conversationID,this.currentChat),d["a"].getInstance().actionListener(h["a"].zimKitCurrentChatChanged,this.currentChat),[2]}}))}))}]),d["a"].getInstance().addEventListener(h["a"].zimKitCurrentConversationUpdate,[function(t){return S(e,void 0,void 0,(function(){var e,n,a=this;return U(this,(function(o){return console.log("kitlog current conversation update",t,this.currentChat,this.chatList.get(t.conversationID)),this.currentConversation=t,0!==t.type||this.currentChat.chatAvatarUrl||(e={userID:t.conversationID,userName:t.conversationName,userAvatarUrl:t.conversationAvatarUrl},n=new k(e),n.queryUsersInfo().then((function(){a.currentChat.chatName=a.currentConversation.conversationName,a.currentChat.chatAvatarUrl=a.currentConversation.conversationAvatarUrl}))),[2]}))}))}]),d["a"].getInstance().addEventListener(h["a"].zimReceivePeerMessage,[function(t){if(console.log("kitlog receivePeerMessage",t),e.currentConversation.conversationID===t.fromConversationID){var n=t.messageList.sort((function(e,t){return e.orderKey-t.orderKey}));n.forEach((function(t){var n={mMessage:t};e.currentChat.currentMessageList.some((function(e){return e.mMessage.messageID===t.messageID}))||(e.currentChat.currentMessageList.push(v(n)),d["a"].getInstance().actionListener(h["a"].zimKitCurrentChatUpdated,e.currentChat))}))}}]),d["a"].getInstance().addEventListener(h["a"].zimReceiveGroupMessage,[function(t){return S(e,void 0,void 0,(function(){var e,n=this;return U(this,(function(a){return console.log("kitlog zimReceiveGroupMessage",t,this.currentChat),this.currentConversation.conversationID===t.fromConversationID&&(e=t.messageList.sort((function(e,t){return e.orderKey-t.orderKey})),e.forEach((function(e){return S(n,void 0,void 0,(function(){var t,n,a,o=this;return U(this,(function(r){switch(r.label){case 0:return t=this.currentChat.memberList,n=t&&t.filter((function(t){return t.userID===e.senderUserID}))[0],n?[3,2]:[4,this.currentChat.queryCurrentChatGroupMemberList(this.currentConversation.conversationID).then((function(){t=o.currentChat.memberList,n=t.filter((function(t){return t.userID===e.senderUserID}))[0]}))];case 1:r.sent(),r.label=2;case 2:return a={mMessage:e},a.senderUserName=n&&n.userName||"",a.senderUserAvatarUrl=n&&n.memberAvatarUrl||"",this.currentChat.currentMessageList.some((function(t){return t.mMessage.messageID===e.messageID}))||(this.currentChat.currentMessageList.push(v(a)),d["a"].getInstance().actionListener(h["a"].zimKitCurrentChatUpdated,this.currentChat)),[2]}}))}))}))),[2]}))}))}]),d["a"].getInstance().addEventListener(h["a"].zimKitDeleteConversation,[function(t){t===e.currentChat.chatID&&(e.currentChat={},e.currentConversation={},d["a"].getInstance().actionListener(h["a"].zimKitCurrentChatChanged,e.currentChat))}]),d["a"].getInstance().addEventListener(h["a"].zimKitNetworkChanged,[function(t){1===t&&d["a"].getInstance().actionListener(h["a"].zimKitCurrentChatUpdated,e.currentChat)}])},e.prototype.registerLoginUserUpdatedCallback=function(e){d["a"].getInstance().addEventListener(h["a"].zimKitLoginUserUpdate,[e])},e.prototype.registerCurrentChatChangedCallback=function(e){d["a"].getInstance().addEventListener(h["a"].zimKitCurrentChatChanged,[e])},e.prototype.removeCurrentChatChangedCallback=function(e){d["a"].getInstance().removeEventListener(h["a"].zimKitCurrentChatChanged,[e])},e.prototype.registerCurrentChatUpdatedCallback=function(e){d["a"].getInstance().addEventListener(h["a"].zimKitCurrentChatUpdated,[e])},e.prototype.removeCurrentChatUpdatedCallback=function(e){d["a"].getInstance().removeEventListener(h["a"].zimKitCurrentChatUpdated,[e])},e.prototype.registerModeChangedCallback=function(e){d["a"].getInstance().addEventListener(h["a"].zimKitModeChanged,[e])},e.prototype.removeModeChangedCallback=function(e){d["a"].getInstance().removeEventListener(h["a"].zimKitModeChanged,[e])},e.prototype.initWithConversationID=function(e,t,n){if(2===t&&!n){var a=y["a"].getInstance().groupList.get(e);n=a&&a.baseInfo.groupName}d["a"].getInstance().actionListener(h["a"].zimKitCurrentConversationChanged,{conversationID:e,type:t,conversationName:n})},e.prototype.unInit=function(){this.chatList=new Map,this.currentConversation={},this.currentChat={}},e}(),z=t["a"]=O},"91c2":function(e,t,n){"use strict";n("ade9")},"934f":function(e,t,n){},"951c":function(e,t,n){"use strict";n("d9e2"),function(){function e(e){this.memberNickname=e.memberNickname,this.memberRole=e.memberRole,this.userID=e.userID,this.userName=e.userName,this.memberAvatarUrl=e.memberAvatarUrl}}(),function(){function e(e){this.groupID=e.groupID,this.groupName=e.groupName,this.groupAvatarUrl=e.groupAvatarUrl}}(),function(){function e(e){this.baseInfo=e.baseInfo,this.groupNotice=e.groupNotice,this.notificationStatus=e.notificationStatus,this.groupAttributes=e.groupAttributes}}();var a=function(){function e(e){this.memberList=[],this.notificationStatus=e.notificationStatus,this.memberList=e.memberList,this.baseInfo=e.baseInfo}return e}(),o=n("f87a"),r=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.queryGroupMemberList=function(){var e=this,t={count:100,nextFlag:0};return o["a"].getInstance().zim.queryGroupMemberList(this.baseInfo.groupID,t).then((function(t){console.log("kitlog queryGroupMemberList success",t),e.memberList=t.userList})).catch((function(e){console.log("kitlog queryGroupMemberList err",e)}))},t.prototype.queryGroupInfo=function(){var e=this;return o["a"].getInstance().zim.queryGroupInfo(this.baseInfo.groupID).then((function(t){e.baseInfo=t.groupInfo.baseInfo}))},t}(a);t["a"]=i},"9c33":function(e,t,n){},"9f8e":function(e,t,n){"use strict";n("d9e2"),n("14d9");var a=n("f87a"),o=n("951c"),r=n("0a03"),i=n("1e09"),s=function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function i(e){try{c(a.next(e))}catch(t){r(t)}}function s(e){try{c(a["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))},c=function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=2&r[0]?a["return"]:r[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(s){r=[6,s],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},u=function(){function e(){return this.groupList=new Map,e.instance||(e.instance=this,e.instance.initListenerHandle()),e.instance}return e.getInstance=function(){return e.instance||(this.instance=new e),e.instance},e.prototype.initListenerHandle=function(){var e=this;r["a"].getInstance().addEventListener(i["a"].zimGroupMemberStateChanged,[function(t){var n=e.groupList.get(t.groupID);n?n.queryGroupMemberList():e.queryGroupList().then((function(){var n=e.groupList.get(t.groupID);n&&n.queryGroupMemberList()}))}])},e.prototype.queryGroupList=function(){var e=this;return a["a"].getInstance().zim.queryGroupList().then((function(t){console.log("kitlog queryGroupList data",t,e.groupList),t.groupList.forEach((function(t){e.groupList.set(t.baseInfo.groupID,new o["a"](t))}))}))},e.prototype.createGroup=function(e,t,n){var o=this,r={groupID:e,groupName:t,groupAvatarUrl:""},i={groupNotice:"",groupAttributes:{}};return a["a"].getInstance().zim.createGroup(r,n,i).then((function(e){return s(o,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.queryGroupList()];case 1:return t.sent(),[2,e]}}))}))}))},e.prototype.joinGroup=function(e){var t=this;return a["a"].getInstance().zim.joinGroup(e).then((function(e){return s(t,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.queryGroupList()];case 1:return t.sent(),[2,e]}}))}))}))},e.prototype.leaveGroup=function(e){var t=this;return a["a"].getInstance().zim.leaveGroup(e).then((function(e){return s(t,void 0,void 0,(function(){return c(this,(function(t){return this.queryGroupList(),[2,e]}))}))}))},e.prototype.queryGroupMemberList=function(e){var t={count:100,nextFlag:0};return a["a"].getInstance().zim.queryGroupMemberList(e,t)},e.prototype.registerLoginStateChangedCallback=function(e){r["a"].getInstance().addEventListener(i["a"].zimKitLoginStateChanged,[e])},e.prototype.unInit=function(){this.groupList=new Map},e}();t["a"]=u},a072:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return c}));var a=n("56b9"),o=function(e,t){a["a"].emit("toastOperation",e,t)},r=function(e,t){a["a"].emit("dialogOperation",e,t)},i=function(e){a["a"].emit("groupUIOperation",e)},s=function(e){a["a"].emit("expressionBoxOperation",e)},c=function(e,t){a["a"].emit("rightClickDialogOperation",e,t)}},a82d:function(e,t,n){},abae:function(e,t,n){},ade9:function(e,t,n){},b9aa:function(e,t,n){"use strict";n("c063")},bae3:function(e,t,n){"use strict";n("d9e2"),n("14d9");var a=n("f87a"),o=n("0a03"),r=n("1e09"),i=n("a072"),s=function(){function e(e){this.conversationID=e.conversationID,this.conversationName=e.conversationName,this.conversationAvatarUrl=e.conversationAvatarUrl,this.type=e.type,this.unreadMessageCount=e.unreadMessageCount,this.lastMessage=e.lastMessage,this.orderKey=e.orderKey,this.notificationStatus=e.notificationStatus}return e}(),c=s,u=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.clearConversationUnreadMessageCount=function(){a["a"].getInstance().zim.clearConversationUnreadMessageCount(this.conversationID,this.type)},t}(c),p=l,g=n("9f8e"),d=function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function i(e){try{c(a.next(e))}catch(t){r(t)}}function s(e){try{c(a["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))},f=function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=2&r[0]?a["return"]:r[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(s){r=[6,s],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},h=function(){function e(){return this.pagePullCount=100,this.loadStatus=0,this.conversationList=new Map,this.totalUnreadMessageCount=0,this.isAbnormal=!1,this.activeConversationID="",e.instance||(e.instance=this,e.instance.initListenerHandle()),e.instance}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.initListenerHandle=function(){var e=this;o["a"].getInstance().addEventListener(r["a"].zimConversationTotalUnreadMessageCountUpdated,[function(t){e.totalUnreadMessageCount=t.totalUnreadMessageCount}]),o["a"].getInstance().addEventListener(r["a"].zimConversationChanged,[function(t){return d(e,void 0,void 0,(function(){var e,n,a,i=this;return f(this,(function(s){return console.log("kitlog conversation changed callback",t),2!==this.loadStatus||(e=!1,n=!1,a=!1,t.infoList.forEach((function(t){switch(t.event){case 1:if(i.conversationList.size){var s=!1;i.conversationList.get(t.conversation.conversationID)&&(s=!0,i.conversationList.set(t.conversation.conversationID,new p(t.conversation)),i.activeConversationID===t.conversation.conversationID&&(n=!0),e=!0),s||(i.conversationList.set(t.conversation.conversationID,new p(t.conversation)),e=!0,i.activeConversationID||(i.activeConversationID=t.conversation.conversationID,a=!0))}else i.conversationList.set(t.conversation.conversationID,new p(t.conversation)),i.activeConversationID=t.conversation.conversationID,e=!0,a=!0;break;case 0:i.conversationList.set(t.conversation.conversationID,new p(t.conversation)),e=!0,i.activeConversationID||(console.log("kitlog activecvid",i.activeConversationID,i),i.activeConversationID=t.conversation.conversationID,a=!0),2===t.conversation.type&&g["a"].getInstance().queryGroupList();break;case 2:i.conversationList.set(t.conversation.conversationID,new p(t.conversation)),i.activeConversationID===t.conversation.conversationID&&(n=!0),e=!0;break;default:break}e&&(i.sortConversationList(),o["a"].getInstance().actionListener(r["a"].zimKitConversationListUpdate,i.conversationList));var c=i.conversationList.get(i.activeConversationID);n&&(o["a"].getInstance().actionListener(r["a"].zimKitCurrentConversationUpdate,c),c.unreadMessageCount&&c.clearConversationUnreadMessageCount()),a&&(o["a"].getInstance().actionListener(r["a"].zimKitCurrentConversationChanged,c),c.unreadMessageCount&&c.clearConversationUnreadMessageCount())}))),[2]}))}))}])},e.prototype.loadConversationList=function(){var e=this;if(1===this.loadStatus)return Promise.reject();this.loadStatus=1;var t={nextConversation:void 0,count:localStorage.count||this.pagePullCount};return a["a"].getInstance().zim.queryConversationList(t).then((function(t){if(console.log("kitlog queryConversationList data",t),e.loadStatus=2,e.isAbnormal=!1,e.conversationList=new Map,t.conversationList.length){if(t.conversationList.forEach((function(t){0!==t.type&&2!==t.type||e.conversationList.set(t.conversationID,new p(t))})),e.sortConversationList(),e.activeConversationID||(e.activeConversationID=Array.from(e.conversationList)[0][0]),e.conversationList.get(e.activeConversationID).unreadMessageCount){var n=e.conversationList.get(e.activeConversationID);n.clearConversationUnreadMessageCount()}o["a"].getInstance().actionListener(r["a"].zimKitCurrentConversationChanged,e.conversationList.get(e.activeConversationID))}o["a"].getInstance().actionListener(r["a"].zimKitConversationListUpdate,e.conversationList)})).catch((function(t){console.log("kitlog queryConversationList err",t),e.isAbnormal=!0,e.loadStatus=2}))},e.prototype.loadNextPage=function(){var e=this,t={nextConversation:Array.from(this.conversationList)[this.conversationList.size-1][1],count:this.pagePullCount};return a["a"].getInstance().zim.queryConversationList(t).then((function(t){console.log("kitlog loadNextPage data",t),t.conversationList.length&&(t.conversationList.forEach((function(t){0!==t.type&&2!==t.type||e.conversationList.set(t.conversationID,new p(t))})),e.sortConversationList(),o["a"].getInstance().actionListener(r["a"].zimKitConversationListUpdate,e.conversationList))}))},e.prototype.deleteConversation=function(e,t){var n=this,s={isAlsoDeleteServerConversation:!0};return a["a"].getInstance().zim.deleteConversation(e,t,s).then((function(t){if(n.conversationList.delete(t.conversationID),n.conversationList.size){if(t.conversationID===n.activeConversationID){n.activeConversationID=Array.from(n.conversationList)[0][0];var a=n.conversationList.get(n.activeConversationID);a.unreadMessageCount&&a.clearConversationUnreadMessageCount(),o["a"].getInstance().actionListener(r["a"].zimKitCurrentConversationChanged,n.conversationList.get(Array.from(n.conversationList)[0][0]))}}else n.activeConversationID="";o["a"].getInstance().actionListener(r["a"].zimKitConversationListUpdate,n.conversationList),o["a"].getInstance().actionListener(r["a"].zimKitDeleteConversation,e)})).catch((function(e){Object(i["e"])(!0,{duration:!0,text:e.message,type:"default"})}))},e.prototype.sortConversationList=function(){var e=Array.from(this.conversationList.values()).sort((function(e,t){return t.orderKey-e.orderKey}));this.conversationList=new Map(e.map((function(e){return[e.conversationID,e]})))},e.prototype.registerLoginStateChangedCallback=function(e){o["a"].getInstance().addEventListener(r["a"].zimKitLoginStateChanged,[e])},e.prototype.registerAbnormalCallback=function(e){o["a"].getInstance().addEventListener(r["a"].zimKitConversationListQueryAbnormally,[e])},e.prototype.unInit=function(){this.conversationList=new Map,this.totalUnreadMessageCount=0,this.isAbnormal=!1,this.activeConversationID="",this.loadStatus=0},e}();t["a"]=h},be6d:function(e,t,n){},c063:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var a=n("2b0e"),o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},r=[],i=(n("d9e2"),n("f8c9"),n("14d9"),n("1b40")),s=n("f87a"),c=n("f00f"),u=n("206b"),l=n("e2ca"),p=n("3356"),g=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),d=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},f=function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function i(e){try{c(a.next(e))}catch(t){r(t)}}function s(e){try{c(a["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))},h=function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=2&r[0]?a["return"]:r[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(s){r=[6,s],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cacheUserInfo=Object(c["d"])(),t}return g(t,e),t.prototype.beforeMount=function(){return f(this,void 0,void 0,(function(){var e,t=this;return h(this,(function(n){switch(n.label){case 0:return[4,s["a"].getInstance().init(u["a"].appID)];case 1:return n.sent(),this.cacheUserInfo&&(u["a"].tokenURL?Object(p["a"])(this.cacheUserInfo.userID,u["a"]).then((function(e){return f(t,void 0,void 0,(function(){return h(this,(function(t){return this.zimKitLogin(e),[2]}))}))})):(e=s["a"].getInstance().generateKitTokenForTest(u["a"].appID,u["a"].serverSecret,this.cacheUserInfo.userID),this.zimKitLogin(e))),[2]}}))}))},t.prototype.zimKitLogin=function(e){var t=this;s["a"].getInstance().connectUser(this.cacheUserInfo,e).then((function(){t.$router.push({name:"Main"})}))},t=d([Object(i["a"])({components:{Common:l["a"]}})],t),t}(i["c"]),v=m,y=v,_=(n("e10e"),n("2877")),C=Object(_["a"])(y,o,r,!1,null,null,null),b=C.exports,I=n("8c4f");a["a"].use(I["a"]);var w=I["a"].prototype.push;I["a"].prototype.push=function(e){return w.call(this,e).catch((function(e){return e}))};var M=[{path:"/",redirect:{name:"Login"}},{path:"/login",name:"Login",component:function(){return n.e("about").then(n.bind(null,"a55b"))}},{path:"/index",name:"Main",component:function(){return n.e("about").then(n.bind(null,"cd56"))}}],L=new I["a"]({base:"",routes:M}),D=L,x=n("cf8b");a["a"].config.productionTip=!1,new a["a"]({i18n:x["a"],router:D,render:function(e){return e(b)}}).$mount("#app")},cf8b:function(e,t,n){"use strict";var a=n("2b0e"),o=n("a925"),r={common_yesterday:"Yesterday",common_user_kick_out:"The user is kicked out because the ID is reused for login. ",common_monday:"Monday",common_tuesday:"Tuesday",common_wednesday:"Wednesday",common_thursday:"Thursday",common_friday:"Friday",common_saturday:"Saturday",common_sunday:"Sunday",common_logout:"Log out",common_return:"Back",common_message_unknown:"This type of message is not supported. Please upgrade to the latest version.",common_message_photo:"[Image]",common_message_audio:"[Audio]",common_message_video:"[Video]",common_message_file:"[File]",conversation_start_chat_w:"New Chat",conversation_empty:"No chats.\nStart chatting now.",conversation_start_single_chat:"One-on-one chat",conversation_start_group_chat:"Group chat",conversation_join_group_chat:"Join a group",conversation_cancel:"Cancel",conversation_delete:"Delete",conversation_message_total_count:"Chats",conversation_reload:"Reload",conversation_enter_touserid_w:"Enter a user ID",conversation_close_chat_w:"Delete",conversation_disconnected:"Disconnected",conversation_connecting:"Connecting...",demo_login_hint:"User ID",demo_login:"Log In",demo_user_name:"Username: %s",demo_user_name_w:"Random nickname",demo_welcome:"Hi, \nwelcome to \nZEGOCLOUD In-app Chat.",demo_input_user_id_error_tips:"The userID must be between 6-12 characters using letters and numbers.",demo_input_placeholder_w:"6-12 bit userID using letters and numbers.",demo_user_id_login:"User Login",group_create_chat:"OK",group_input_group_id:"Group ID",group_input_group_id_w:"Group ID",group_input_group_name:"Group name",group_input_user_id_of_group:"Enter group member IDs, separated by ';'",group_user_id_cant_null:"User ID is required.",group_create_group_chat_title:"New group chat",group_join_group_chat:"Join a group chat",group_user_not_exit:"The user doesn't exist.",group_group_not_exit:"The group doesn't exist.",group_group_user_id_not_exit:"The user ID (%s) doesn't exist. Please modify and try again.",group_group_user_id_not_exit_w:"Please modify and try again.",group_group_id_not_exit:"The group (%s) doesn't exist. Please try again.",group_group_id_not_exit_w:"It doesn't exist. Please modify and try again.",group_input_user_id_error_tip:"The userID must be between 6-12 characters using letters and numbers.",group_group_id:"Group ID",group_copy:"Copy",group_copy_success:"Copied.",group_repeat_join_group_chat:"You are already in the group.",message_input_new_message:"",message_user_not_exit_please_again:"The user ID (%s) doesn't exist. Please try again.",message_cant_send_empty_msg:"Blank messages are not allowed",message_create_chat:"OK",message_input_user_id_error_tips:"The userID must be between 6-12 characters using letters and numbers.",message_create_single_chat:"New 1-on-1 chat",message_send:"Send",message_empty_w:"No messages received.",message_send_img_exceed_tips_w:"No more than 9 images.",message_send_video_exceed_tips_w:"Select a maximum of 9 videos.",message_network_anomaly:"Network error. Please check the network and try again.",message_size_over_limit:"The image doesn’t meet required specification. Please modify it and try again.",message_audio_play_error_tips:"Playback failed. Please check the network and try again.",message_video_play_error_tips_w:"Unable to play the video on websites, please download it and play with system media player.",message_delete_confirmation_desc:"Are you sure to delete?",message_delete_succeed_tips:"Deleted successfully",message_multi_select:"Select",message_file_empty_error_tips:"Unable to send empty file, please reselect.",message_photo_size_err_tips:"The image cannot exceed 10 MB, please compress it and resend.",message_photo_format_err_tips:"Only JPG, PNG, BMP, TIFF, GIF, WebP format images are supported.",message_video_size_err_tips:"The video cannot exceed 100 MB, please process it and resend.",message_video_format_err_tips:"Only MP4 and MOV format videos are supported.",message_file_size_err_tips:"The file cannot exceed 100 MB, please process it and resend.",message_title_chat:"Chat",message_title_group_chat:"Group chat",album_download_image_w:"Save",album_redownload_image:"Relaod"},i={common_yesterday:"昨天",common_user_kick_out:"重复登录，用户被踢出",common_monday:"周一",common_tuesday:"周二",common_wednesday:"周三",common_thursday:"周四",common_friday:"周五",common_saturday:"周六",common_sunday:"周日",common_logout:"退出",common_return:"返回",common_message_unknown:"暂不支持该类型消息，请升级到最新版本",common_message_photo:"[图片]",common_message_audio:"[语音]",common_message_video:"[视频]",common_message_file:"[文件]",conversation_start_chat_w:"发起聊天",conversation_empty:"暂无消息\n快去发起聊天吧",conversation_start_single_chat:"发起单聊",conversation_start_group_chat:"发起群聊",conversation_join_group_chat:"加入群聊",conversation_cancel:"取消",conversation_delete:"删除",conversation_message_total_count:"消息",conversation_reload:"重新加载",conversation_enter_touserid_w:"请输入对方用户ID",conversation_close_chat_w:"关闭聊天",conversation_disconnected:"未连接",conversation_connecting:"连接中...",demo_login_hint:"输入用户id",demo_login:"登录",demo_user_name:"用户名为:%s",demo_user_name_w:"随机用户昵称",demo_welcome:"Hi，\n欢迎使用 \nZEGO In-app Chat",demo_input_user_id_error_tips:"请输入6–12位英文或数字的用户ID",demo_input_placeholder_w:"请输入6–12位英文或数字的用户ID",demo_user_id_login:"用户ID登录",group_create_chat:"发起会话",group_input_group_id:"输入群ID",group_input_group_id_w:"输入群聊ID",group_input_group_name:"输入群聊名称",group_input_user_id_of_group:"输入群成员的用户ID，';'英文分号隔开",group_user_id_cant_null:"用户id不能为空",group_create_group_chat_title:"发起群聊会话",group_join_group_chat:"加入群聊会话",group_user_not_exit:"用户不存在",group_group_not_exit:"群不存在",group_group_user_id_not_exit:"群成员用户ID %s 不存在，请返回",group_group_user_id_not_exit_w:"请返回修改",group_group_id_not_exit:"群ID %s 不存在，请返回",group_group_id_not_exit_w:"不存在，请返回修改",group_input_user_id_error_tip:"请输入6–12位英文或数字的用户ID",group_group_id:"群聊ID",group_copy:"复制",group_copy_success:"复制成功",group_repeat_join_group_chat:"你已在该群组",message_input_new_message:"输入新消息",message_user_not_exit_please_again:"用户ID:%s不存在，请返回重新添加",message_cant_send_empty_msg:"不允许发送空白消息",message_create_chat:"发起会话",message_input_user_id_error_tips:"请输入6–12位英文或数字的用户ID",message_create_single_chat:"发起单聊会话",message_send:"发送",message_empty_w:"暂时还没有收到消息",message_send_img_exceed_tips_w:"发送图片超过9张，请重新选择",message_send_video_exceed_tips_w:"发送视频超过9个，请重新选择",message_network_anomaly:"网络异常，请检查网络后重试",message_size_over_limit:"图片不符合规格，请处理后再发送",message_audio_play_error_tips:"播放失败，请检测网络后重试",message_video_play_error_tips_w:"视频格式不支持web端播放，请下载后用系统播放器播放",message_delete_confirmation_desc:"确认删除？",message_delete_succeed_tips:"删除成功",message_multi_select:"多选",message_file_empty_error_tips:"无法发送空文件，请重新选择",message_photo_size_err_tips:"图片不支持超过10MB，请压缩后重新发送",message_photo_format_err_tips:"图片只支持JPG、PNG、BMP、TIFF、GIF、WebP格式，请处理后重新发送",message_video_size_err_tips:"视频不支持超过100MB，请处理后重新发送",message_video_format_err_tips:"视频只支持mp4和mov格式，请处理后重新发送",message_file_size_err_tips:"文件不支持超过100MB，请处理后重新发送",message_title_chat:"聊天",message_title_group_chat:"群聊",album_download_image_w:"下载",album_redownload_image:"重新加载"};a["a"].use(o["a"]);var s="en_US";"zh"!==navigator.language&&"zh-CN"!==navigator.language||(s="zh_CN");var c=new o["a"]({locale:s,fallbackLocale:"en_US",messages:{en_US:r,zh_CN:i}});t["a"]=c},cfec:function(e,t,n){"use strict";n("abae")},db14:function(e,t,n){},e10e:function(e,t,n){"use strict";n("8383")},e25d:function(e,t,n){},e2ca:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"zegoim"}},[t("div",{staticClass:"zego-im-container"},[t("div",{staticClass:"top-banner"},[t("div",{staticClass:"logo",on:{click:e.uploadLog}},[e._v(e._s(e.lang.includes("en")?"":"ZEGO")+" In-app Chat "+e._s(e.connectionStateObj[e.connectionState]))])]),t("div",{staticClass:"box"},[t("Conversation"),t("Message"),t("div",{staticClass:"group-wrap"},[t("Group",{attrs:{show:e.showGroupUI}})],1)],1),t("toast",{attrs:{showToast:e.showToast,toastData:e.toastData},on:{"update:showToast":function(t){e.showToast=t},"update:show-toast":function(t){e.showToast=t}}}),t("BaseDialog",{directives:[{name:"show",rawName:"v-show",value:e.showBaseDialog,expression:"showBaseDialog"}],attrs:{dialogData:e.dialogData,show:e.showBaseDialog},on:{"update:show":function(t){e.showBaseDialog=t}}}),e.showRightClickMenu?t("RightClickDialog",{attrs:{rightClickData:e.rightClickData}}):e._e()],1)])},o=[],r=(n("d9e2"),n("f8c9"),n("1b40")),i=(n("db14"),function(){var e=this,t=e._self._c;e._self._setupProxy;return e.showToast&&e.toastData.text?t("transition",{attrs:{name:"fade"}},[t("div",{staticClass:"default",class:{loading:"loading"===e.toastData.type}},[t("div",{staticClass:"toast",class:{error:"error"===e.toastData.type}},[t("div",{staticClass:"text"},[e._v(e._s(e.toastData.text))])])])]):e._e()}),s=[],c=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=2e3,t}return c(t,e),t.prototype.beforeUpdate=function(){var e=this;this.showToast&&(clearTimeout(),setTimeout((function(){e.$emit("update:showToast",!1)}),this.duration))},u([Object(r["b"])(Object)],t.prototype,"toastData",void 0),u([Object(r["b"])(Boolean)],t.prototype,"showToast",void 0),t=u([Object(r["a"])({})],t),t}(r["c"]),p=l,g=p,d=(n("91c2"),n("2877")),f=Object(d["a"])(g,i,s,!1,null,"f5aa28e0",null),h=f.exports,m=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"wrapper"},[t("div",{staticClass:"dialog"},[e.dialogData.hasCloseBtn?t("div",{staticClass:"close-icon",on:{click:e.close}}):e._e(),t("div",{staticClass:"title"},[e._v(e._s(e.dialogData.title))]),t("div",{staticClass:"desc"},[e._v(e._s(e.dialogData.desc))]),t("div",{staticClass:"line"}),t("div",{staticClass:"btn-box"},[e.dialogData.cancelText?t("button",{staticClass:"btn cancel",on:{click:function(t){return e.clickBtn("cancel")}}},[e._v(e._s(e.dialogData.cancelText))]):e._e(),e.dialogData.confirmText?t("button",{staticClass:"btn confirm",on:{click:function(t){return e.clickBtn("confirm")}}},[e._v(e._s(e.dialogData.confirmText))]):e._e()])])])},v=[],y=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),_=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y(t,e),t.prototype.clickBtn=function(e){"confirm"===e?this.dialogData.confirmFunc&&this.dialogData.confirmFunc():"cancel"===e&&this.dialogData.cancelFunc&&this.dialogData.cancelFunc(),this.$emit("update:show",!1)},t.prototype.close=function(){this.$emit("update:show",!1)},_([Object(r["b"])(String)],t.prototype,"type",void 0),_([Object(r["b"])(Object)],t.prototype,"dialogData",void 0),t=_([Object(r["a"])({})],t),t}(r["c"]),b=C,I=b,w=(n("fa92"),Object(d["a"])(I,m,v,!1,null,"7222e789",null)),M=w.exports,L=n("56b9"),D=n("1601"),x=n("06e8"),k=n("0151"),S=n("a072"),U=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"right-click-box",style:`top: ${e.rightClickData&&e.rightClickData.y}px;left: ${e.rightClickData&&e.rightClickData.x}px`},[e.rightClickData&&e.rightClickData.conversationItem?t("div",{staticClass:"item",on:{click:e.closeConversation}},[e._v(e._s(e.$t("conversation_close_chat_w")))]):e._e(),e.rightClickData&&e.rightClickData.messageItem?t("div",[!e.rightClickData.messageItem.mMessage.fileDownloadUrl||11!==e.rightClickData.messageItem.mMessage.type&&12!==e.rightClickData.messageItem.mMessage.type&&14!==e.rightClickData.messageItem.mMessage.type?e._e():t("div",{staticClass:"item",on:{click:e.downLoad}},[e._v(e._s(e.$t("album_download_image_w")))]),t("div",{staticClass:"item",on:{click:e.deleteMsg}},[e._v(e._s(e.$t("conversation_delete")))]),t("div",{staticClass:"item",on:{click:e.multiSelect}},[e._v(e._s(e.$t("message_multi_select")))])]):e._e()])},O=[],z=n("bae3"),j=n("83bc"),E=n("e35c"),P=n("0a03"),A=n("1e09"),T=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),N=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.mounted=function(){Object(S["c"])("close"),Object(S["b"])("close")},t.prototype.closeConversation=function(){z["a"].getInstance().deleteConversation(this.rightClickData.conversationItem.conversationID,this.rightClickData.conversationItem.type)},t.prototype.downLoad=function(){var e=this,t=new XMLHttpRequest;t.open("GET",this.rightClickData.messageItem.mMessage.fileDownloadUrl,!0),t.responseType="blob",t.onload=function(){if(200===t.status){var n=document.createElement("a");n.href=window.URL.createObjectURL(t.response),n.download=e.rightClickData.messageItem.mMessage.fileName,n.click()}},t.send()},t.prototype.deleteMsg=function(){var e=JSON.parse(JSON.stringify(this.rightClickData.messageItem.mMessage));Object(S["a"])(!0,{desc:"".concat(this.$t("message_delete_confirmation_desc")),confirmText:"".concat(this.$t("conversation_delete")),cancelText:"".concat(this.$t("conversation_cancel")),hasCloseBtn:!1,confirmFunc:function(){j["a"].getInstance().currentChat.deleteMessages(e)}})},t.prototype.multiSelect=function(){j["a"].getInstance().mode=E["a"]["multiSelect"],P["a"].getInstance().actionListener(A["a"].zimKitModeChanged,E["a"]["multiSelect"],this.rightClickData.messageItem)},N([Object(r["b"])(Object)],t.prototype,"rightClickData",void 0),t=N([Object(r["a"])({})],t),t}(r["c"]),K=G,H=K,$=(n("27c5"),Object(d["a"])(H,U,O,!1,null,"b40b0620",null)),q=$.exports,R=n("f87a"),B=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),F=function(e,t,n,a){var o,r=arguments.length,i=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(r<3?o(i):r>3?o(t,n,i):o(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toastData={text:"",type:"default"},t.showToast=!1,t.dialogData={title:"",desc:"",cancelText:"",confirmText:"",hasCloseBtn:!1},t.showBaseDialog=!1,t.showGroupUI=!1,t.showRightClickMenu=!1,t.rightClickData={},t.lang=navigator.language,t.lastClickTime=0,t.num=0,t.connectionState=2,t.connectionStateObj={0:"(".concat(t.$t("conversation_disconnected"),")"),1:"(".concat(t.$t("conversation_connecting"),")"),3:"(".concat(t.$t("conversation_connecting"),")")},t}return B(t,e),t.prototype.mounted=function(){var e=this;window.addEventListener("click",this.handleClick),L["a"].on("toastOperation",(function(t,n){e.toastData=n,e.showToast=t})),L["a"].on("dialogOperation",(function(t,n){e.dialogData=n,e.showBaseDialog=t})),L["a"].on("groupUIOperation",(function(t){e.showGroupUI=!t&&!e.showGroupUI})),L["a"].on("rightClickDialogOperation",(function(t,n){e.showRightClickMenu=t,e.rightClickData=n})),P["a"].getInstance().addEventListener(A["a"].zimConnectionStateChanged,[function(t){e.connectionState=t.state}])},t.prototype.beforeDestroy=function(){window.removeEventListener("click",this.handleClick)},t.prototype.handleClick=function(e){var t,n,a,o=e.path||e.composedPath&&e.composedPath();if(e.target.className.includes("more-icon"))Object(S["c"])();else{var r=document.querySelector(".group-container"),i=!1;o.forEach((function(e){e===r&&(i=!0)})),r&&!i&&Object(S["c"])()}if((null===(t=e.target.parentNode)||void 0===t?void 0:t.className.includes("right-click-box"))||(null===(a=null===(n=e.target.parentNode)||void 0===n?void 0:n.parentNode)||void 0===a?void 0:a.className.includes("right-click-box"))){if(this.showRightClickMenu=!this.showRightClickMenu,!this.showRightClickMenu){u=document.querySelector(".message-content");u.style.overflowY="scroll";l=document.querySelector(".conversation-content");l.style.overflowY="auto"}}else{var s=document.querySelector(".right-click-box"),c=!1;if(o.forEach((function(e){e===s&&(c=!0)})),s&&!c&&(this.showRightClickMenu=!this.showRightClickMenu,!this.showRightClickMenu)){var u=document.querySelector(".message-content");u.style.overflowY="scroll";var l=document.querySelector(".conversation-content");l.style.overflowY="auto"}}},t.prototype.uploadLog=function(){var e=(new Date).getTime();!this.lastClickTime||e-this.lastClickTime<500?this.num++:this.num=0,this.lastClickTime=e,4===this.num&&(this.num=0,R["a"].getInstance().uploadLog().then((function(){Object(S["e"])(!0,{duration:!0,text:"上传日志成功",type:"default"})})).catch((function(e){Object(S["e"])(!0,{duration:!0,text:"上传日志失败：".concat(e),type:"default"})})))},t=F([Object(r["a"])({components:{Toast:h,BaseDialog:M,Conversation:D["a"],Message:x["a"],Group:k["a"],RightClickDialog:q}})],t),t}(r["c"]),J=W,V=J,Y=(n("f8c7"),n("6ce6"),Object(d["a"])(V,a,o,!1,null,"92e06716",null));t["a"]=Y.exports},e35c:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={normal:0,multiSelect:1}},eb74:function(e,t,n){"use strict";n("934f")},eca1:function(e,t,n){},edf0:function(e,t,n){"use strict";n("e25d")},f00f:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return p}));n("14d9");var a=["Ada","Aaliyah","Aditi","Adela","Adelaide","Adele","Adora","Afra","Agatha","Agnes","Alani","Alberta","Alice","Alma","Althea","Alva","Alexandra","Alisa","Alison","Alyssa","Amanda","Amelia","Amity","Anila","Amy","Andrea","Angela","Ann","Anna","Annabelle","Antonia","Apphia","April","Arabela","Arlene","Ashley","Astrid","Atalanta","Athena","Audrey","Aurora","Ava","Barbara","Basia","Bblythe","Beatrice","Belen","Bella","Belle","Belinda","Bernice","Bertha","Beryl","Bess","Betsy","Betty","Beulah","Beverly","Blanche","Bonnie","Breenda","Brianna","Bridget","Brook","Calista","Camille","Candice","Candance","Carol","Cara","Caroline","Carlin","Caitlin","Catherine","Cathy","Cecilia","Celeste","Charlotte","Chaya","Cheryl","Cherry","Cheryl","Chloe","Christine","Clara","Claire","Clara","Clementine","Constance","Cora","Coral","Cornelia","Crystal","Cynthia","Daisy","Dale","Dana","Damla","Daphne","Darlene","Dawn","Debby","Deborah","Deirdre","Delia","Denise","Destiny","Diana","Dinah","Dolores","Dominic","Donna","Doreen","Dora","Doris","Dorothy","Eartha","Eden","Edith","Edwina","Eileen","Elaine","Eleanore","Elizabeth","Ella","Ellen","Elma","Elsa","Elsie","Elvira","Elva","Emily","Emma","Enid","Erin","Erica","Esther","Ethel","Eudora","Eunice","Evangeline","Eve","Evelyn","Faithe","Faith","Fanny","Fay","Flora","Florence","Frances","Freda","Frederica","Gabrielle","Gail","Gemma","Genevieve","Georgia","Geraldine","Gill","Gina","Giselle","Gladys","Gloria","Grace","Griselda","Gustave","Gwendolyn","Hannah","Harriet","Hazel","Heather","Hedda","Hedwig","Hedy","Helen","Heloise","Hermosa","Hilda","Hilary","Honey","Hulda","Ida","Ina","Ingrid","Irene","Iris","Irma","Isabel","Ivy","Jacqueline","Jade","Jamie","Jane","Janet","Janice","Jean","Jennifer","Jenny","Jessie","Jessica","Jill","Jo","Joa","Joanna","Joanne","Jocelyn","Jodie","Jolie","Josephine","Joy","Joyce","Judith","Judy","Julia","Julie","Juliet","June","Kama","Karen","Kate","Katherine","Kay","Kelly","Kimberley","Kitty","Kristin","Lara","Laura","Laurel","Lauren","Lee","Leila","Lena","Leona","Lesley","Letitia","Lila","Lilith","Lillian","Linda","Lindsay","Lisa","Liz","Lola","Lorraine","Louise","Lucy","Lyuba","Lydia","Lynn","Mabel","Madge","Madeline","Maggie","Mamie","Mandy","Marcia","Margaret","Marguerite","Maria","Marina","Marian","Marjorie","Martina","Martha","Mary","Maud","Maureen","Mavis","Maxine","Mag","May","Megan","Melissa","Meroy","Meredith","Merry","Michelle","Michaelia","Mignon","Mildred","Miranda","Mirabelle","Miriam","Modesty","Moira","Molly","Mona","Monica","Muriel","Murray","Myra","Myrna","Nancy","Naomi","Natalie","Natividad","Nelly","Nicole","Nicola","Nina","Nora","Norma","Novia","Nydia","Octavia","Odelia","Odelette","Olga","Olive","Olivia","Ophelia","Pag","Page","Pamela","Pandora","Patricia","Paula","Pearl","Penny","Penelope","Philipppa","Phoebe","Phoenix","Phyllis","Polly","Poppy","Prima","Priscilla","Prudence","Queena","Quanna","Quintina","Rachel","Rae","Rebecca","Regina","Renee","Renata","Rita","Riva","Roberta","Rose","Rosalind","Rosemary","Roxanne","Ruby","Ruth","Sabina","Sabrina","Sally","Salome","Samantha","Sandra","Sandy","Sara","Sarah","Sebastiane","Selena","Sharon","Sherry","Sheila","Shirley","Sibyl","Sigrid","Simona","Sophia","Spring","Stacey","Setlla","Stephanie","Susan","Susie","Susanna","Suzanne","Sylvia","Tara","Tabitha","Tammy","Teresa","Tess","Thera","Theresa","Tiffany","Tina","Tobey","Tracy","Trista","Truda","Ula","Una","Ursula","Valerie","Vanessa","Venus","Vera","Verna","Vicky","Victoria","Viola","Violet","Virginia","Vivien","Wallis","Wanda","Wendy","Winni","Winifred","Xanthe","Xaviera","Xenia","Xylia","Yedda","Yetta","Yuri","Yvette","Yvonne","Zara","Zenobia","Zoe","Zona","Zanna","Zora"],o=function(){return localStorage.userInfo?JSON.parse(localStorage.userInfo):null},r=function(e){localStorage.setItem("userInfo",JSON.stringify(e))},i=function(){localStorage.removeItem("userInfo")},s=function(){return localStorage.userList?JSON.parse(localStorage.userList):null},c=function(e){var t=localStorage.userList?JSON.parse(localStorage.userList):[],n=t.find((function(t){return e.userID===t.userID}));!n&&t.push(e),localStorage.setItem("userList",JSON.stringify(t))},u=function(){return a[Math.floor(Math.random()*a.length)]},l=function(e){var t=s(),n=u(),a={userName:""};return(e.length>=6||e.length<=12)&&t&&t.some((function(t){return t.userID===e}))?a.userName=t.filter((function(t){return t.userID===e}))[0].userName:a.userName=n,a},p=function(e){var t=e.charCodeAt(0)%9;return"https://storage.zego.im/IMKit/avatar/avatar-".concat(t,".png")}},f377:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var a,o,r=n("6e72"),i=n.n(r);(function(e){e[e["Web"]=0]="Web"})(a||(a={})),t["c"]=i.a,function(e){e[e["ZIMKitConversationTypePeer"]=0]="ZIMKitConversationTypePeer",e[e["ZIMKitConversationTypeGroup"]=2]="ZIMKitConversationTypeGroup"}(o||(o={}))},f527:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("cf8b");function o(e,t){if(0===e)return"--";var n=new Date(e),o=new Date((new Date).toDateString()),r={1:a["a"].t("common_monday"),2:a["a"].t("common_tuesday"),3:a["a"].t("common_wednesday"),4:a["a"].t("common_thursday"),5:a["a"].t("common_friday"),6:a["a"].t("common_saturday"),0:a["a"].t("common_sunday")},i=String(n.getFullYear()),s=String(n.getMonth()+1);s.length<1&&(s="0".concat(s));var c=String(n.getDate());1===c.length&&(c="0".concat(c));var u=String(n.getHours());1===u.length&&(u="0".concat(u));var l=String(n.getMinutes());1===l.length&&(l="0".concat(l));var p,g=String(n.getSeconds());if(1===g.length&&(g="0".concat(g)),n.getFullYear()!==o.getFullYear())p=t?"yyyy-MM-dd hh:mm".replace(/yyyy/g,i).replace(/MM/g,s).replace(/dd/g,c).replace(/hh/g,u).replace(/mm/g,l):"yyyy-MM-dd".replace(/yyyy/g,i).replace(/MM/g,s).replace(/dd/g,c);else{var d=o.getTime()-5184e5;if(e<d)p=t?"MM-dd hh:mm".replace(/MM/g,s).replace(/dd/g,c).replace(/hh/g,u).replace(/mm/g,l):"MM-dd".replace(/MM/g,s).replace(/dd/g,c);else{var f=o.getTime()-864e5;p=e<f?t?r[n.getDay()]+" "+"hh:mm".replace(/hh/g,u).replace(/mm/g,l):r[n.getDay()]:e<o.getTime()?t?a["a"].t("common_yesterday")+" "+"hh:mm".replace(/hh/g,u).replace(/mm/g,l):a["a"].t("common_yesterday"):"hh:mm".replace(/hh/g,u).replace(/mm/g,l)}}return p}},f87a:function(e,t,n){"use strict";n("d9e2"),n("14d9");var a=n("0a03"),o=n("f377"),r=function(){function e(e){this.platform=e}return e}(),i=function(){function e(){}return e}(),s=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.create=function(e){return t.instance||(t.instance=o["c"].create(e)),t.instance},t.getInstance=function(){return t.instance},t.prototype.on=function(e,n){return t.instance.on(e,n)},t.prototype.off=function(e){return t.instance.off(e)},t.prototype.login=function(e,n){return t.instance.login(e,n)},t.prototype.logout=function(){return t.instance.logout()},t.prototype.destroy=function(){return t.instance.destroy()},t.prototype.renewToken=function(e){return t.instance.renewToken(e)},t.prototype.queryConversationList=function(e){return t.instance.queryConversationList(e)},t.prototype.createGroup=function(e,n,a){return t.instance.createGroup(e,n,a)},t.prototype.sendPeerMessage=function(e,n,a){return t.instance.sendPeerMessage(e,n,a)},t.prototype.sendGroupMessage=function(e,n,a){return t.instance.sendGroupMessage(e,n,a)},t.prototype.sendMediaMessage=function(e,n,a,o,r){return t.instance.sendMediaMessage(e,n,a,o,r)},t.prototype.queryHistoryMessage=function(e,n,a){return t.instance.queryHistoryMessage(e,n,a)},t.prototype.deleteMessages=function(e,n,a,o){return t.instance.deleteMessages(e,n,a,o)},t.prototype.deleteConversation=function(e,n,a){return t.instance.deleteConversation(e,n,a)},t.prototype.clearConversationUnreadMessageCount=function(e,n){return t.instance.clearConversationUnreadMessageCount(e,n)},t.prototype.queryGroupList=function(){return t.instance.queryGroupList()},t.prototype.queryGroupInfo=function(e){return t.instance.queryGroupInfo(e)},t.prototype.queryGroupMemberList=function(e,n){return t.instance.queryGroupMemberList(e,n)},t.prototype.joinGroup=function(e){return t.instance.joinGroup(e)},t.prototype.leaveGroup=function(e){return t.instance.leaveGroup(e)},t.prototype.uploadLog=function(){return t.instance.uploadLog()},t.prototype.updateUserAvatarUrl=function(e){return t.instance.updateUserAvatarUrl(e)},t.prototype.queryUsersInfo=function(e,n){return t.instance.queryUsersInfo(e,n)},t}(i),u=window.process&&Object({NODE_ENV:"production",BASE_URL:""}).PLATFORM||"web",l=function(){function e(){}return e.initPlatform=function(){return"web"===u?(e.zimPlatformManage=new r(o["b"].Web),e.zimModule=c,Promise.resolve()):Promise.resolve()},e.getInstance=function(){return e.zimModule.getInstance()},e.create=function(t){return e.zimModule.create(t)},e.prototype.on=function(t,n){return e.getInstance().on(t,n)},e.prototype.off=function(t){return e.getInstance().off(t)},e.prototype.login=function(t,n){return e.getInstance().login(t,n)},e.prototype.logout=function(){return e.getInstance().logout()},e.prototype.destroy=function(){return e.getInstance().destroy()},e.prototype.renewToken=function(t){return e.getInstance().renewToken(t)},e.prototype.queryConversationList=function(t){return e.getInstance().queryConversationList(t)},e.prototype.createGroup=function(t,n,a){return e.getInstance().createGroup(t,n,a)},e.prototype.sendPeerMessage=function(t,n,a){return e.getInstance().sendPeerMessage(t,n,a)},e.prototype.sendGroupMessage=function(t,n,a){return e.getInstance().sendGroupMessage(t,n,a)},e.prototype.sendMediaMessage=function(t,n,a,o,r){return e.getInstance().sendMediaMessage(t,n,a,o,r)},e.prototype.queryHistoryMessage=function(t,n,a){return e.getInstance().queryHistoryMessage(t,n,a)},e.prototype.deleteMessages=function(t,n,a,o){return e.getInstance().deleteMessages(t,n,a,o)},e.prototype.deleteConversation=function(t,n,a){return e.getInstance().deleteConversation(t,n,a)},e.prototype.clearConversationUnreadMessageCount=function(t,n){return e.getInstance().clearConversationUnreadMessageCount(t,n)},e.prototype.queryGroupList=function(){return e.getInstance().queryGroupList()},e.prototype.queryGroupInfo=function(t){return e.getInstance().queryGroupInfo(t)},e.prototype.queryGroupMemberList=function(t,n){return e.getInstance().queryGroupMemberList(t,n)},e.prototype.joinGroup=function(t){return e.getInstance().joinGroup(t)},e.prototype.leaveGroup=function(t){return e.getInstance().leaveGroup(t)},e.prototype.uploadLog=function(){return e.getInstance().uploadLog()},e.prototype.updateUserAvatarUrl=function(t){return e.getInstance().updateUserAvatarUrl(t)},e.prototype.queryUsersInfo=function(t,n){return e.getInstance().queryUsersInfo(t,n)},e}(),p=n("1e09"),g=(n("907a"),n("986a"),n("1d02"),n("3c5d"),n("b7ef"),n("3452")),d=n.n(g);function f(e,t,n){if(!e)return"";var a=Date.now()/1e3|0,o={app_id:n.appID,user_id:e,nonce:2147483647*Math.random()|0,ctime:a,expire:a+(t||7200)},r=d.a.enc.Utf8.parse(n.serverSecret),i=Math.random().toString().substring(2,18);i.length<16&&(i+=i.substring(0,16-i.length));var s=d.a.AES.encrypt(JSON.stringify(o),r,{iv:d.a.enc.Utf8.parse(i)}).toString(),c=Uint8Array.from(Array.from(atob(s)).map((function(e){return e.charCodeAt(0)}))),u=c.length,l=new Uint8Array(28+u);l.set([0,0,0,0]),l.set(new Uint8Array(Int32Array.from([o.expire]).buffer).reverse(),4),l[8]=i.length>>8,l[9]=i.length-(l[8]<<8),l.set(Uint8Array.from(Array.from(i).map((function(e){return e.charCodeAt(0)}))),10),l[26]=u>>8,l[27]=u-(l[26]<<8),l.set(c,28);var p="04".concat(btoa(String.fromCharCode.apply(String,Array.from(l))));return p}var h,m=n("9f8e"),v=function(e,t,n,a){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function i(e){try{c(a.next(e))}catch(t){r(t)}}function s(e){try{c(a["throw"](e))}catch(t){r(t)}}function c(e){e.done?n(e.value):o(e.value).then(i,s)}c((a=a.apply(e,t||[])).next())}))},y=function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return c([e,t])}}function c(r){if(n)throw new TypeError("Generator is already executing.");while(i)try{if(n=1,a&&(o=2&r[0]?a["return"]:r[0]?a["throw"]||((o=a["return"])&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(o=i.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(s){r=[6,s],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};(function(e){e[e["online"]=1]="online",e[e["offline"]=0]="offline"})(h||(h={}));var _=function(){function e(){return this.userInfo={},this.isLoggedIn=0,this.token="",this.networkStatus=h.online,0===Object.keys(e.instance).length&&(e.instance=this),e.instance}return e.getInstance=function(){return 0===Object.keys(e.instance).length&&(e.instance=new e),e.instance},e.prototype.init=function(e){return v(this,void 0,void 0,(function(){var t=this;return y(this,(function(n){switch(n.label){case 0:return[4,l.initPlatform()];case 1:return n.sent(),this.zim=l.create(e),window.manager=this,this.zim.on(p["a"].zimError,(function(e,t){a["a"].getInstance().actionListener(p["a"].zimError,t)})),this.zim.on(p["a"].zimConnectionStateChanged,(function(e,n){switch(console.warn("connectionStateChanged",n),n.state){case 0:switch(n.event){case 3:t.userInfo.userID&&t.zim.login(t.userInfo,t.token);break;case 4:t.disconnectUser();break}}a["a"].getInstance().actionListener(p["a"].zimConnectionStateChanged,n)})),this.zim.on(p["a"].zimReceivePeerMessage,(function(e,t){a["a"].getInstance().actionListener(p["a"].zimReceivePeerMessage,t)})),this.zim.on(p["a"].zimReceiveGroupMessage,(function(e,t){a["a"].getInstance().actionListener(p["a"].zimReceiveGroupMessage,t)})),this.zim.on(p["a"].zimConversationTotalUnreadMessageCountUpdated,(function(e,t){a["a"].getInstance().actionListener(p["a"].zimConversationTotalUnreadMessageCountUpdated,t)})),this.zim.on(p["a"].zimConversationChanged,(function(e,t){a["a"].getInstance().actionListener(p["a"].zimConversationChanged,t)})),this.zim.on(p["a"].zimGroupMemberStateChanged,(function(e,t){a["a"].getInstance().actionListener(p["a"].zimGroupMemberStateChanged,t)})),window.addEventListener("offline",(function(){t.networkStatus=h.offline,a["a"].getInstance().actionListener(p["a"].zimKitNetworkChanged,t.networkStatus)})),window.addEventListener("online",(function(){t.networkStatus=h.online,a["a"].getInstance().actionListener(p["a"].zimKitNetworkChanged,t.networkStatus)})),[2]}}))}))},e.prototype.connectUser=function(e,t){var n=this;return this.userInfo=e,this.zim.login(e,t).then((function(){n.token=t,n.isLoggedIn=1,e.userAvatarUrl&&n.updateUserAvatarUrl(e.userAvatarUrl),a["a"].getInstance().actionListener(p["a"].zimKitLoginStateChanged,n.isLoggedIn),a["a"].getInstance().actionListener(p["a"].zimKitLoginUserUpdate,e)}))},e.prototype.updateUserAvatarUrl=function(e){var t=this;return this.zim.updateUserAvatarUrl(e).then((function(e){t.userInfo.userAvatarUrl=e.userAvatarUrl}))},e.prototype.generateKitTokenForTest=function(e,t,n){return f(n,0,{appID:e,serverSecret:t})},e.prototype.createGroup=function(e,t){return m["a"].getInstance().createGroup("",e,t).then((function(e){return e})).catch((function(e){return e}))},e.prototype.joinGroup=function(e){return m["a"].getInstance().joinGroup(e).then((function(e){return e})).catch((function(e){return e}))},e.prototype.disconnectUser=function(){return this.token="",this.isLoggedIn=0,a["a"].getInstance().actionListener(p["a"].zimKitLoginStateChanged,this.isLoggedIn),this.zim.logout()},e.prototype.destroy=function(){this.offEvent(),this.zim.destroy()},e.prototype.on=function(e,t){a["a"].getInstance().addEventListener(e,[t])},e.prototype.off=function(e,t){a["a"].getInstance().removeEventListener(e,[t])},e.prototype.uploadLog=function(){return this.zim.uploadLog()},e.prototype.offEvent=function(){this.zim.off(p["a"].zimError),this.zim.off(p["a"].zimConversationChanged),this.zim.off(p["a"].zimTokenWillExpire),this.zim.off(p["a"].zimReceivePeerMessage),this.zim.off(p["a"].zimReceiveGroupMessage),this.zim.off(p["a"].zimConversationTotalUnreadMessageCountUpdated)},e.instance={},e}();t["a"]=_},f8c7:function(e,t,n){"use strict";n("be6d")},fa92:function(e,t,n){"use strict";n("eca1")}});