(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(46),o=n.n(i),s=n(23),c=n(14),u=n(32),l=Object(u.b)({name:"AUTH",initialState:{isInit:!1,isLoggedIn:!1},reducers:{initIMKitSDK:function(e,t){e.isInit=t.payload},login:function(e,t){e.isLoggedIn=!0},logout:function(e,t){e.isLoggedIn=!1}}}),h=l.actions,d=h.initIMKitSDK,v=h.login,m=h.logout,g=function(e){return{isInit:e.isInit,isLoggedIn:e.isLoggedIn}},p=l.reducer,f=Object(u.a)({reducer:p}),y=(c.d,n(67),n(49)),C=n(2),b=n(3),_=n(7),I=n(9),D=n(5),L=n(4),k=n(25),E=n(1),O=["Ada","Aaliyah","Aditi","Adela","Adelaide","Adele","Adora","Afra","Agatha","Agnes","Alani","Alberta","Alice","Alma","Althea","Alva","Alexandra","Alisa","Alison","Alyssa","Amanda","Amelia","Amity","Anila","Amy","Andrea","Angela","Ann","Anna","Annabelle","Antonia","Apphia","April","Arabela","Arlene","Ashley","Astrid","Atalanta","Athena","Audrey","Aurora","Ava","Barbara","Basia","Bblythe","Beatrice","Belen","Bella","Belle","Belinda","Bernice","Bertha","Beryl","Bess","Betsy","Betty","Beulah","Beverly","Blanche","Bonnie","Breenda","Brianna","Bridget","Brook","Calista","Camille","Candice","Candance","Carol","Cara","Caroline","Carlin","Caitlin","Catherine","Cathy","Cecilia","Celeste","Charlotte","Chaya","Cheryl","Cherry","Cheryl","Chloe","Christine","Clara","Claire","Clara","Clementine","Constance","Cora","Coral","Cornelia","Crystal","Cynthia","Daisy","Dale","Dana","Damla","Daphne","Darlene","Dawn","Debby","Deborah","Deirdre","Delia","Denise","Destiny","Diana","Dinah","Dolores","Dominic","Donna","Doreen","Dora","Doris","Dorothy","Eartha","Eden","Edith","Edwina","Eileen","Elaine","Eleanore","Elizabeth","Ella","Ellen","Elma","Elsa","Elsie","Elvira","Elva","Emily","Emma","Enid","Erin","Erica","Esther","Ethel","Eudora","Eunice","Evangeline","Eve","Evelyn","Faithe","Faith","Fanny","Fay","Flora","Florence","Frances","Freda","Frederica","Gabrielle","Gail","Gemma","Genevieve","Georgia","Geraldine","Gill","Gina","Giselle","Gladys","Gloria","Grace","Griselda","Gustave","Gwendolyn","Hannah","Harriet","Hazel","Heather","Hedda","Hedwig","Hedy","Helen","Heloise","Hermosa","Hilda","Hilary","Honey","Hulda","Ida","Ina","Ingrid","Irene","Iris","Irma","Isabel","Ivy","Jacqueline","Jade","Jamie","Jane","Janet","Janice","Jean","Jennifer","Jenny","Jessie","Jessica","Jill","Jo","Joa","Joanna","Joanne","Jocelyn","Jodie","Jolie","Josephine","Joy","Joyce","Judith","Judy","Julia","Julie","Juliet","June","Kama","Karen","Kate","Katherine","Kay","Kelly","Kimberley","Kitty","Kristin","Lara","Laura","Laurel","Lauren","Lee","Leila","Lena","Leona","Lesley","Letitia","Lila","Lilith","Lillian","Linda","Lindsay","Lisa","Liz","Lola","Lorraine","Louise","Lucy","Lyuba","Lydia","Lynn","Mabel","Madge","Madeline","Maggie","Mamie","Mandy","Marcia","Margaret","Marguerite","Maria","Marina","Marian","Marjorie","Martina","Martha","Mary","Maud","Maureen","Mavis","Maxine","Mag","May","Megan","Melissa","Meroy","Meredith","Merry","Michelle","Michaelia","Mignon","Mildred","Miranda","Mirabelle","Miriam","Modesty","Moira","Molly","Mona","Monica","Muriel","Murray","Myra","Myrna","Nancy","Naomi","Natalie","Natividad","Nelly","Nicole","Nicola","Nina","Nora","Norma","Novia","Nydia","Octavia","Odelia","Odelette","Olga","Olive","Olivia","Ophelia","Pag","Page","Pamela","Pandora","Patricia","Paula","Pearl","Penny","Penelope","Philipppa","Phoebe","Phoenix","Phyllis","Polly","Poppy","Prima","Priscilla","Prudence","Queena","Quanna","Quintina","Rachel","Rae","Rebecca","Regina","Renee","Renata","Rita","Riva","Roberta","Rose","Rosalind","Rosemary","Roxanne","Ruby","Ruth","Sabina","Sabrina","Sally","Salome","Samantha","Sandra","Sandy","Sara","Sarah","Sebastiane","Selena","Sharon","Sherry","Sheila","Shirley","Sibyl","Sigrid","Simona","Sophia","Spring","Stacey","Setlla","Stephanie","Susan","Susie","Susanna","Suzanne","Sylvia","Tara","Tabitha","Tammy","Teresa","Tess","Thera","Theresa","Tiffany","Tina","Tobey","Tracy","Trista","Truda","Ula","Una","Ursula","Valerie","Vanessa","Venus","Vera","Verna","Vicky","Victoria","Viola","Violet","Virginia","Vivien","Wallis","Wanda","Wendy","Winni","Winifred","Xanthe","Xaviera","Xenia","Xylia","Yedda","Yetta","Yuri","Yvette","Yvonne","Zara","Zenobia","Zoe","Zona","Zanna","Zora"],M=function(){return localStorage.userInfo?JSON.parse(localStorage.userInfo):null},N=function(e){var t=localStorage.userList?JSON.parse(localStorage.userList):null,n=O[Math.floor(Math.random()*O.length)],a={userName:"",verify:!0};return e.length>=6&&e.length<=12?t&&t.some(function(t){return t.userID===e})?a.userName=t.filter(function(t){return t.userID===e})[0].userName:a.userName=n:(a.verify=!1,a.userName=n),a},j=n(33),w=n(34),U=n.n(w);function S(e,t,n){if(!e)return"";console.log("===appid",n);var a=Date.now()/1e3|0,r={app_id:n.appID,user_id:e,nonce:2147483647*Math.random()|0,ctime:a,expire:a+(t||7200)},i=U.a.enc.Utf8.parse(n.serverSecret),o=Math.random().toString().substring(2,18);o.length<16&&(o+=o.substring(0,16-o.length));var s=U.a.AES.encrypt(JSON.stringify(r),i,{iv:U.a.enc.Utf8.parse(o)}).toString(),c=Uint8Array.from(Array.from(atob(s)).map(function(e){return e.charCodeAt(0)})),u=c.length,l=new Uint8Array(28+u);l.set([0,0,0,0]),l.set(new Uint8Array(Int32Array.from([r.expire]).buffer).reverse(),4),l[8]=o.length>>8,l[9]=o.length-(l[8]<<8),l.set(Uint8Array.from(Array.from(o).map(function(e){return e.charCodeAt(0)})),10),l[26]=u>>8,l[27]=u-(l[26]<<8),l.set(c,28);var h="04".concat(btoa(String.fromCharCode.apply(String,Object(j.a)(Array.from(l)))));return console.log("generateToken",o.length,r,h),h}var x,G={appID:2031514356,serverSecret:"6e46fa37db195c449155c9fbfded9c4b"},z=n(45),T=Object(b.a)(function e(t){Object(C.a)(this,e),this.platform=t}),H=Object({NODE_ENV:"production",PUBLIC_URL:"."}).PLATFORM||"web",R=function(){function e(){Object(C.a)(this,e)}return Object(b.a)(e,[{key:"on",value:function(t,n){return e.getInstance().on(t,n)}},{key:"off",value:function(t){return e.getInstance().off(t)}},{key:"login",value:function(t,n){return e.getInstance().login(t,n)}},{key:"logout",value:function(){return e.getInstance().logout()}},{key:"destroy",value:function(){return e.getInstance().destroy()}},{key:"renewToken",value:function(t){return e.getInstance().renewToken(t)}},{key:"queryConversationList",value:function(t){return e.getInstance().queryConversationList(t)}},{key:"createGroup",value:function(t,n,a){return e.getInstance().createGroup(t,n,a)}},{key:"sendPeerMessage",value:function(t,n,a){return e.getInstance().sendPeerMessage(t,n,a)}},{key:"sendGroupMessage",value:function(t,n,a){return e.getInstance().sendGroupMessage(t,n,a)}},{key:"queryHistoryMessage",value:function(t,n,a){return e.getInstance().queryHistoryMessage(t,n,a)}},{key:"deleteConversation",value:function(t,n,a){return e.getInstance().deleteConversation(t,n,a)}},{key:"clearConversationUnreadMessageCount",value:function(t,n){return e.getInstance().clearConversationUnreadMessageCount(t,n)}},{key:"queryGroupInfo",value:function(t){return e.getInstance().queryGroupInfo(t)}},{key:"queryGroupMemberList",value:function(t,n){return e.getInstance().queryGroupMemberList(t,n)}},{key:"joinGroup",value:function(t){return e.getInstance().joinGroup(t)}},{key:"leaveGroup",value:function(t){return e.getInstance().leaveGroup(t)}}],[{key:"initPlatform",value:function(){return"web"===H?(e.zimPlatformManage=new T(z.b.Web),n.e(3).then(n.bind(null,110)).then(function(t){e.zimModule=t.ZIMWeb})):Promise.resolve()}},{key:"getInstance",value:function(){return e.zimModule.getInstance()}},{key:"create",value:function(t){return e.zimModule.create(t)}}]),e}(),K=n(8);!function(e){e.zimError="error",e.zimConnectionStateChanged="connectionStateChanged",e.zimTokenWillExpire="tokenWillExpire",e.zimReceivePeerMessage="receivePeerMessage",e.zimReceiveGroupMessage="receiveGroupMessage",e.zimConversationTotalUnreadMessageCountUpdated="conversationTotalUnreadMessageCountUpdated",e.zimConversationChanged="conversationChanged",e.zimKitIsLoggedIn="isLoggedIn",e.zimKitLoginUserUpdate="loginUserUpdate",e.zimKitDeleteConversation="deleteConversation",e.zimKitCurrentConversationUpdate="currentConversationUpdate",e.zimKitConversationListUpdate="conversationListUpdate",e.zimKitConversationListQueryAbnormally="conversationListQueryAbnormally",e.zimKitCreateGroup="createGroup",e.zimKitCurrentChatUpdated="currentChatUpdated",e.zimKitCurrentMessageListUpdated="messageListUpdated",e.zimKitCurrentGroupInfoUpdated="currentGroupInfoUpdated"}(x||(x={}));var P=function(){function e(){var t;return Object(C.a)(this,e),this.eventList=(t={},Object(K.a)(t,x.zimError,[]),Object(K.a)(t,x.zimConnectionStateChanged,[]),Object(K.a)(t,x.zimTokenWillExpire,[]),Object(K.a)(t,x.zimReceivePeerMessage,[]),Object(K.a)(t,x.zimReceiveGroupMessage,[]),Object(K.a)(t,x.zimConversationTotalUnreadMessageCountUpdated,[]),Object(K.a)(t,x.zimConversationChanged,[]),Object(K.a)(t,x.zimKitIsLoggedIn,[]),Object(K.a)(t,x.zimKitLoginUserUpdate,[]),Object(K.a)(t,x.zimKitDeleteConversation,[]),Object(K.a)(t,x.zimKitConversationListUpdate,[]),Object(K.a)(t,x.zimKitCurrentConversationUpdate,[]),Object(K.a)(t,x.zimKitConversationListQueryAbnormally,[]),Object(K.a)(t,x.zimKitCreateGroup,[]),Object(K.a)(t,x.zimKitCurrentChatUpdated,[]),Object(K.a)(t,x.zimKitCurrentMessageListUpdated,[]),Object(K.a)(t,x.zimKitCurrentGroupInfoUpdated,[]),t),e.instance||(e.instance=this),e.instance}return Object(b.a)(e,[{key:"addEventListener",value:function(e,t){var n=this;return!!this.eventList[e]&&(!!Array.isArray(t)&&(t.forEach(function(t){!n.eventList[e].includes(t)&&n.eventList[e].push(t)}),!0))}},{key:"removeEventListener",value:function(e,t){if(!this.eventList[e])return!1;var n=this.eventList[e];return t&&t.length?t.forEach(function(e){n.splice(n.indexOf(e),1)}):this.eventList[e]=[],!0}},{key:"actionListener",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.eventList[e]&&this.eventList[e].forEach(function(e){e.apply(void 0,n)})}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),A=n(54),B=n(108),J={common_yesterday:"\u6628\u5929",common_user_kick_out:"\u91cd\u590d\u767b\u5f55\uff0c\u7528\u6237\u88ab\u8e22\u51fa",common_monday:"\u5468\u4e00",common_tuesday:"\u5468\u4e8c",common_wednesday:"\u5468\u4e09",common_thursday:"\u5468\u56db",common_friday:"\u5468\u4e94",common_saturday:"\u5468\u516d",common_sunday:"\u5468\u65e5",common_logout:"\u9000\u51fa",common_return:"\u8fd4\u56de",conversation_start_chat_w:"\u53d1\u8d77\u804a\u5929",conversation_empty:"\u6682\u65e0\u6d88\u606f\n\u5feb\u53bb\u53d1\u8d77\u804a\u5929\u5427",conversation_start_single_chat:"\u53d1\u8d77\u5355\u804a",conversation_start_group_chat:"\u53d1\u8d77\u7fa4\u804a",conversation_join_group_chat:"\u52a0\u5165\u7fa4\u804a",conversation_cancel:"\u53d6\u6d88",conversation_delete:"\u5220\u9664",conversation_message_total_count:"\u6d88\u606f\u603b\u6570",conversation_reload:"\u91cd\u65b0\u52a0\u8f7d",conversation_enter_touserid_w:"\u8bf7\u8f93\u5165\u5bf9\u65b9\u7528\u6237ID",conversation_close_chat_w:"\u5173\u95ed\u804a\u5929",demo_login_hint:"\u8f93\u5165\u7528\u6237id",demo_login:"\u767b\u5f55",demo_user_name:"\u7528\u6237\u540d\u4e3a:%s",demo_user_name_w:"\u968f\u673a\u7528\u6237\u6635\u79f0",demo_welcome:"\u60a8\u597d\uff0c\n\u6b22\u8fce\u4f7f\u7528 Zego IM",demo_input_user_id_error_tips:"\u8bf7\u8f93\u51656\u201312\u4f4d\u82f1\u6587\u6216\u6570\u5b57\u7684\u7528\u6237ID",demo_input_placeholder_w:"\u8bf7\u8f93\u51656\u201312\u4f4d\u82f1\u6587\u6216\u6570\u5b57\u7684\u7528\u6237ID",demo_user_id_login:"\u7528\u6237ID\u767b\u5f55",group_create_chat:"\u53d1\u8d77\u4f1a\u8bdd",group_input_group_id:"\u8f93\u5165\u7fa4ID",group_input_group_id_w:"\u8f93\u5165\u7fa4\u804aID",group_input_group_name:"\u8f93\u5165\u7fa4\u804a\u540d\u79f0",group_input_user_id_of_group:"\u8f93\u5165\u7fa4\u6210\u5458\u7684\u7528\u6237ID\uff0c';'\u82f1\u6587\u5206\u53f7\u9694\u5f00",group_input_user_id_of_group_w:"\u8f93\u5165\u7fa4\u6210\u5458\u7684\u7528\u6237ID\uff0c';'\u82f1\u6587\u5206\u53f7\u9694\u5f00",group_user_id_cant_null:"\u7528\u6237id\u4e0d\u80fd\u4e3a\u7a7a",group_create_group_chat_title:"\u53d1\u8d77\u7fa4\u804a\u4f1a\u8bdd",group_join_group_chat:"\u52a0\u5165\u7fa4\u804a\u4f1a\u8bdd",group_user_not_exit:"\u7528\u6237\u4e0d\u5b58\u5728",group_group_not_exit:"\u7fa4\u4e0d\u5b58\u5728",group_group_user_id_not_exit:"\u7fa4\u6210\u5458\u7528\u6237ID %s \u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de",group_group_user_id_not_exit_w:"\u8bf7\u8fd4\u56de\u4fee\u6539",group_group_id_not_exit:"\u7fa4ID %s \u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de",group_group_id_not_exit_w:"\u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de\u4fee\u6539",group_input_user_id_error_tip:"\u8bf7\u8f93\u51656\u201312\u4f4d\u82f1\u6587\u6216\u6570\u5b57\u7684\u7528\u6237ID",group_group_id:"\u7fa4\u804aID",group_copy:"\u590d\u5236",group_copy_success:"\u590d\u5236\u6210\u529f",message_input_new_message:"\u8f93\u5165\u65b0\u6d88\u606f",message_user_not_exit_please_again:"\u7528\u6237ID:%s\u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de\u91cd\u65b0\u6dfb\u52a0",message_user_not_exit_please_again_w_1:"\u7528\u6237ID",message_user_not_exit_please_again_w_2:"\u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de\u91cd\u65b0\u6dfb\u52a0",message_cant_send_empty_msg:"\u4e0d\u5141\u8bb8\u53d1\u9001\u7a7a\u767d\u6d88\u606f",message_create_chat:"\u53d1\u8d77\u4f1a\u8bdd",message_input_user_id_error_tips:"\u8bf7\u8f93\u51656\u201312\u4f4d\u82f1\u6587\u6216\u6570\u5b57\u7684\u7528\u6237ID",message_create_single_chat:"\u53d1\u8d77\u5355\u804a\u4f1a\u8bdd",message_send_w:"\u53d1\u9001",message_empty_w:"\u6682\u65f6\u8fd8\u6ca1\u6709\u6536\u5230\u6d88\u606f"},F={common_yesterday:"Yesterday",common_user_kick_out:"The user is kicked out because the ID is reused for login. ",common_monday:"Monday",common_tuesday:"Tuesday",common_wednesday:"Wednesday",common_thursday:"Thursday",common_friday:"Friday",common_saturday:"Saturday",common_sunday:"Sunday",common_logout:"Log out",common_return:"Back",conversation_start_chat_w:"New Chat",conversation_empty:"No chats.\nStart chatting now.",conversation_start_single_chat:"One-on-one chat",conversation_start_group_chat:"Group chat",conversation_join_group_chat:"Join a group",conversation_cancel:"Cancel",conversation_delete:"Delete",conversation_message_total_count:"Chats",conversation_reload:"Reload",conversation_enter_touserid_w:"Enter a user ID",conversation_close_chat_w:"Delete",demo_login_hint:"User ID",demo_login:"Log in",demo_user_name:"Username: %s",demo_user_name_w:"Random nickname",demo_welcome:"Hi, \nwelcome to ZEGOCLOUD \nIn-app Chat.",demo_input_user_id_error_tips:"The userID must be between 6-12 characters using letters and numbers.",demo_input_placeholder_w:"6-12 bit userID, include letters and numbers",demo_user_id_login:"User Login",group_create_chat:"OK",group_input_group_id:"Group ID",group_input_group_id_w:"Group ID",group_input_group_name:"Group name",group_input_user_id_of_group:"Enter the user IDS of the group members, separated by ';'.",group_input_user_id_of_group_w:"Enter the user IDS of the group members, separated by ';'.",group_user_id_cant_null:"User ID is required.",group_create_group_chat_title:"New group chat",group_join_group_chat:"Join a group chat",group_user_not_exit:"The user doesn't exist.",group_group_not_exit:"The group doesn't exist.",group_group_user_id_not_exit:"The user ID (%s) doesn't exist. Please modify and try again.",group_group_user_id_not_exit_w:"Please modify and try again.",group_group_id_not_exit:"The group (%s) doesn't exist. Please try again.",group_group_id_not_exit_w:"It doesn't exist. Please modify and try again.",group_input_user_id_error_tip:"The userID must be between 6-12 characters using letters and numbers.",group_group_id:"Group ID",group_copy:"Copy",group_copy_success:"Copied.",message_input_new_message:"",message_user_not_exit_please_again:"The user ID (%s) doesn't exist. Please try again.",message_user_not_exit_please_again_w_1:"User ID",message_user_not_exit_please_again_w_2:"It doesn't exist. Please try again.",message_cant_send_empty_msg:"Blank messages are not allowed",message_create_chat:"OK",message_input_user_id_error_tips:"The userID must be between 6-12 characters using letters and numbers.",message_create_single_chat:"New 1-on-1 chat",message_send_w:"Send",message_empty_w:"No messages received."},q=function(){function e(){if(Object(C.a)(this,e),this.localesData={en:{},zh:{}},this.i18next=A.a.use(B.a),!e.instance){var t={en:F,zh:J};this.localesData=t,e.instance=this}return e.instance}return Object(b.a)(e,[{key:"init",value:function(){var e={resources:{zh:{translation:this.localesData.zh},en:{translation:this.localesData.en}},fallbackLng:navigator.language,detection:{caches:["localStorage","sessionStorage","cookie"]}};return this.i18next.init(e)}},{key:"provideMessage",value:function(e){return this.localesData.en=Object.assign(Object.assign({},this.localesData.en),e.en),this.localesData.zh=Object.assign(Object.assign({},this.localesData.zh),e.zh),this.localesData}},{key:"getLocalesData",value:function(){return this.localesData}},{key:"getI18next",value:function(){return this.i18next}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"destroy",value:function(){e.instance.localesData={en:{},cn:{}},e.instance=null}}]),e}();q.getInstance().init();var W=function(){function e(){return Object(C.a)(this,e),this.eventHandler=P.getInstance(),this.userInfo={},this.isInit=!1,this.isLoggedIn=!1,e.instance||(e.instance=this),e.instance}return Object(b.a)(e,[{key:"createZIM",value:function(e){var t=this;return this.appConfig=e,R.initPlatform().then(function(){t.zim=R.create(e.appID),t.isInit=!0,t.onEvent(),window.manager=t})}},{key:"loginWithUserInfo",value:function(e,t){var n=this;return this.userInfo=e,this.zim.login(e,t).then(function(){n.token=t,n.isLoggedIn=!0,n.eventHandler.actionListener(x.zimKitLoginUserUpdate,e)})}},{key:"logout",value:function(){return this.isLoggedIn=!1,this.token="",this.zim.logout()}},{key:"destroy",value:function(){this.offEvent(),this.zim.destroy(),this.isInit=!1}},{key:"registerConnectionStateChangedCallback",value:function(e){this.eventHandler.addEventListener(x.zimConnectionStateChanged,[e])}},{key:"onEvent",value:function(){var e=this;this.zim.on(x.zimError,function(t,n){e.eventHandler.actionListener(x.zimError,n)}),this.zim.on(x.zimConnectionStateChanged,function(t,n){0===n.state&&3===n.event&&e.zim.login(e.userInfo,e.token),e.eventHandler.actionListener(x.zimConnectionStateChanged,n)}),this.zim.on(x.zimReceivePeerMessage,function(t,n){e.eventHandler.actionListener(x.zimReceivePeerMessage,n)}),this.zim.on(x.zimReceiveGroupMessage,function(t,n){e.eventHandler.actionListener(x.zimReceiveGroupMessage,n)}),this.zim.on(x.zimConversationTotalUnreadMessageCountUpdated,function(t,n){e.eventHandler.actionListener(x.zimConversationTotalUnreadMessageCountUpdated,n)}),this.zim.on(x.zimConversationChanged,function(t,n){e.eventHandler.actionListener(x.zimConversationChanged,n)})}},{key:"offEvent",value:function(){this.zim.off(x.zimError),this.zim.off(x.zimConversationChanged),this.zim.off(x.zimTokenWillExpire),this.zim.off(x.zimReceivePeerMessage),this.zim.off(x.zimReceiveGroupMessage),this.zim.off(x.zimConversationTotalUnreadMessageCountUpdated)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();n(97);function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(I.a)(this,n)}}var V=q.getInstance().getI18next(),Y=function(e){Object(_.a)(n,e);var t=Z(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).state={userID:"",userName:"",verify:!1},a.getUserName=a.getUserName.bind(Object(E.a)(a)),a.loginFun=a.loginFun.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=N("");this.setState(Object(k.a)({},e)),console.log("i18n",V)}},{key:"getUserName",value:function(e){var t=e.target.value,n=N(t);this.setState(Object(k.a)({userID:t},n))}},{key:"loginFun",value:function(){var e=this,t=S(this.state.userID,0,G),n={userID:this.state.userID,userName:this.state.userName};W.getInstance().loginWithUserInfo(n,t).then(function(){!function(e){localStorage.setItem("userInfo",JSON.stringify(e))}(n),function(e){var t=localStorage.userList?JSON.parse(localStorage.userList):[];!t.find(function(t){return e.userID===t.userID})&&t.push(e),localStorage.setItem("userList",JSON.stringify(t))}(n),e.props.login()}).catch(function(t){e.setState({verify:!1})})}},{key:"render",value:function(){return r.a.createElement("div",{id:"login"},this.props.isLoggedIn&&r.a.createElement(L.a,{to:"/main",replace:!0}),r.a.createElement("div",{className:"login-box"},r.a.createElement("div",{className:"welcome-box"},r.a.createElement("div",{className:"welcome-text"},V.t("demo_welcome"))),r.a.createElement("div",{className:"form ".concat("en"===V.language?"en-form":null)},r.a.createElement("div",{className:"id"},r.a.createElement("div",{className:"label"},V.t("demo_user_id_login")),r.a.createElement("input",{className:"en"===V.language?"en-input":null,placeholder:V.t("demo_input_placeholder_w"),onInput:this.getUserName}),r.a.createElement("div",{className:"login-err-tip",style:{display:!this.state.verify&&this.state.userID?"block":"none"}},V.t("demo_input_user_id_error_tips"))),r.a.createElement("div",{className:"name"},r.a.createElement("div",{className:"label"},V.t("demo_user_name_w")),r.a.createElement("div",{id:"userName"},this.state.userName)),r.a.createElement("button",{className:"login-btn",onClick:this.loginFun,disabled:!this.state.verify},V.t("demo_login")))))}}]),n}(r.a.Component),Q=Object(c.b)(g,function(e){return{login:function(t){return e(v(t))}}})(Y),X=Object(b.a)(function e(t){Object(C.a)(this,e),this.conversationID=t.conversationID,this.conversationName=t.conversationName,this.type=t.type,this.unreadMessageCount=t.unreadMessageCount,this.lastMessage=t.lastMessage,this.orderKey=t.orderKey,this.notificationStatus=t.notificationStatus}),$=function(){function e(){return Object(C.a)(this,e),this.eventHandler=P.getInstance(),this.pagePullCount=100,this.conversationList=[],this.totalUnreadMessageCount=0,this.isAbnormal=!1,this.activeCvID="",this.loadStatus=0,e.instance||(e.instance=this,e.instance.initListenerHandle()),e.instance}return Object(b.a)(e,[{key:"initListenerHandle",value:function(){var e=this;this.eventHandler.addEventListener(x.zimConversationTotalUnreadMessageCountUpdated,[function(t){e.totalUnreadMessageCount=t.totalUnreadMessageCount}]),this.eventHandler.addEventListener(x.zimConversationChanged,[function(t){if(2===e.loadStatus){var n=!1,a=!1;if(t.infoList.forEach(function(t){switch(t.event){case 1:if(e.conversationList.length){var r=!1;e.conversationList.forEach(function(i){i.conversationID===t.conversation.conversationID&&(r=!0,Object.assign(i,t.conversation),e.activeCvID===t.conversation.conversationID&&(a=!0),n=!0)}),r||(e.conversationList.push(t.conversation),n=!0)}else e.conversationList.push(t.conversation),e.activeCvID=t.conversation.conversationID,n=!0,a=!0;break;case 0:var i=e.conversationList.length;n=e.insetConversationList(t.conversation),i||(e.activeCvID=t.conversation.conversationID,a=!0)}}),n&&(e.sortCvListHandle(),e.eventHandler.actionListener(x.zimKitConversationListUpdate,e.conversationList)),a){var r=e.getConversationByID(e.activeCvID);e.eventHandler.actionListener(x.zimKitCurrentConversationUpdate,r),r.unreadMessageCount&&e.clearConversationUnreadMessageCount(r.conversationID,r.type)}}}])}},{key:"loadConversationList",value:function(){var e=this,t={nextConversation:void 0,count:localStorage.count||this.pagePullCount};return 1===this.loadStatus?Promise.reject():(this.loadStatus=1,W.getInstance().zim.queryConversationList(t).then(function(t){if(console.warn("zimkit react loadConversationList",t.conversationList),e.loadStatus=2,e.isAbnormal=!1,e.conversationList.length=0,t.conversationList.forEach(function(t){0!==t.type&&2!==t.type||e.conversationList.push(new X(t))}),e.sortCvListHandle(),e.conversationList.length&&!e.activeCvID){var n=e.conversationList[0];e.activeCvID=n.conversationID,e.clearConversationUnreadMessageCount(n.conversationID,n.type)}e.eventHandler.actionListener(x.zimKitConversationListUpdate,e.conversationList),e.eventHandler.actionListener(x.zimKitCurrentConversationUpdate,e.getConversationByID(e.activeCvID)),e.eventHandler.actionListener(x.zimKitConversationListQueryAbnormally,!1)}).catch(function(t){e.loadStatus=2,e.isAbnormal=!0,e.eventHandler.actionListener(x.zimKitConversationListQueryAbnormally,!0)}))}},{key:"setCurrentConversation",value:function(e){this.activeCvID=e,this.eventHandler.actionListener(x.zimKitCurrentConversationUpdate,this.getConversationByID(e))}},{key:"setTempConversation",value:function(e){this.activeCvID=e.conversationID,this.eventHandler.actionListener(x.zimKitCurrentConversationUpdate,e)}},{key:"loadNextPage",value:function(){var e=this,t={nextConversation:this.conversationList[this.conversationList.length-1],count:this.pagePullCount};W.getInstance().zim.queryConversationList(t).then(function(t){console.warn("zimkit react loadNextPage",t.conversationList),t.conversationList.forEach(function(t){0!==t.type&&2!==t.type||e.conversationList.push(new X(t))}),e.sortCvListHandle(),e.eventHandler.actionListener(x.zimKitConversationListUpdate,e.conversationList)})}},{key:"deleteConversation",value:function(e,t){var n=this;return W.getInstance().zim.deleteConversation(e,t,{isAlsoDeleteServerConversation:!0}).then(function(t){return n.conversationList.forEach(function(e,a){e.conversationID===t.conversationID&&n.conversationList.splice(a,1)}),e===n.activeCvID&&n.conversationList.length&&(n.activeCvID=n.conversationList[0].conversationID,n.eventHandler.actionListener(x.zimKitCurrentConversationUpdate,n.conversationList[0])),n.eventHandler.actionListener(x.zimKitConversationListUpdate,n.conversationList),n.eventHandler.actionListener(x.zimKitDeleteConversation,e),t})}},{key:"removeData",value:function(){}},{key:"clearConversationUnreadMessageCount",value:function(e,t){return W.getInstance().zim.clearConversationUnreadMessageCount(e,t).catch(function(e){console.error(e)})}},{key:"registerIsLoggedInCallback",value:function(e){this.eventHandler.addEventListener(x.zimKitIsLoggedIn,[e])}},{key:"registerCvTotalUnreadMessageCountUpdatedCallback",value:function(e){this.eventHandler.addEventListener(x.zimConversationTotalUnreadMessageCountUpdated,[e])}},{key:"registerCvListUpdatedCallback",value:function(e){this.eventHandler.addEventListener(x.zimKitConversationListUpdate,[e])}},{key:"registerAbnormalCallback",value:function(e){this.eventHandler.addEventListener(x.zimKitConversationListQueryAbnormally,[e])}},{key:"registerCurrentCvUpdatedCallback",value:function(e){this.eventHandler.addEventListener(x.zimKitCurrentConversationUpdate,[e])}},{key:"unInit",value:function(){this.conversationList.length=0,this.totalUnreadMessageCount=0,this.isAbnormal=!1,this.activeCvID="",this.loadStatus=0}},{key:"getConversationByID",value:function(e){return this.conversationList.filter(function(t){return t.conversationID===e})[0]}},{key:"insetConversationList",value:function(e){var t=!1;return void 0===this.conversationList.find(function(t){return e.conversationID===t.conversationID})&&(this.conversationList.push(e),t=!0),t}},{key:"sortCvListHandle",value:function(){this.conversationList.sort(function(e,t){return t.orderKey-e.orderKey})}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),ee=function(){function e(){return Object(C.a)(this,e),this.eventHandler=P.getInstance(),this.memberList=[],e.instance||(e.instance=this,e.instance.initListenerHandle()),e.instance}return Object(b.a)(e,[{key:"initListenerHandle",value:function(){var e=this;this.eventHandler.addEventListener(x.zimKitCreateGroup,[function(){}]),this.eventHandler.addEventListener(x.zimKitCurrentConversationUpdate,[function(t){t&&2===t.type&&(e.currentGroupInfo={baseInfo:{groupID:t.conversationID,groupName:t.conversationName}},e.eventHandler.actionListener(x.zimKitCurrentGroupInfoUpdated,e.currentGroupInfo),e.queryGroupMemberList(t.conversationID))}])}},{key:"createGroup",value:function(e,t,n){var a=this,r={groupID:e,groupName:t};return W.getInstance().zim.createGroup(r,n).then(function(e){return a.currentGroupInfo=e.groupInfo,a.eventHandler.actionListener(x.zimKitCurrentGroupInfoUpdated,a.currentGroupInfo),e})}},{key:"queryGroupMemberList",value:function(e){var t=this;return W.getInstance().zim.queryGroupMemberList(e,{count:100,nextFlag:0}).then(function(e){t.memberList=e.userList})}},{key:"joinGroup",value:function(e){var t=this;return W.getInstance().zim.joinGroup(e).then(function(e){return t.currentGroupInfo=e.groupInfo,t.eventHandler.actionListener(x.zimKitCurrentGroupInfoUpdated,t.currentGroupInfo),e})}},{key:"leaveGroup",value:function(e){return W.getInstance().zim.leaveGroup(e)}},{key:"dismissGroup",value:function(e){}},{key:"inviteUsersJoinGroup",value:function(e,t){}},{key:"kickGroupMembers",value:function(e,t){}},{key:"queryGroupInfo",value:function(e){return W.getInstance().zim.queryGroupInfo(e)}},{key:"unInit",value:function(){this.currentGroupInfo=null,this.memberList.length=0}},{key:"registerCurrentGroupInfoUpdateCallback",value:function(e){this.eventHandler.addEventListener(x.zimKitCurrentGroupInfoUpdated,[e])}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();n(38),n(98);function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(I.a)(this,n)}}var ne=q.getInstance().getI18next(),ae=function(e){Object(_.a)(n,e);var t=te(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).changeNav=a.changeNav.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"changeNav",value:function(){this.props.onNavChange(this.props.item)}},{key:"render",value:function(){return r.a.createElement("div",{className:"title"+(this.props.item.actived?" actived":""),onClick:this.changeNav},this.props.item.text)}}]),n}(r.a.Component),re=function(e){Object(_.a)(n,e);var t=te(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).state={tabList:a.props.tabList.map(function(e,t){return Object(k.a)({},e,{actived:!t})})},a.handleNavChange=a.handleNavChange.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"handleNavChange",value:function(e){this.state.tabList.forEach(function(t){t.actived=t.id===e.id}),this.setState({tabList:this.state.tabList}),this.props.onNavChange(e)}},{key:"render",value:function(){var e=this,t=null;return this.state.tabList&&(t=this.state.tabList.map(function(t){return r.a.createElement(ae,{key:t.id,item:t,onNavChange:e.handleNavChange})})),r.a.createElement("div",{className:"top"},t)}}]),n}(r.a.Component),ie=function(e){Object(_.a)(n,e);var t=te(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).state={peerErrTip:!1,peerDisabled:!0,groupErrTip:!1,groupDisabled:!0,groupID:"",toUserID:"",groupName:"",userIDList:""},a.closeDialog=a.closeDialog.bind(Object(E.a)(a)),a.createPeerChat=a.createPeerChat.bind(Object(E.a)(a)),a.createGroupChat=a.createGroupChat.bind(Object(E.a)(a)),a.joinGroup=a.joinGroup.bind(Object(E.a)(a)),a.handleUserIDInputChange=a.handleUserIDInputChange.bind(Object(E.a)(a)),a.handleGroupUserIDInputChange=a.handleGroupUserIDInputChange.bind(Object(E.a)(a)),a.handleGroupIDInputChange=a.handleGroupIDInputChange.bind(Object(E.a)(a)),a.handleGroupNameInputChange=a.handleGroupNameInputChange.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"closeDialog",value:function(){this.props.onCloseDialog()}},{key:"createPeerChat",value:function(){this.props.onCreatePeerChat(this.state.toUserID)}},{key:"createGroupChat",value:function(){this.props.onCreateGroupChat(this.state.groupName,this.state.userIDList)}},{key:"joinGroup",value:function(){this.props.onJoinGroup(this.state.groupID)}},{key:"handleUserIDInputChange",value:function(e){var t=e.target.value;if(t.length){var n=t.length<6||t.length>12;this.setState({toUserID:t,peerErrTip:n,peerDisabled:n})}else this.setState({toUserID:t,peerErrTip:!1,peerDisabled:!0})}},{key:"handleGroupUserIDInputChange",value:function(e){var t=e.target.value,n=!0,a=!0;if(this.state.groupName.length&&t.length&&(n=!1),t){var r=t.split(";"),i=!1;r.forEach(function(e){(e.length<6||e.length>12)&&(i=!0,n=!0)}),a=i}else a=!1;this.setState({userIDList:t,groupErrTip:a,groupDisabled:n})}},{key:"handleGroupIDInputChange",value:function(e){this.setState({groupID:e.target.value})}},{key:"handleGroupNameInputChange",value:function(e){var t=e.target.value;this.setState({groupName:t,groupDisabled:!(t.length&&this.state.userIDList.length)})}},{key:"render",value:function(){var e=null,t=null,n=this.state,a=n.groupID,i=n.peerDisabled,o=n.groupDisabled,s=n.peerErrTip,c=n.groupErrTip,u=n.toUserID,l=n.userIDList,h=this.props.currentActived;return(s&&u||c&&l)&&(t=r.a.createElement("div",{className:"err-tip"},ne.t("demo_input_user_id_error_tips"))),1===h?e=r.a.createElement("div",{className:"peer",key:"peer"},r.a.createElement("div",{className:"input-box"},r.a.createElement("input",{className:"en"===ne.language?"en-input":null,type:"text",name:"userID",placeholder:ne.t("conversation_enter_touserid_w"),onInput:this.handleUserIDInputChange}),t),r.a.createElement("div",{className:"btn-box"},r.a.createElement("button",{className:"btn cancel-btn",onClick:this.closeDialog},ne.t("conversation_cancel")),r.a.createElement("button",{className:"btn create-peer-btn",onClick:this.createPeerChat,disabled:i},ne.t("conversation_start_single_chat")))):2===h?e=r.a.createElement("div",{className:"group",key:"group"},r.a.createElement("div",{className:"input-box"},r.a.createElement("input",{className:"en"===ne.language?"en-input":null,type:"text",name:"groupName",placeholder:ne.t("group_input_group_name"),onInput:this.handleGroupNameInputChange,maxLength:12}),r.a.createElement("input",{className:"en"===ne.language?"en-input":null,type:"text",name:"userIDList",placeholder:ne.t("group_input_user_id_of_group_w"),onInput:this.handleGroupUserIDInputChange}),t),r.a.createElement("div",{className:"btn-box"},r.a.createElement("button",{className:"btn cancel-btn",onClick:this.closeDialog},ne.t("conversation_cancel")),r.a.createElement("button",{className:"btn create-peer-btn",onClick:this.createGroupChat,disabled:o},ne.t("conversation_start_group_chat")))):3===h&&(e=r.a.createElement("div",{className:"attend",key:"attend"},r.a.createElement("div",{className:"input-box"},r.a.createElement("input",{className:"en"===ne.language?"en-input":null,type:"text",name:"groupID",placeholder:ne.t("group_input_group_id_w"),onInput:this.handleGroupIDInputChange})),r.a.createElement("div",{className:"btn-box"},r.a.createElement("button",{className:"btn cancel-btn",onClick:this.closeDialog},ne.t("conversation_cancel")),r.a.createElement("button",{className:"btn create-peer-btn",onClick:this.joinGroup,disabled:!a},ne.t("conversation_join_group_chat"))))),r.a.createElement("div",{className:"content"},e)}}]),n}(r.a.Component),oe=function(e){Object(_.a)(n,e);var t=te(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).tabList=[{id:1,text:ne.t("conversation_start_single_chat")},{id:2,text:ne.t("conversation_start_group_chat")},{id:3,text:ne.t("conversation_join_group_chat")}],a.state={currentActived:1},a.handleNavChange=a.handleNavChange.bind(Object(E.a)(a)),a.handleCloseDialog=a.handleCloseDialog.bind(Object(E.a)(a)),a.handleJoinGroup=a.handleJoinGroup.bind(Object(E.a)(a)),a.handleCreatePeerChat=a.handleCreatePeerChat.bind(Object(E.a)(a)),a.handleCreateGroupChat=a.handleCreateGroupChat.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"handleNavChange",value:function(e){this.setState({currentActived:e.id})}},{key:"handleCloseDialog",value:function(){this.props.onCloseDialog()}},{key:"handleJoinGroup",value:function(e){this.props.onJoinGroup(e)}},{key:"handleCreatePeerChat",value:function(e){this.props.onCreatePeerChat(e)}},{key:"handleCreateGroupChat",value:function(e,t){this.props.onCreateGroupChat(e,t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"dialog"},r.a.createElement(re,{tabList:this.tabList,onNavChange:this.handleNavChange}),r.a.createElement(ie,{currentActived:this.state.currentActived,onCloseDialog:this.handleCloseDialog,onJoinGroup:this.handleJoinGroup,onCreatePeerChat:this.handleCreatePeerChat,onCreateGroupChat:this.handleCreateGroupChat}))}}]),n}(r.a.Component);n(99);function se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(I.a)(this,n)}}var ce=q.getInstance().getI18next(),ue=function(e){Object(_.a)(n,e);var t=se(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).deleteConversation=a.deleteConversation.bind(Object(E.a)(a)),a.closeConversation=a.closeConversation.bind(Object(E.a)(a)),a.handleClick=a.handleClick.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"handleClick",value:function(e){var t=!1;try{e.path.forEach(function(e){if(e.className&&e.className.includes("right-click-box"))throw t=!0,new Error("break")})}catch(n){}t||this.closeConversation()}},{key:"componentDidMount",value:function(){window.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleClick)}},{key:"deleteConversation",value:function(){this.props.onDeleteConversation()}},{key:"closeConversation",value:function(){this.props.onCloseConversation()}},{key:"render",value:function(){return r.a.createElement("div",{className:"right-click-box",style:{top:"".concat(this.props.y,"px"),left:"".concat(this.props.x,"px")}},r.a.createElement("div",{className:"item",onClick:this.deleteConversation},ce.t("conversation_close_chat_w")))}}]),n}(r.a.Component),le=(n(100),q.getInstance().getI18next());function he(e,t){if(0===e)return"--";var n=new Date(e),a=new Date((new Date).toDateString()),r={1:le.t("common_monday"),2:le.t("common_tuesday"),3:le.t("common_wednesday"),4:le.t("common_thursday"),5:le.t("common_friday"),6:le.t("common_saturday"),0:le.t("common_sunday")},i=String(n.getFullYear()),o=String(n.getMonth()+1);o.length<1&&(o="0".concat(o));var s=String(n.getDate());1===s.length&&(s="0".concat(s));var c=String(n.getHours());1===c.length&&(c="0".concat(c));var u=String(n.getMinutes());1===u.length&&(u="0".concat(u));var l,h=String(n.getSeconds());(1===h.length&&(h="0".concat(h)),n.getFullYear()!==a.getFullYear())?l=t?"yyyy-MM-dd hh:mm".replace(/yyyy/g,i).replace(/MM/g,o).replace(/dd/g,s).replace(/hh/g,c).replace(/mm/g,u):"yyyy-MM-dd".replace(/yyyy/g,i).replace(/MM/g,o).replace(/dd/g,s):l=e<a.getTime()-5184e5?t?"MM-dd hh:mm".replace(/MM/g,o).replace(/dd/g,s).replace(/hh/g,c).replace(/mm/g,u):"MM-dd".replace(/MM/g,o).replace(/dd/g,s):e<a.getTime()-864e5?t?r[n.getDay()]+" "+"hh:mm".replace(/hh/g,c).replace(/mm/g,u):r[n.getDay()]:e<a.getTime()?t?"".concat(le.t("common_yesterday")," ")+"hh:mm".replace(/hh/g,c).replace(/mm/g,u):le.t("common_yesterday"):"hh:mm".replace(/hh/g,c).replace(/mm/g,u);return l}var de,ve=new(n(53).EventEmitter);!function(e){e.ToastOperation="toastOperation",e.DialogOperation="dialogOperation",e.GroupInfoOperation="groupInfoOperation"}(de||(de={}));var me=function(e){ve.emit(de.GroupInfoOperation,e)},ge=function(e,t){ve.emit(de.ToastOperation,e,t)},pe=function(e,t){ve.emit(de.DialogOperation,e,t)},fe=ve;function ye(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(I.a)(this,n)}}var Ce,be=q.getInstance().getI18next(),_e=function(e){Object(_.a)(n,e);var t=ye(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).switchConversation=a.switchConversation.bind(Object(E.a)(a)),a.operationConversation=a.operationConversation.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"switchConversation",value:function(){var e=this.props.conversation;$.getInstance().setCurrentConversation(e.conversationID),$.getInstance().clearConversationUnreadMessageCount(e.conversationID,e.type)}},{key:"operationConversation",value:function(e){e.preventDefault();var t=document.querySelector(".zego-im-container .box");this.props.onRightClick({showRightClickDialog:!0,x:e.clientX-t.offsetLeft,y:e.clientY-t.offsetTop,conversationItem:this.props.conversation})}},{key:"nameFormat",value:function(e){return(e.conversationName||e.conversationID).slice(0,1).toLowerCase()}},{key:"render",value:function(){var e=null,t=this.props.conversation,n=this.props.currentConversation;return t.unreadMessageCount&&(e=r.a.createElement("div",{className:"unread-count"},t.unreadMessageCount>99?"99+":t.unreadMessageCount)),r.a.createElement("div",{className:"conversation-item"+(n&&t.conversationID===n.conversationID?" actived":""),onClick:this.switchConversation,onContextMenu:this.operationConversation},r.a.createElement("div",{className:"head-portrait"},0===t.type?this.nameFormat(t):"G",e),r.a.createElement("div",{className:"conversation-info"},r.a.createElement("div",{className:"info-top"},r.a.createElement("div",{className:"item-name"},t.conversationName||t.conversationID),t.lastMessage?r.a.createElement("div",{className:"item-date"},he(t.lastMessage.timestamp,!1)):null),t.lastMessage?r.a.createElement("div",{className:"item-message"},2===t.lastMessage.sentStatus?r.a.createElement("div",{className:"err-icon"}):null,r.a.createElement("div",{className:"message-text"},t.lastMessage.message)):null))}}]),n}(r.a.Component),Ie=function(e){Object(_.a)(n,e);var t=ye(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).state={isAbnormal:!1,totalUnreadMessageCount:0,conversationList:[],showCreateChatDialog:!1,showRightClickDialog:!1,x:0,y:0,conversationItem:null,currentConversation:null},a.logout=a.logout.bind(Object(E.a)(a)),a.listScroll=a.listScroll.bind(Object(E.a)(a)),a.triggerDialog=a.triggerDialog.bind(Object(E.a)(a)),a.handleRightClick=a.handleRightClick.bind(Object(E.a)(a)),a.handleCloseDialog=a.handleCloseDialog.bind(Object(E.a)(a)),a.handleCreatePeerChat=a.handleCreatePeerChat.bind(Object(E.a)(a)),a.handleCreateGroupChat=a.handleCreateGroupChat.bind(Object(E.a)(a)),a.handleJoinGroup=a.handleJoinGroup.bind(Object(E.a)(a)),a.handleDeleteConversation=a.handleDeleteConversation.bind(Object(E.a)(a)),a.handleCloseConversation=a.handleCloseConversation.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;W.getInstance().isLoggedIn&&$.getInstance().loadConversationList(),$.getInstance().registerIsLoggedInCallback(function(){$.getInstance().loadConversationList()}),$.getInstance().registerCvTotalUnreadMessageCountUpdatedCallback(function(t){e.setState({totalUnreadMessageCount:t.totalUnreadMessageCount})}),$.getInstance().registerCvListUpdatedCallback(function(t){e.setState({conversationList:t})}),$.getInstance().registerCurrentCvUpdatedCallback(function(t){e.setState({currentConversation:t})}),$.getInstance().registerAbnormalCallback(function(t){e.setState({isAbnormal:t})})}},{key:"componentWillUnmount",value:function(){$.getInstance().unInit()}},{key:"listScroll",value:function(){var e=document.querySelector(".conversation-content"),t=Math.round(e.scrollTop);t>=e.scrollHeight-e.clientHeight&&$.getInstance().loadNextPage()}},{key:"triggerDialog",value:function(e){this.setState({showCreateChatDialog:e})}},{key:"handleRightClick",value:function(e){this.setState(e)}},{key:"handleCloseDialog",value:function(){this.triggerDialog(!1)}},{key:"handleCreatePeerChat",value:function(e){var t=this.state.conversationList.filter(function(t){return t.conversationID===e})[0];t?$.getInstance().setCurrentConversation(t.conversationID):$.getInstance().setTempConversation({conversationID:e,conversationName:e,type:0}),this.triggerDialog(!1)}},{key:"handleCreateGroupChat",value:function(e,t){var n=this,a=t.split(";").filter(function(e){return e});ee.getInstance().createGroup("",e,a).then(function(e){var t=e.groupInfo,a=e.errorUserList,r=t.baseInfo;if(a.length){var i=a.map(function(e){return e.userID}).join(" ");pe(!0,{desc:"".concat(be.t("message_user_not_exit_please_again").replace("%s",i)),cancelText:be.t("common_return"),hasCloseBtn:!1})}else n.setState({showCreateChatDialog:!1}),$.getInstance().setTempConversation({conversationID:r.groupID,conversationName:r.groupName,type:2})}).catch(function(){n.setState({showCreateChatDialog:!1})})}},{key:"handleJoinGroup",value:function(e){var t=this;ee.getInstance().joinGroup(e).then(function(e){var n=e.groupInfo.baseInfo;t.setState({showCreateChatDialog:!1}),$.getInstance().setTempConversation({conversationID:n.groupID,conversationName:n.groupName,type:2})}).catch(function(t){switch(t.code){case 6000523:pe(!0,{desc:"".concat(be.t("group_group_id_not_exit").replace("%s",e)),cancelText:be.t("common_return"),hasCloseBtn:!1});break;default:ge(!0,{text:t.message,type:"default"})}})}},{key:"handleDeleteConversation",value:function(){var e=this,t=this.state.conversationItem,n=t.conversationID,a=t.type;$.getInstance().deleteConversation(n,a).then(function(){}).finally(function(){e.setState({showRightClickDialog:!1})})}},{key:"handleCloseConversation",value:function(){this.setState({showRightClickDialog:!1})}},{key:"logout",value:function(){W.getInstance().logout()}},{key:"render",value:function(){var e=this,t=null,n=null,a=null,i=null;return this.state.totalUnreadMessageCount&&(t=r.a.createElement("div",{className:"total"},this.state.totalUnreadMessageCount>99?"99+":this.state.totalUnreadMessageCount)),this.state.showCreateChatDialog&&(n=r.a.createElement(oe,{onCloseDialog:this.handleCloseDialog,onCreatePeerChat:this.handleCreatePeerChat,onCreateGroupChat:this.handleCreateGroupChat,onJoinGroup:this.handleJoinGroup})),this.state.showRightClickDialog&&(a=r.a.createElement(ue,{x:this.state.x,y:this.state.y,onDeleteConversation:this.handleDeleteConversation,onCloseConversation:this.handleCloseConversation})),this.state.conversationList&&this.state.conversationList.length&&(i=this.state.conversationList.map(function(t,n){return r.a.createElement(_e,{key:t.conversationID+n,conversation:t,currentConversation:e.state.currentConversation,onRightClick:e.handleRightClick})})),r.a.createElement("div",{className:"conversation"},r.a.createElement("div",{className:"left-banner"},r.a.createElement("div",{className:"top"},r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"icon message-icon"}),r.a.createElement("div",{className:"text"},be.t("conversation_message_total_count")),t),r.a.createElement("div",{className:"item",onClick:this.triggerDialog.bind(this,!0)},r.a.createElement("div",{className:"icon create-chat-icon"}),r.a.createElement("div",{className:"text create-chat-text"},be.t("conversation_start_chat_w")))),r.a.createElement("div",{className:"item",onClick:this.logout},r.a.createElement("div",{className:"icon exit-icon"}),r.a.createElement("div",{className:"text exit-text"},be.t("common_logout")))),this.state.isAbnormal?r.a.createElement("div",{className:"abnormal-content"},r.a.createElement("div",{className:"btn reload-btn",onClick:$.getInstance().loadConversationList.bind($.getInstance())},be.t("conversation_reload"))):this.state.conversationList.length?r.a.createElement("div",{className:"conversation-content",onScroll:this.listScroll},i):r.a.createElement("div",{className:"default-content"},r.a.createElement("div",{className:"text"},be.t("conversation_empty"))),n,a)}}]),n}(r.a.Component),De=Object(b.a)(function e(t){Object(C.a)(this,e),this.type=t.type,this.messageID=t.messageID,this.timestamp=t.timestamp,this.message=t.message,this.senderUserID=t.senderUserID,this.conversationID=t.conversationID,this.conversationType=t.conversationType,this.direction=t.direction,this.sentStatus=t.sentStatus,this.orderKey=t.orderKey,this.conversationSeq=t.conversationSeq});!function(e){e[e.Tip=99]="Tip"}(Ce||(Ce={}));var Le=q.getInstance().getI18next(),ke=function(){function e(){return Object(C.a)(this,e),this.eventHandler=P.getInstance(),this.messageCount=30,this.messageIndex=31,this.currentChat={},this.currentMessageList=[],e.instance||(e.instance=this,e.instance.initListenerHandle()),e.instance}return Object(b.a)(e,[{key:"initListenerHandle",value:function(){var e=this;this.eventHandler.addEventListener(x.zimReceivePeerMessage,[function(t){e.currentChat.conversationID===t.fromConversationID&&(t.messageList.forEach(function(t){e.currentMessageList.push(new De(t))}),e.eventHandler.actionListener(x.zimKitCurrentMessageListUpdated,e.currentMessageList),e.eventHandler.actionListener(x.zimKitCurrentChatUpdated,e.currentChat))}]),this.eventHandler.addEventListener(x.zimReceiveGroupMessage,[function(t){e.currentChat.conversationID===t.fromConversationID&&(t.messageList.forEach(function(t){e.currentMessageList.push(new De(t))}),e.eventHandler.actionListener(x.zimKitCurrentMessageListUpdated,e.currentMessageList),e.eventHandler.actionListener(x.zimKitCurrentChatUpdated,e.currentChat))}]),this.eventHandler.addEventListener(x.zimKitDeleteConversation,[function(t){t===e.currentChat.conversationID&&(e.currentMessageList=[],e.currentChat={},e.eventHandler.actionListener(x.zimKitCurrentMessageListUpdated,e.currentMessageList),e.eventHandler.actionListener(x.zimKitCurrentChatUpdated,e.currentChat))}]),this.eventHandler.addEventListener(x.zimKitCurrentConversationUpdate,[function(t){!t||e.currentChat.conversationID&&t.conversationID===e.currentChat.conversationID||(e.currentChat=t,e.messageCount=30,e.currentMessageList.length=0,console.time(),e.queryHistoryMessage(e.currentChat.conversationID,e.currentChat.type),e.eventHandler.actionListener(x.zimKitCurrentChatUpdated,e.currentChat))}])}},{key:"queryHistoryMessage",value:function(e,t){var n=this,a={nextMessage:void 0,count:this.messageCount,reverse:!0};return W.getInstance().zim.queryHistoryMessage(e,t,a).then(function(e){console.timeEnd(),n.currentMessageList=[],e.messageList.length&&e.messageList.forEach(function(e){n.currentMessageList.push(new De(e))}),n.eventHandler.actionListener(x.zimKitCurrentMessageListUpdated,n.currentMessageList)})}},{key:"clearCurrentMessageList",value:function(){this.currentMessageList=[],this.eventHandler.actionListener(x.zimKitCurrentMessageListUpdated,this.currentMessageList)}},{key:"sendPeerMessage",value:function(e){var t=this;return W.getInstance().zim.sendPeerMessage(e,this.currentChat.conversationID,{priority:1}).then(function(e){t.currentMessageList.push(new De(e.message))}).catch(function(n){var a={type:1,messageID:String((new Date).getTime()),message:e.message,timestamp:(new Date).getTime(),senderUserID:W.getInstance().userInfo.userID,conversationID:"",conversationType:0,direction:0,sentStatus:2,orderKey:0,conversationSeq:0};switch(t.currentMessageList.push(new De(a)),n.code){case 6000204:var r={type:99,messageID:String((new Date).getTime()),message:"".concat(Le.t("message_user_not_exit_please_again").replace("%s",t.currentChat.conversationID)),timestamp:(new Date).getTime(),senderUserID:W.getInstance().userInfo.userID,conversationID:"",conversationType:0,direction:0,sentStatus:2,orderKey:0,conversationSeq:0};t.currentMessageList.push(new De(r))}}).finally(function(){t.eventHandler.actionListener(x.zimKitCurrentChatUpdated,t.currentChat),t.eventHandler.actionListener(x.zimKitCurrentMessageListUpdated,t.currentMessageList)})}},{key:"sendGroupMessage",value:function(e){var t=this;return W.getInstance().zim.sendGroupMessage(e,this.currentChat.conversationID,{priority:1}).then(function(e){t.currentMessageList.push(new De(e.message))}).catch(function(){var n={type:1,messageID:String((new Date).getTime()),message:e.message,timestamp:(new Date).getTime(),senderUserID:W.getInstance().userInfo.userID,conversationID:"",conversationType:0,direction:0,sentStatus:2,orderKey:0,conversationSeq:0};t.currentMessageList.push(new De(n))}).finally(function(){t.eventHandler.actionListener(x.zimKitCurrentChatUpdated,t.currentChat),t.eventHandler.actionListener(x.zimKitCurrentMessageListUpdated,t.currentMessageList)})}},{key:"unInit",value:function(){this.currentChat={},this.currentMessageList.length=0}},{key:"registerLoginUserUpdatedCallback",value:function(e){this.eventHandler.addEventListener(x.zimKitLoginUserUpdate,[e])}},{key:"registerCurrentChatUpdatedCallback",value:function(e){this.eventHandler.addEventListener(x.zimKitCurrentChatUpdated,[e])}},{key:"registerMessageListUpdatedCallback",value:function(e){this.eventHandler.addEventListener(x.zimKitCurrentMessageListUpdated,[e])}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();n(101);function Ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(I.a)(this,n)}}var Oe=q.getInstance().getI18next(),Me=function(e){Object(_.a)(n,e);var t=Ee(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).state={currentChat:null,currentMessageList:[],message:"",oldScrollHeight:0,newScrollHeight:0,userInfo:{}},a.listScroll=a.listScroll.bind(Object(E.a)(a)),a.sendMessage=a.sendMessage.bind(Object(E.a)(a)),a.dateFormat=a.dateFormat.bind(Object(E.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(E.a)(a)),a.getGroupUserName=a.getGroupUserName.bind(Object(E.a)(a)),a.scrollToBottom=a.scrollToBottom.bind(Object(E.a)(a)),a.triggerGroupInfo=a.triggerGroupInfo.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;ke.getInstance().registerLoginUserUpdatedCallback(function(t){e.setState({userInfo:t})}),ke.getInstance().registerCurrentChatUpdatedCallback(function(t){e.setState({currentChat:t,message:""},function(){var e=document.querySelector(".text-area");e&&e.focus()})}),ke.getInstance().registerMessageListUpdatedCallback(function(t){e.setState({currentMessageList:t},function(){e.scrollToBottom()})})}},{key:"componentWillUnmount",value:function(){ke.getInstance().unInit()}},{key:"scrollToBottom",value:function(){var e=document.querySelector(".message-content");if(e){var t=Number(e.scrollHeight)-Number(e.clientHeight);e.scrollTop=t}}},{key:"listScroll",value:function(){var e=this,t=document.querySelector(".message-content");if(t){var n=Math.round(t.scrollTop),a=t.scrollHeight,r=this.state,i=r.currentMessageList,o=r.currentChat;0===n&&ke.getInstance().messageCount<=i.length&&(ke.getInstance().messageCount=i.length+30,ke.getInstance().queryHistoryMessage(o.conversationID,o.type).then(function(){e.setState({oldScrollHeight:a},function(){e.setState({newScrollHeight:t.scrollHeight},function(){t.scrollTop=e.state.newScrollHeight-e.state.oldScrollHeight})})}))}}},{key:"sendMessage",value:function(){var e={type:1,message:this.state.message};2===this.state.currentChat.type?ke.getInstance().sendGroupMessage(e):ke.getInstance().sendPeerMessage(e),this.setState({message:""})}},{key:"getGroupUserName",value:function(e){var t=ee.getInstance().memberList,n=e;if(t.length){var a=t.filter(function(t){return t.userID===e})[0];n=a?a.userName:e}return n}},{key:"dateFormat",value:function(e,t){if(0===t)return he(e.timestamp,!0);var n=this.state.currentMessageList[t-1];return n&&e.timestamp-n.timestamp>3e5?he(e.timestamp,!0):void 0}},{key:"handleInputChange",value:function(e){this.setState({message:e.target.value})}},{key:"triggerGroupInfo",value:function(){me(!0)}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentChat,a=t.currentMessageList,i=W.getInstance().userInfo,o=i.userID,s=i.userName,c=null;if(n&&n.conversationID){var u=n.conversationName,l=n.conversationID,h=n.type;c=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"title"},u||l),2===h?r.a.createElement("div",{className:"more-icon",onClick:this.triggerGroupInfo}):null),r.a.createElement("div",{className:"message-content",onScroll:this.listScroll},a.map(function(t,n){var a=e.dateFormat(t,n),i=(t.conversationType,t.senderUserID!==o),c=99===t.type,l=e.getGroupUserName(t.senderUserID);return r.a.createElement("div",{className:"message-item",key:t.messageID+n},a?r.a.createElement("div",{className:"time-box"},a):null,i?r.a.createElement("div",{className:"left-msg"},r.a.createElement("div",{className:"head-portrait"},2===t.conversationType?l.substr(0,1).toLowerCase():u?u.substr(0,1).toLowerCase():""),r.a.createElement("div",{className:"message-box"},2===t.conversationType?r.a.createElement("div",{className:"send-name"},l):null,r.a.createElement("div",{className:"msg-text"},t.message))):null,c?r.a.createElement("div",{className:"center-msg"},t.message):null,i||c?null:r.a.createElement("div",{className:"right-msg"},99!==t.type&&2===t.sentStatus?r.a.createElement("div",{className:"err-icon"}):null,r.a.createElement("div",{className:"message-box"},r.a.createElement("div",{className:"msg-text"},t.message)),r.a.createElement("div",{className:"head-portrait"},s.substr(0,1).toLowerCase())))})),r.a.createElement("div",{className:"send-box"},r.a.createElement("div",{className:"tool-box"}),r.a.createElement("textarea",{className:"text-area",value:this.state.message,onInput:this.handleInputChange}),r.a.createElement("button",{className:"btn send-button",onClick:this.sendMessage,disabled:!this.state.message},Oe.t("message_send_w"))))}else c=r.a.createElement("div",{className:"default-content"},r.a.createElement("div",{className:"img"}),r.a.createElement("div",{className:"text"},Oe.t("message_empty_w")));return r.a.createElement("div",{className:"chat"},c)}}]),n}(r.a.Component);n(102);function Ne(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(I.a)(this,n)}}var je=q.getInstance().getI18next(),we=function(e){Object(_.a)(n,e);var t=Ne(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).state={currentGroupInfo:null},a.copy=a.copy.bind(Object(E.a)(a)),a.handleClick=a.handleClick.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"handleClick",value:function(e){if(!e.target.className.includes("more-icon")){var t=!1;try{e.path.forEach(function(e){if(e.className&&e.className.includes("group-container"))throw t=!0,new Error("break")})}catch(n){}t||me(!1)}}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("click",this.handleClick),ee.getInstance().registerCurrentGroupInfoUpdateCallback(function(t){e.setState({currentGroupInfo:t})})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleClick),ee.getInstance().unInit()}},{key:"copy",value:function(){var e=this.state.currentGroupInfo;navigator.clipboard&&e&&navigator.clipboard.writeText(e.baseInfo.groupID).then(function(){ge(!0,{text:je.t("group_copy_success"),type:"default"})})}},{key:"render",value:function(){var e=this.state.currentGroupInfo,t=null;return this.props.showGroupInfo&&(t=r.a.createElement("div",{className:"group-container"},r.a.createElement("div",{className:"form-box"},r.a.createElement("div",{className:"id"},r.a.createElement("div",{className:"label"},je.t("group_group_id")),r.a.createElement("div",{className:"value"},e?e.baseInfo.groupID:"")),r.a.createElement("div",{className:"btn copy-btn",onClick:this.copy},je.t("group_copy"))))),t}}]),n}(r.a.Component);n(103);function Ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(I.a)(this,n)}}var Se=function(e){Object(_.a)(n,e);var t=Ue(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).duration=2e3,a.state={},a}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(){this.props.showToast&&(clearTimeout(this.toastTimer),this.toastTimer=setTimeout(function(){fe.emit(de.ToastOperation,!1)},this.duration))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.toastTimer),this.toastTimer=null}},{key:"render",value:function(){var e=null;if(this.props.showToast){var t=this.props.toastData,n=t.name,a=t.text,i=t.type;e=r.a.createElement("div",null,r.a.createElement("div",{className:"default"+("loading"===i?" loading":"")},r.a.createElement("div",{className:"toast"+("error"===i?" error":"")},n?r.a.createElement("span",{className:"name"},n):null,r.a.createElement("span",{className:"text"},a))))}return e}}]),n}(r.a.Component);n(104);function xe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(I.a)(this,n)}}var Ge=function(e){Object(_.a)(n,e);var t=xe(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).closeHandle=a.closeHandle.bind(Object(E.a)(a)),a.cancelHandle=a.cancelHandle.bind(Object(E.a)(a)),a.confirmHandle=a.confirmHandle.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"closeHandle",value:function(){fe.emit(de.DialogOperation,!1)}},{key:"cancelHandle",value:function(){var e=this.props.dialogData.cancelFunc;e&&e(),this.closeHandle()}},{key:"confirmHandle",value:function(){var e=this.props.dialogData.confirmFunc;e&&e(),this.closeHandle()}},{key:"render",value:function(){var e=null;if(this.props.showBaseDialog){var t=this.props.dialogData,n=t.title,a=t.desc,i=t.hasCloseBtn,o=t.cancelText,s=t.confirmText;e=r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"dialog"},i?r.a.createElement("div",{className:"close-icon",onClick:this.closeHandle}):null,r.a.createElement("div",{className:"title"},n),r.a.createElement("div",{className:"desc"},a),r.a.createElement("div",{className:"line"}),r.a.createElement("div",{className:"btn-box"},o?r.a.createElement("button",{className:"btn cancel",onClick:this.cancelHandle},o):null,s?r.a.createElement("button",{className:"btn confirm",onClick:this.confirmHandle},s):null)))}return e}}]),n}(r.a.Component);n(105);function ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(I.a)(this,n)}}var Te=function(e){Object(_.a)(n,e);var t=ze(n);function n(e){var a;return Object(C.a)(this,n),(a=t.call(this,e)).state={showGroupInfo:!1,showToast:!1,showBaseDialog:!1,toastData:{text:"",name:"",type:"default"},dialogData:{title:"",desc:"",cancelText:"",confirmText:"",hasCloseBtn:!1}},a.handleGroupInfoOperation=a.handleGroupInfoOperation.bind(Object(E.a)(a)),a.handleToastOperation=a.handleToastOperation.bind(Object(E.a)(a)),a.handleDialogOperation=a.handleDialogOperation.bind(Object(E.a)(a)),a}return Object(b.a)(n,[{key:"handleGroupInfoOperation",value:function(e){this.setState({showGroupInfo:void 0===e?!this.state.showGroupInfo:!!e})}},{key:"handleToastOperation",value:function(e,t){this.setState({showToast:e,toastData:t})}},{key:"handleDialogOperation",value:function(e,t){this.setState({showBaseDialog:e,dialogData:t})}},{key:"componentDidMount",value:function(){fe.on(de.GroupInfoOperation,this.handleGroupInfoOperation),fe.on(de.ToastOperation,this.handleToastOperation),fe.on(de.DialogOperation,this.handleDialogOperation)}},{key:"componentWillUnmount",value:function(){fe.off(de.GroupInfoOperation,this.handleGroupInfoOperation),fe.off(de.ToastOperation,this.handleToastOperation),fe.off(de.DialogOperation,this.handleDialogOperation)}},{key:"render",value:function(){var e=this.state,t=e.showGroupInfo,n=e.showToast,a=e.showBaseDialog,i=e.toastData,o=e.dialogData;return r.a.createElement("div",{id:"zegoim"},r.a.createElement("div",{className:"zego-im-container"},r.a.createElement("div",{className:"top-banner"},"ZEGO IM"),r.a.createElement("div",{className:"box"},r.a.createElement(Ie,null),r.a.createElement(Me,null),r.a.createElement(we,{showGroupInfo:t})),r.a.createElement(Se,{showToast:n,toastData:i}),r.a.createElement(Ge,{showBaseDialog:a,dialogData:o})))}}]),n}(r.a.Component);function He(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(I.a)(this,n)}}var Re=function(e){Object(_.a)(n,e);var t=He(n);function n(){return Object(C.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;W.getInstance().registerConnectionStateChangedCallback(function(t){0!==t.state||0!==t.event&&4!==t.event||(e.props.logout(),localStorage.removeItem("userInfo"))})}},{key:"render",value:function(){return r.a.createElement("div",{id:"main"},!this.props.isLoggedIn&&r.a.createElement(L.a,{to:"/login",replace:!0}),r.a.createElement(Te,null))}}]),n}(r.a.Component),Ke=Object(c.b)(g,function(e){return{logout:function(t){return e(m(t))}}})(Re);function Pe(){Pe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,i=Object.create(r.prototype),o=new D(a||[]);return i._invoke=function(e,t,n){var a="suspendedStart";return function(r,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw i;return k()}for(n.method=r,n.arg=i;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var c=u(e,t,n);if("normal"===c.type){if(a=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=c;var l={};function h(){}function d(){}function v(){}var m={};s(m,r,function(){return this});var g=Object.getPrototypeOf,p=g&&g(g(L([])));p&&p!==t&&n.call(p,r)&&(m=p);var f=v.prototype=h.prototype=Object.create(m);function y(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function C(e,t){var a;this._invoke=function(r,i){function o(){return new t(function(a,o){!function a(r,i,o,s){var c=u(e[r],e,i);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){a("next",e,o,s)},function(e){a("throw",e,o,s)}):t.resolve(h).then(function(e){l.value=e,o(l)},function(e){return a("throw",e,o,s)})}s(c.arg)}(r,i,a,o)})}return a=a?a.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,l;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function L(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=v,s(f,"constructor",v),s(v,"constructor",d),d.displayName=s(v,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e},e.awrap=function(e){return{__await:e}},y(C.prototype),s(C.prototype,i,function(){return this}),e.AsyncIterator=C,e.async=function(t,n,a,r,i){void 0===i&&(i=Promise);var o=new C(c(t,n,a,r),i);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},y(f),s(f,o,"Generator"),s(f,r,function(){return this}),s(f,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return o.type="throw",o.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;I(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Ae(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(I.a)(this,n)}}var Be=function(e){Object(_.a)(n,e);var t=Ae(n);function n(){var e;Object(C.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).cacheUserInfo=M(),e}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=Object(y.a)(Pe().mark(function e(){var t,n;return Pe().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new W,e.next=3,t.createZIM(G);case 3:if(this.props.initIMKitSDK(!0),!this.cacheUserInfo){e.next=9;break}return n=S(this.cacheUserInfo.userID,0,G),e.next=8,W.getInstance().loginWithUserInfo(this.cacheUserInfo,n);case 8:this.props.login();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(L.d,null,r.a.createElement(L.b,{path:"/",element:r.a.createElement(Ke,null)}),r.a.createElement(L.b,{path:"/main",element:r.a.createElement(Ke,null)}),r.a.createElement(L.b,{path:"/login",element:r.a.createElement(Q,null)}))}}]),n}(r.a.Component),Je=Object(c.b)(g,function(e){return{initIMKitSDK:function(t){return e(d(t))},login:function(t){return e(v(t))}}})(Be),Fe=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,109)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{store:f},r.a.createElement(s.a,null,r.a.createElement(Je,null))))),Fe()},38:function(e,t,n){},45:function(e,t,n){"use strict";n.d(t,"b",function(){return a});var a,r=n(17);n.d(t,"a",function(){return r.ZIM}),function(e){e[e.Web=0]="Web"}(a||(a={}))},55:function(e,t,n){e.exports=n(106)},67:function(e,t,n){},68:function(e,t){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[55,1,2]]]);
//# sourceMappingURL=main.70cb8211.chunk.js.map