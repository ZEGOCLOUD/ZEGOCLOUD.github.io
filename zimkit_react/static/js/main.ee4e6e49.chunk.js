(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),o=n(41),s=n.n(o),c=n(23),l=n(16),u=n(30),h=Object(u.b)({name:"AUTH",initialState:{isInit:!1,isLoggedIn:!1},reducers:{initIMKitSDK:function(e,t){e.isInit=t.payload},login:function(e,t){e.isLoggedIn=!0},logout:function(e,t){e.isLoggedIn=!1}}}),g=h.actions,d=g.initIMKitSDK,m=g.login,p=g.logout,v=function(e){return{isInit:e.isInit,isLoggedIn:e.isLoggedIn}},f=h.reducer,y=Object(u.a)({reducer:f}),b=(l.d,n(62),n(2)),C=n(5),I=n(8),_=n(6),w=n(7),L=n(3),k=n(1),E=["Ada","Aaliyah","Aditi","Adela","Adelaide","Adele","Adora","Afra","Agatha","Agnes","Alani","Alberta","Alice","Alma","Althea","Alva","Alexandra","Alisa","Alison","Alyssa","Amanda","Amelia","Amity","Anila","Amy","Andrea","Angela","Ann","Anna","Annabelle","Antonia","Apphia","April","Arabela","Arlene","Ashley","Astrid","Atalanta","Athena","Audrey","Aurora","Ava","Barbara","Basia","Bblythe","Beatrice","Belen","Bella","Belle","Belinda","Bernice","Bertha","Beryl","Bess","Betsy","Betty","Beulah","Beverly","Blanche","Bonnie","Breenda","Brianna","Bridget","Brook","Calista","Camille","Candice","Candance","Carol","Cara","Caroline","Carlin","Caitlin","Catherine","Cathy","Cecilia","Celeste","Charlotte","Chaya","Cheryl","Cherry","Cheryl","Chloe","Christine","Clara","Claire","Clara","Clementine","Constance","Cora","Coral","Cornelia","Crystal","Cynthia","Daisy","Dale","Dana","Damla","Daphne","Darlene","Dawn","Debby","Deborah","Deirdre","Delia","Denise","Destiny","Diana","Dinah","Dolores","Dominic","Donna","Doreen","Dora","Doris","Dorothy","Eartha","Eden","Edith","Edwina","Eileen","Elaine","Eleanore","Elizabeth","Ella","Ellen","Elma","Elsa","Elsie","Elvira","Elva","Emily","Emma","Enid","Erin","Erica","Esther","Ethel","Eudora","Eunice","Evangeline","Eve","Evelyn","Faithe","Faith","Fanny","Fay","Flora","Florence","Frances","Freda","Frederica","Gabrielle","Gail","Gemma","Genevieve","Georgia","Geraldine","Gill","Gina","Giselle","Gladys","Gloria","Grace","Griselda","Gustave","Gwendolyn","Hannah","Harriet","Hazel","Heather","Hedda","Hedwig","Hedy","Helen","Heloise","Hermosa","Hilda","Hilary","Honey","Hulda","Ida","Ina","Ingrid","Irene","Iris","Irma","Isabel","Ivy","Jacqueline","Jade","Jamie","Jane","Janet","Janice","Jean","Jennifer","Jenny","Jessie","Jessica","Jill","Jo","Joa","Joanna","Joanne","Jocelyn","Jodie","Jolie","Josephine","Joy","Joyce","Judith","Judy","Julia","Julie","Juliet","June","Kama","Karen","Kate","Katherine","Kay","Kelly","Kimberley","Kitty","Kristin","Lara","Laura","Laurel","Lauren","Lee","Leila","Lena","Leona","Lesley","Letitia","Lila","Lilith","Lillian","Linda","Lindsay","Lisa","Liz","Lola","Lorraine","Louise","Lucy","Lyuba","Lydia","Lynn","Mabel","Madge","Madeline","Maggie","Mamie","Mandy","Marcia","Margaret","Marguerite","Maria","Marina","Marian","Marjorie","Martina","Martha","Mary","Maud","Maureen","Mavis","Maxine","Mag","May","Megan","Melissa","Meroy","Meredith","Merry","Michelle","Michaelia","Mignon","Mildred","Miranda","Mirabelle","Miriam","Modesty","Moira","Molly","Mona","Monica","Muriel","Murray","Myra","Myrna","Nancy","Naomi","Natalie","Natividad","Nelly","Nicole","Nicola","Nina","Nora","Norma","Novia","Nydia","Octavia","Odelia","Odelette","Olga","Olive","Olivia","Ophelia","Pag","Page","Pamela","Pandora","Patricia","Paula","Pearl","Penny","Penelope","Philipppa","Phoebe","Phoenix","Phyllis","Polly","Poppy","Prima","Priscilla","Prudence","Queena","Quanna","Quintina","Rachel","Rae","Rebecca","Regina","Renee","Renata","Rita","Riva","Roberta","Rose","Rosalind","Rosemary","Roxanne","Ruby","Ruth","Sabina","Sabrina","Sally","Salome","Samantha","Sandra","Sandy","Sara","Sarah","Sebastiane","Selena","Sharon","Sherry","Sheila","Shirley","Sibyl","Sigrid","Simona","Sophia","Spring","Stacey","Setlla","Stephanie","Susan","Susie","Susanna","Suzanne","Sylvia","Tara","Tabitha","Tammy","Teresa","Tess","Thera","Theresa","Tiffany","Tina","Tobey","Tracy","Trista","Truda","Ula","Una","Ursula","Valerie","Vanessa","Venus","Vera","Verna","Vicky","Victoria","Viola","Violet","Virginia","Vivien","Wallis","Wanda","Wendy","Winni","Winifred","Xanthe","Xaviera","Xenia","Xylia","Yedda","Yetta","Yuri","Yvette","Yvonne","Zara","Zenobia","Zoe","Zona","Zanna","Zora"],M=function(){return localStorage.userInfo?JSON.parse(localStorage.userInfo):null},O=function(){localStorage.removeItem("userInfo")},x=function(e){var t=localStorage.userList?JSON.parse(localStorage.userList):null,n=E[Math.floor(Math.random()*E.length)],a={userName:""};return e.length>=6&&e.length<=12&&t&&t.some(function(t){return t.userID===e})?a.userName=t.filter(function(t){return t.userID===e})[0].userName:a.userName=n,a},D=function(e){var t=e.charCodeAt(0)%9;return"https://storage.zego.im/IMKit/avatar/avatar-".concat(t,".png")},j=2031514356,N="6e46fa37db195c449155c9fbfded9c4b",S="",A=n(44),U=n.n(A);!function(e){e[e.Web=0]="Web"}(a||(a={}));var G,z=U.a;!function(e){e[e.ZIMKitConversationTypePeer=0]="ZIMKitConversationTypePeer",e[e.ZIMKitConversationTypeGroup=2]="ZIMKitConversationTypeGroup"}(G||(G={}));var T=function e(t){Object(b.a)(this,e),this.platform=void 0,this.platform=t},P=function(e){function t(){return Object(b.a)(this,t),Object(I.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(C.a)(t,[{key:"on",value:function(e,n){return t.instance.on(e,n)}},{key:"off",value:function(e){return t.instance.off(e)}},{key:"login",value:function(e,n){return t.instance.login(e,n)}},{key:"logout",value:function(){return t.instance.logout()}},{key:"destroy",value:function(){return t.instance.destroy()}},{key:"renewToken",value:function(e){return t.instance.renewToken(e)}},{key:"queryConversationList",value:function(e){return t.instance.queryConversationList(e)}},{key:"createGroup",value:function(e,n,a){return t.instance.createGroup(e,n,a)}},{key:"sendPeerMessage",value:function(e,n,a){return t.instance.sendPeerMessage(e,n,a)}},{key:"sendGroupMessage",value:function(e,n,a){return t.instance.sendGroupMessage(e,n,a)}},{key:"sendMediaMessage",value:function(e,n,a,r,i){return t.instance.sendMediaMessage(e,n,a,r,i)}},{key:"queryHistoryMessage",value:function(e,n,a){return t.instance.queryHistoryMessage(e,n,a)}},{key:"deleteMessages",value:function(e,n,a,r){return t.instance.deleteMessages(e,n,a,r)}},{key:"deleteConversation",value:function(e,n,a){return t.instance.deleteConversation(e,n,a)}},{key:"clearConversationUnreadMessageCount",value:function(e,n){return t.instance.clearConversationUnreadMessageCount(e,n)}},{key:"queryGroupList",value:function(){return t.instance.queryGroupList()}},{key:"queryGroupInfo",value:function(e){return t.instance.queryGroupInfo(e)}},{key:"queryGroupMemberList",value:function(e,n){return t.instance.queryGroupMemberList(e,n)}},{key:"joinGroup",value:function(e){return t.instance.joinGroup(e)}},{key:"leaveGroup",value:function(e){return t.instance.leaveGroup(e)}},{key:"uploadLog",value:function(){return t.instance.uploadLog()}},{key:"updateUserAvatarUrl",value:function(e){return t.instance.updateUserAvatarUrl(e)}},{key:"queryUsersInfo",value:function(e,n){return t.instance.queryUsersInfo(e,n)}}],[{key:"create",value:function(e){return t.instance||(t.instance=z.create(e)),t.instance}},{key:"getInstance",value:function(){return t.instance}}]),t}(function e(){Object(b.a)(this,e)});P.instance=void 0;var H=window.process&&Object({NODE_ENV:"production",PUBLIC_URL:"."}).PLATFORM||"web",K=function(){function e(){Object(b.a)(this,e)}return Object(C.a)(e,[{key:"on",value:function(t,n){return e.getInstance().on(t,n)}},{key:"off",value:function(t){return e.getInstance().off(t)}},{key:"login",value:function(t,n){return e.getInstance().login(t,n)}},{key:"logout",value:function(){return e.getInstance().logout()}},{key:"destroy",value:function(){return e.getInstance().destroy()}},{key:"renewToken",value:function(t){return e.getInstance().renewToken(t)}},{key:"queryConversationList",value:function(t){return e.getInstance().queryConversationList(t)}},{key:"createGroup",value:function(t,n,a){return e.getInstance().createGroup(t,n,a)}},{key:"sendPeerMessage",value:function(t,n,a){return e.getInstance().sendPeerMessage(t,n,a)}},{key:"sendGroupMessage",value:function(t,n,a){return e.getInstance().sendGroupMessage(t,n,a)}},{key:"sendMediaMessage",value:function(t,n,a,r,i){return e.getInstance().sendMediaMessage(t,n,a,r,i)}},{key:"queryHistoryMessage",value:function(t,n,a){return e.getInstance().queryHistoryMessage(t,n,a)}},{key:"deleteMessages",value:function(t,n,a,r){return e.getInstance().deleteMessages(t,n,a,r)}},{key:"deleteConversation",value:function(t,n,a){return e.getInstance().deleteConversation(t,n,a)}},{key:"clearConversationUnreadMessageCount",value:function(t,n){return e.getInstance().clearConversationUnreadMessageCount(t,n)}},{key:"queryGroupList",value:function(){return e.getInstance().queryGroupList()}},{key:"queryGroupInfo",value:function(t){return e.getInstance().queryGroupInfo(t)}},{key:"queryGroupMemberList",value:function(t,n){return e.getInstance().queryGroupMemberList(t,n)}},{key:"joinGroup",value:function(t){return e.getInstance().joinGroup(t)}},{key:"leaveGroup",value:function(t){return e.getInstance().leaveGroup(t)}},{key:"uploadLog",value:function(){return e.getInstance().uploadLog()}},{key:"updateUserAvatarUrl",value:function(t){return e.getInstance().updateUserAvatarUrl(t)}},{key:"queryUsersInfo",value:function(t,n){return e.getInstance().queryUsersInfo(t,n)}}],[{key:"initPlatform",value:function(){return"web"===H?(e.zimPlatformManage=new T(a.Web),e.zimModule=P,Promise.resolve()):Promise.resolve()}},{key:"getInstance",value:function(){return e.zimModule.getInstance()}},{key:"create",value:function(t){return e.zimModule.create(t)}}]),e}();K.zimPlatformManage=void 0,K.zimModule=void 0;var q,B=n(9);!function(e){e.zimError="error",e.zimConnectionStateChanged="connectionStateChanged",e.zimTokenWillExpire="tokenWillExpire",e.zimReceivePeerMessage="receivePeerMessage",e.zimReceiveGroupMessage="receiveGroupMessage",e.zimConversationTotalUnreadMessageCountUpdated="conversationTotalUnreadMessageCountUpdated",e.zimConversationChanged="conversationChanged",e.zimGroupMemberStateChanged="groupMemberStateChanged",e.zimKitLoginStateChanged="loggedStateChanged",e.zimKitLoginUserUpdate="loginUserUpdate",e.zimKitDeleteConversation="deleteConversation",e.zimKitCurrentConversationChanged="currentConversationChanged",e.zimKitCurrentConversationUpdate="currentConversationUpdate",e.zimKitConversationListUpdate="conversationListUpdate",e.zimKitConversationListQueryAbnormally="conversationListQueryAbnormally",e.zimKitCurrentChatChanged="currentChatChanged",e.zimKitCurrentChatUpdated="currentChatUpdated",e.zimKitCurrentGroupInfoUpdated="currentGroupInfoUpdated",e.zimKitImgMessageUpdated="imgMessageUpdated",e.zimKitNetworkChanged="networkChanged",e.zimKitModeChanged="modeChanged"}(q||(q={}));var F=function(){function e(){var t;return Object(b.a)(this,e),this.eventList=(t={},Object(B.a)(t,q.zimError,[]),Object(B.a)(t,q.zimConnectionStateChanged,[]),Object(B.a)(t,q.zimTokenWillExpire,[]),Object(B.a)(t,q.zimReceivePeerMessage,[]),Object(B.a)(t,q.zimReceiveGroupMessage,[]),Object(B.a)(t,q.zimConversationTotalUnreadMessageCountUpdated,[]),Object(B.a)(t,q.zimConversationChanged,[]),Object(B.a)(t,q.zimGroupMemberStateChanged,[]),Object(B.a)(t,q.zimKitLoginStateChanged,[]),Object(B.a)(t,q.zimKitLoginUserUpdate,[]),Object(B.a)(t,q.zimKitDeleteConversation,[]),Object(B.a)(t,q.zimKitConversationListUpdate,[]),Object(B.a)(t,q.zimKitCurrentConversationChanged,[]),Object(B.a)(t,q.zimKitCurrentConversationUpdate,[]),Object(B.a)(t,q.zimKitConversationListQueryAbnormally,[]),Object(B.a)(t,q.zimKitCurrentChatChanged,[]),Object(B.a)(t,q.zimKitCurrentChatUpdated,[]),Object(B.a)(t,q.zimKitCurrentGroupInfoUpdated,[]),Object(B.a)(t,q.zimKitImgMessageUpdated,[]),Object(B.a)(t,q.zimKitNetworkChanged,[]),Object(B.a)(t,q.zimKitModeChanged,[]),t),e.instance||(e.instance=this),e.instance}return Object(C.a)(e,[{key:"addEventListener",value:function(e,t){var n=this;return!!this.eventList[e]&&(!!Array.isArray(t)&&(t.forEach(function(t){!n.eventList[e].includes(t)&&n.eventList[e].push(t)}),!0))}},{key:"removeEventListener",value:function(e,t){if(!this.eventList[e])return!1;var n=this.eventList[e];return t&&t.length?t.forEach(function(e){n.splice(n.indexOf(e),1)}):this.eventList[e]=[],!0}},{key:"actionListener",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.eventList[e]&&this.eventList[e].forEach(function(e){e.apply(void 0,n)})}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();F.instance=void 0;var R=n(15),W=n(31),J=n.n(W);var V=n(12),Y=function(e){function t(){return Object(b.a)(this,t),Object(I.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(C.a)(t,[{key:"queryGroupMemberList",value:function(){var e=this;return se.getInstance().zim.queryGroupMemberList(this.baseInfo.groupID,{count:100,nextFlag:0}).then(function(t){console.log("kitlog queryGroupMemberList success",t),e.memberList=t.userList}).catch(function(e){console.log("kitlog queryGroupMemberList err",e)})}},{key:"queryGroupInfo",value:function(){var e=this;return se.getInstance().zim.queryGroupInfo(this.baseInfo.groupID).then(function(t){e.baseInfo=t.groupInfo.baseInfo})}}]),t}(function e(t){Object(b.a)(this,e),this.baseInfo=void 0,this.notificationStatus=void 0,this.memberList=[],this.notificationStatus=t.notificationStatus,this.memberList=t.memberList,this.baseInfo=t.baseInfo});function Q(){Q=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,i=Object.create(r.prototype),o=new w(a||[]);return i._invoke=function(e,t,n){var a="suspendedStart";return function(r,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw i;return k()}for(n.method=r,n.arg=i;;){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var c=l(e,t,n);if("normal"===c.type){if(a=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=c;var u={};function h(){}function g(){}function d(){}var m={};s(m,r,function(){return this});var p=Object.getPrototypeOf,v=p&&p(p(L([])));v&&v!==t&&n.call(v,r)&&(m=v);var f=d.prototype=h.prototype=Object.create(m);function y(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var a;this._invoke=function(r,i){function o(){return new t(function(a,o){!function a(r,i,o,s){var c=l(e[r],e,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){a("next",e,o,s)},function(e){a("throw",e,o,s)}):t.resolve(h).then(function(e){u.value=e,o(u)},function(e){return a("throw",e,o,s)})}s(c.arg)}(r,i,a,o)})}return a=a?a.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=l(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function L(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return g.prototype=d,s(f,"constructor",d),s(d,"constructor",g),g.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,a,r,i){void 0===i&&(i=Promise);var o=new b(c(t,n,a,r),i);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},y(f),s(f,o,"Generator"),s(f,r,function(){return this}),s(f,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return o.type="throw",o.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;_(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}var X=function(){function e(){return Object(b.a)(this,e),this.groupList=new Map,e.instance||(e.instance=this,e.instance.initListenerHandle()),e.instance}return Object(C.a)(e,[{key:"initListenerHandle",value:function(){var e=this;F.getInstance().addEventListener(q.zimGroupMemberStateChanged,[function(t){var n=e.groupList.get(t.groupID);n?n.queryGroupMemberList():e.queryGroupList().then(function(){var n=e.groupList.get(t.groupID);n&&n.queryGroupMemberList()})}])}},{key:"queryGroupList",value:function(){var e=this;return se.getInstance().zim.queryGroupList().then(function(t){t.groupList.forEach(function(t){e.groupList.set(t.baseInfo.groupID,new Y(t))})})}},{key:"createGroup",value:function(e,t,n){var a=this,r={groupID:e,groupName:t,groupAvatarUrl:""};return se.getInstance().zim.createGroup(r,n,{groupNotice:"",groupAttributes:{}}).then(function(){var e=Object(V.a)(Q().mark(function e(t){return Q().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.queryGroupList();case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},{key:"joinGroup",value:function(e){var t=this;return se.getInstance().zim.joinGroup(e).then(function(e){return t.queryGroupList(),e})}},{key:"leaveGroup",value:function(e){var t=this;return se.getInstance().zim.leaveGroup(e).then(function(e){return t.queryGroupList(),e})}},{key:"queryGroupMemberList",value:function(e){return se.getInstance().zim.queryGroupMemberList(e,{count:100,nextFlag:0})}},{key:"registerLoginStateChangedCallback",value:function(e){F.getInstance().addEventListener(q.zimKitLoginStateChanged,[e])}},{key:"dismissGroup",value:function(e){}},{key:"inviteUsersJoinGroup",value:function(e,t){}},{key:"kickGroupMembers",value:function(e,t){}},{key:"unInit",value:function(){this.groupList=new Map}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();X.instance=void 0;var Z=n(24),$=n(49),ee=n(107),te={common_yesterday:"\u6628\u5929",common_user_kick_out:"\u91cd\u590d\u767b\u5f55\uff0c\u7528\u6237\u88ab\u8e22\u51fa",common_monday:"\u5468\u4e00",common_tuesday:"\u5468\u4e8c",common_wednesday:"\u5468\u4e09",common_thursday:"\u5468\u56db",common_friday:"\u5468\u4e94",common_saturday:"\u5468\u516d",common_sunday:"\u5468\u65e5",common_logout:"\u9000\u51fa",common_return:"\u8fd4\u56de",common_message_unknown:"\u6682\u4e0d\u652f\u6301\u8be5\u7c7b\u578b\u6d88\u606f\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c",common_message_photo:"[\u56fe\u7247]",common_message_audio:"[\u8bed\u97f3]",common_message_video:"[\u89c6\u9891]",common_message_file:"[\u6587\u4ef6]",conversation_start_chat_w:"\u53d1\u8d77\u804a\u5929",conversation_empty:"\u6682\u65e0\u6d88\u606f\n\u5feb\u53bb\u53d1\u8d77\u804a\u5929\u5427",conversation_start_single_chat:"\u53d1\u8d77\u5355\u804a",conversation_start_group_chat:"\u53d1\u8d77\u7fa4\u804a",conversation_join_group_chat:"\u52a0\u5165\u7fa4\u804a",conversation_cancel:"\u53d6\u6d88",conversation_delete:"\u5220\u9664",conversation_message_total_count:"\u6d88\u606f",conversation_reload:"\u91cd\u65b0\u52a0\u8f7d",conversation_enter_touserid_w:"\u8bf7\u8f93\u5165\u5bf9\u65b9\u7528\u6237ID",conversation_close_chat_w:"\u5173\u95ed\u804a\u5929",conversation_disconnected:"\u672a\u8fde\u63a5",conversation_connecting:"\u8fde\u63a5\u4e2d...",demo_login_hint:"\u8f93\u5165\u7528\u6237id",demo_login:"\u767b\u5f55",demo_user_name:"\u7528\u6237\u540d\u4e3a:%s",demo_user_name_w:"\u968f\u673a\u7528\u6237\u6635\u79f0",demo_welcome:"Hi\uff0c\n\u6b22\u8fce\u4f7f\u7528 \nZEGO In-app Chat",demo_input_user_id_error_tips:"\u8bf7\u8f93\u51656\u201312\u4f4d\u82f1\u6587\u6216\u6570\u5b57\u7684\u7528\u6237ID",demo_input_placeholder_w:"\u8bf7\u8f93\u51656\u201312\u4f4d\u82f1\u6587\u6216\u6570\u5b57\u7684\u7528\u6237ID",demo_user_id_login:"\u7528\u6237ID\u767b\u5f55",group_create_chat:"\u53d1\u8d77\u4f1a\u8bdd",group_input_group_id:"\u8f93\u5165\u7fa4ID",group_input_group_id_w:"\u8f93\u5165\u7fa4\u804aID",group_input_group_name:"\u8f93\u5165\u7fa4\u804a\u540d\u79f0",group_input_user_id_of_group:"\u8f93\u5165\u7fa4\u6210\u5458\u7684\u7528\u6237ID\uff0c';'\u82f1\u6587\u5206\u53f7\u9694\u5f00",group_user_id_cant_null:"\u7528\u6237id\u4e0d\u80fd\u4e3a\u7a7a",group_create_group_chat_title:"\u53d1\u8d77\u7fa4\u804a\u4f1a\u8bdd",group_join_group_chat:"\u52a0\u5165\u7fa4\u804a\u4f1a\u8bdd",group_user_not_exit:"\u7528\u6237\u4e0d\u5b58\u5728",group_group_not_exit:"\u7fa4\u4e0d\u5b58\u5728",group_group_user_id_not_exit:"\u7fa4\u6210\u5458\u7528\u6237ID %s \u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de",group_group_user_id_not_exit_w:"\u8bf7\u8fd4\u56de\u4fee\u6539",group_group_id_not_exit:"\u7fa4ID %s \u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de",group_group_id_not_exit_w:"\u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de\u4fee\u6539",group_input_user_id_error_tip:"\u8bf7\u8f93\u51656\u201312\u4f4d\u82f1\u6587\u6216\u6570\u5b57\u7684\u7528\u6237ID",group_group_id:"\u7fa4\u804aID",group_copy:"\u590d\u5236",group_copy_success:"\u590d\u5236\u6210\u529f",group_repeat_join_group_chat:"\u4f60\u5df2\u5728\u8be5\u7fa4\u7ec4",message_input_new_message:"\u8f93\u5165\u65b0\u6d88\u606f",message_user_not_exit_please_again:"\u7528\u6237ID:%s\u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de\u91cd\u65b0\u6dfb\u52a0",message_cant_send_empty_msg:"\u4e0d\u5141\u8bb8\u53d1\u9001\u7a7a\u767d\u6d88\u606f",message_create_chat:"\u53d1\u8d77\u4f1a\u8bdd",message_input_user_id_error_tips:"\u8bf7\u8f93\u51656\u201312\u4f4d\u82f1\u6587\u6216\u6570\u5b57\u7684\u7528\u6237ID",message_create_single_chat:"\u53d1\u8d77\u5355\u804a\u4f1a\u8bdd",message_send:"\u53d1\u9001",message_empty_w:"\u6682\u65f6\u8fd8\u6ca1\u6709\u6536\u5230\u6d88\u606f",message_send_img_exceed_tips_w:"\u53d1\u9001\u56fe\u7247\u8d85\u8fc79\u5f20\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9",message_send_video_exceed_tips_w:"\u53d1\u9001\u89c6\u9891\u8d85\u8fc79\u4e2a\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9",message_network_anomaly:"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u540e\u91cd\u8bd5",message_size_over_limit:"\u56fe\u7247\u4e0d\u7b26\u5408\u89c4\u683c\uff0c\u8bf7\u5904\u7406\u540e\u518d\u53d1\u9001",message_audio_play_error_tips:"\u64ad\u653e\u5931\u8d25\uff0c\u8bf7\u68c0\u6d4b\u7f51\u7edc\u540e\u91cd\u8bd5",message_video_play_error_tips_w:"\u89c6\u9891\u683c\u5f0f\u4e0d\u652f\u6301web\u7aef\u64ad\u653e\uff0c\u8bf7\u4e0b\u8f7d\u540e\u7528\u7cfb\u7edf\u64ad\u653e\u5668\u64ad\u653e",message_delete_confirmation_desc:"\u786e\u8ba4\u5220\u9664\uff1f",message_delete_succeed_tips:"\u5220\u9664\u6210\u529f",message_multi_select:"\u591a\u9009",message_file_empty_error_tips:"\u65e0\u6cd5\u53d1\u9001\u7a7a\u6587\u4ef6\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9",message_photo_size_err_tips:"\u56fe\u7247\u4e0d\u652f\u6301\u8d85\u8fc710MB\uff0c\u8bf7\u538b\u7f29\u540e\u91cd\u65b0\u53d1\u9001",message_photo_format_err_tips:"\u56fe\u7247\u53ea\u652f\u6301JPG\u3001PNG\u3001BMP\u3001TIFF\u3001GIF\u3001WebP\u683c\u5f0f\uff0c\u8bf7\u5904\u7406\u540e\u91cd\u65b0\u53d1\u9001",message_video_size_err_tips:"\u89c6\u9891\u4e0d\u652f\u6301\u8d85\u8fc7100MB\uff0c\u8bf7\u5904\u7406\u540e\u91cd\u65b0\u53d1\u9001",message_video_format_err_tips:"\u89c6\u9891\u53ea\u652f\u6301mp4\u548cmov\u683c\u5f0f\uff0c\u8bf7\u5904\u7406\u540e\u91cd\u65b0\u53d1\u9001",message_file_size_err_tips:"\u6587\u4ef6\u4e0d\u652f\u6301\u8d85\u8fc7100MB\uff0c\u8bf7\u5904\u7406\u540e\u91cd\u65b0\u53d1\u9001",message_title_chat:"\u804a\u5929",message_title_group_chat:"\u7fa4\u804a",album_download_image_w:"\u4e0b\u8f7d",album_redownload_image:"\u91cd\u65b0\u52a0\u8f7d"},ne={common_yesterday:"Yesterday",common_user_kick_out:"The user is kicked out because the ID is reused for login. ",common_monday:"Monday",common_tuesday:"Tuesday",common_wednesday:"Wednesday",common_thursday:"Thursday",common_friday:"Friday",common_saturday:"Saturday",common_sunday:"Sunday",common_logout:"Log out",common_return:"Back",common_message_unknown:"This type of message is not supported. Please upgrade to the latest version.",common_message_photo:"[Image]",common_message_audio:"[Audio]",common_message_video:"[Video]",common_message_file:"[File]",conversation_start_chat_w:"New Chat",conversation_empty:"No chats.\nStart chatting now.",conversation_start_single_chat:"One-on-one chat",conversation_start_group_chat:"Group chat",conversation_join_group_chat:"Join a group",conversation_cancel:"Cancel",conversation_delete:"Delete",conversation_message_total_count:"Chats",conversation_reload:"Reload",conversation_enter_touserid_w:"Enter a user ID",conversation_close_chat_w:"Delete",conversation_disconnected:"Disconnected",conversation_connecting:"Connecting...",demo_login_hint:"User ID",demo_login:"Log In",demo_user_name:"Username: %s",demo_user_name_w:"Random nickname",demo_welcome:"Hi, \nwelcome to \nZEGOCLOUD In-app Chat.",demo_input_user_id_error_tips:"The userID must be between 6-12 characters using letters and numbers.",demo_input_placeholder_w:"6-12 bit userID using letters and numbers.",demo_user_id_login:"User Login",group_create_chat:"OK",group_input_group_id:"Group ID",group_input_group_id_w:"Group ID",group_input_group_name:"Group name",group_input_user_id_of_group:"Enter group member IDs, separated by ';'",group_user_id_cant_null:"User ID is required.",group_create_group_chat_title:"New group chat",group_join_group_chat:"Join a group chat",group_user_not_exit:"The user doesn't exist.",group_group_not_exit:"The group doesn't exist.",group_group_user_id_not_exit:"The user ID (%s) doesn't exist. Please modify and try again.",group_group_user_id_not_exit_w:"Please modify and try again.",group_group_id_not_exit:"The group (%s) doesn't exist. Please try again.",group_group_id_not_exit_w:"It doesn't exist. Please modify and try again.",group_input_user_id_error_tip:"The userID must be between 6-12 characters using letters and numbers.",group_group_id:"Group ID",group_copy:"Copy",group_copy_success:"Copied.",group_repeat_join_group_chat:"You are already in the group.",message_input_new_message:"",message_user_not_exit_please_again:"The user ID (%s) doesn't exist. Please try again.",message_cant_send_empty_msg:"Blank messages are not allowed",message_create_chat:"OK",message_input_user_id_error_tips:"The userID must be between 6-12 characters using letters and numbers.",message_create_single_chat:"New 1-on-1 chat",message_send:"Send",message_empty_w:"No messages received.",message_send_img_exceed_tips_w:"No more than 9 images.",message_send_video_exceed_tips_w:"Select a maximum of 9 videos.",message_network_anomaly:"Network error. Please check the network and try again.",message_size_over_limit:"The image doesn\u2019t meet required specification. Please modify it and try again.",message_audio_play_error_tips:"Playback failed. Please check the network and try again.",message_video_play_error_tips_w:"Unable to play the video on websites, please download it and play with system media player.",message_delete_confirmation_desc:"Are you sure to delete?",message_delete_succeed_tips:"Deleted successfully",message_multi_select:"Select",message_file_empty_error_tips:"Unable to send empty file, please reselect.",message_photo_size_err_tips:"The image cannot exceed 10 MB, please compress it and resend.",message_photo_format_err_tips:"Only JPG, PNG, BMP, TIFF, GIF, WebP format images are supported.",message_video_size_err_tips:"The video cannot exceed 100 MB, please process it and resend.",message_video_format_err_tips:"Only MP4 and MOV format videos are supported.",message_file_size_err_tips:"The file cannot exceed 100 MB, please process it and resend.",message_title_chat:"Chat",message_title_group_chat:"Group chat",album_download_image_w:"Save",album_redownload_image:"Relaod"},ae=function(){function e(){if(Object(b.a)(this,e),this.localesData={en:{},zh:{}},this.i18next=$.a.use(ee.a),!e.instance){var t={en:ne,zh:te};this.localesData=t,e.instance=this}return e.instance}return Object(C.a)(e,[{key:"init",value:function(){var e={resources:{zh:{translation:this.localesData.zh},en:{translation:this.localesData.en}},fallbackLng:navigator.language,detection:{caches:["localStorage","sessionStorage","cookie"]}};return this.i18next.init(e)}},{key:"provideMessage",value:function(e){return this.localesData.en=Object(Z.a)({},this.localesData.en,e.en),this.localesData.zh=Object(Z.a)({},this.localesData.zh,e.zh),this.localesData}},{key:"getLocalesData",value:function(){return this.localesData}},{key:"getI18next",value:function(){return this.i18next}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"destroy",value:function(){e.instance.localesData={en:{},cn:{}},e.instance=null}}]),e}();ae.instance=void 0;var re,ie,oe=ae;oe.getInstance().init(),(ie=re||(re={}))[ie.online=1]="online",ie[ie.offline=0]="offline";var se=function(){function e(){return Object(b.a)(this,e),this.userInfo={},this.zim=void 0,this.token=void 0,this.isInit=!1,this.isLoggedIn=0,this.networkStatus=re.online,e.instance||(e.instance=this),e.instance}return Object(C.a)(e,[{key:"init",value:function(e){var t=this;return K.initPlatform().then(function(){t.zim=K.create(e),t.isInit=!0,t.onEvent(),window.manager=t})}},{key:"connectUser",value:function(e,t){var n=this;return this.userInfo=e,this.zim.login(e,t).then(function(){n.token=t,n.isLoggedIn=1,e.userAvatarUrl&&n.updateUserAvatarUrl(e.userAvatarUrl),F.getInstance().actionListener(q.zimKitLoginStateChanged,n.isLoggedIn),F.getInstance().actionListener(q.zimKitLoginUserUpdate,e)})}},{key:"updateUserAvatarUrl",value:function(e){var t=this;return this.zim.updateUserAvatarUrl(e).then(function(e){t.userInfo.userAvatarUrl=e.userAvatarUrl})}},{key:"generateKitTokenForTest",value:function(e,t,n){return function(e,t,n){if(!e)return"";var a=Date.now()/1e3|0,r={app_id:n.appID,user_id:e,nonce:2147483647*Math.random()|0,ctime:a,expire:a+(t||7200)},i=J.a.enc.Utf8.parse(n.serverSecret),o=Math.random().toString().substring(2,18);o.length<16&&(o+=o.substring(0,16-o.length));var s=J.a.AES.encrypt(JSON.stringify(r),i,{iv:J.a.enc.Utf8.parse(o)}).toString(),c=Uint8Array.from(Array.from(atob(s)).map(function(e){return e.charCodeAt(0)})),l=c.length,u=new Uint8Array(28+l);return u.set([0,0,0,0]),u.set(new Uint8Array(Int32Array.from([r.expire]).buffer).reverse(),4),u[8]=o.length>>8,u[9]=o.length-(u[8]<<8),u.set(Uint8Array.from(Array.from(o).map(function(e){return e.charCodeAt(0)})),10),u[26]=l>>8,u[27]=l-(u[26]<<8),u.set(c,28),"04".concat(btoa(String.fromCharCode.apply(String,Object(R.a)(Array.from(u)))))}(n,0,{appID:e,serverSecret:t})}},{key:"createGroup",value:function(e,t){return X.getInstance().createGroup("",e,t).then(function(e){return e}).catch(function(e){return e})}},{key:"joinGroup",value:function(e){return X.getInstance().joinGroup(e).then(function(e){return e}).catch(function(e){return e})}},{key:"disconnectUser",value:function(){return this.isLoggedIn=0,F.getInstance().actionListener(q.zimKitLoginStateChanged,this.isLoggedIn),this.token="",this.zim.logout()}},{key:"on",value:function(e,t){F.getInstance().addEventListener(e,[t])}},{key:"off",value:function(e,t){F.getInstance().removeEventListener(e,[t])}},{key:"destroy",value:function(){this.offEvent(),this.zim.destroy(),this.isInit=!1}},{key:"uploadLog",value:function(){return this.zim.uploadLog()}},{key:"registerConnectionStateChangedCallback",value:function(e){F.getInstance().addEventListener(q.zimConnectionStateChanged,[e])}},{key:"removeConnectionCallback",value:function(e){F.getInstance().removeEventListener(q.zimConnectionStateChanged,[e])}},{key:"registerLoginStateChangedCallback",value:function(e){F.getInstance().addEventListener(q.zimKitLoginStateChanged,[e])}},{key:"removeLoginStateChangedCallback",value:function(e){F.getInstance().removeEventListener(q.zimKitLoginStateChanged,[e])}},{key:"onEvent",value:function(){var e=this;this.zim.on(q.zimError,function(e,t){F.getInstance().actionListener(q.zimError,t)}),this.zim.on(q.zimConnectionStateChanged,function(t,n){switch(console.warn("connectionStateChanged",n),n.state){case 0:switch(n.event){case 3:e.userInfo.userID&&e.zim.login(e.userInfo,e.token);break;case 4:e.disconnectUser()}}F.getInstance().actionListener(q.zimConnectionStateChanged,n)}),this.zim.on(q.zimReceivePeerMessage,function(e,t){F.getInstance().actionListener(q.zimReceivePeerMessage,t)}),this.zim.on(q.zimReceiveGroupMessage,function(e,t){F.getInstance().actionListener(q.zimReceiveGroupMessage,t)}),this.zim.on(q.zimConversationTotalUnreadMessageCountUpdated,function(e,t){F.getInstance().actionListener(q.zimConversationTotalUnreadMessageCountUpdated,t)}),this.zim.on(q.zimConversationChanged,function(e,t){F.getInstance().actionListener(q.zimConversationChanged,t)}),this.zim.on(q.zimGroupMemberStateChanged,function(e,t){F.getInstance().actionListener(q.zimGroupMemberStateChanged,t)}),window.addEventListener("offline",function(){e.networkStatus=re.offline,F.getInstance().actionListener(q.zimKitNetworkChanged,e.networkStatus)}),window.addEventListener("online",function(){e.networkStatus=re.online,F.getInstance().actionListener(q.zimKitNetworkChanged,e.networkStatus)})}},{key:"offEvent",value:function(){this.zim.off(q.zimError),this.zim.off(q.zimConversationChanged),this.zim.off(q.zimTokenWillExpire),this.zim.off(q.zimReceivePeerMessage),this.zim.off(q.zimReceiveGroupMessage),this.zim.off(q.zimConversationTotalUnreadMessageCountUpdated)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();se.instance=void 0;n(93);var ce=oe.getInstance().getI18next(),le=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).state={userID:"",userName:"",loginDisabled:!0,loading:!1,errTip:!1},n.handleUserIdChange=n.handleUserIdChange.bind(Object(k.a)(Object(k.a)(n))),n.loginFun=n.loginFun.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.setState({userName:x("").userName})}},{key:"handleUserIdChange",value:function(e){var t=e.target.value;this.setState({userID:t}),t.length?(this.setState({userName:x(t).userName}),t.length<6||t.length>12?this.setState({errTip:!0,loginDisabled:!0}):this.setState({errTip:!1,loginDisabled:!1})):this.setState({errTip:!1,loginDisabled:!0})}},{key:"loginFun",value:function(){if(S);else{var e=se.getInstance().generateKitTokenForTest(j,N,this.state.userID);this.zimKitLogin(e)}}},{key:"zimKitLogin",value:function(e){var t=this;this.setState({loginDisabled:!0,loading:!0});var n={userID:this.state.userID,userName:this.state.userName,userAvatarUrl:D(this.state.userID)};se.getInstance().connectUser(n,e).then(function(){t.setState({loginDisabled:!1,loading:!1}),function(e){localStorage.setItem("userInfo",JSON.stringify(e))}(n),function(e){var t=localStorage.userList?JSON.parse(localStorage.userList):[];!t.find(function(t){return e.userID===t.userID})&&t.push(e),localStorage.setItem("userList",JSON.stringify(t))}(n),t.props.login()}).catch(function(e){console.log("kitlog login err",e),t.setState({errTip:!0,loginDisabled:!0,loading:!1})})}},{key:"render",value:function(){return i.a.createElement("div",{id:"login-con"},i.a.createElement("div",{id:"login"},this.props.isLoggedIn&&i.a.createElement(L.a,{to:"/main",replace:!0}),i.a.createElement("div",{className:"login-box"},i.a.createElement("div",{className:"welcome-box"},i.a.createElement("div",{className:"welcome-text"},ce.t("demo_welcome"))),i.a.createElement("div",{className:"form ".concat("en"===ce.language?"en-form":null)},i.a.createElement("div",{className:"id"},i.a.createElement("div",{className:"label"},ce.t("demo_user_id_login")),i.a.createElement("input",{className:"en"===ce.language?"en-input":"",placeholder:ce.t("demo_input_placeholder_w"),onInput:this.handleUserIdChange}),i.a.createElement("div",{className:"login-err-tip",style:{display:this.state.errTip?"block":"none"}},ce.t("demo_input_user_id_error_tips"))),i.a.createElement("div",{className:"name"},i.a.createElement("div",{className:"label"},ce.t("demo_user_name_w")),i.a.createElement("div",{id:"userName"},this.state.userName)),i.a.createElement("button",{className:"login-btn",onClick:this.loginFun,disabled:this.state.loginDisabled},this.state.loading?i.a.createElement("div",{className:"loading-icon"}):null,ce.t("demo_login"))))))}}]),t}(i.a.Component),ue=Object(l.b)(v,function(e){return{login:function(t){return e(m(t))}}})(le),he=function(e){function t(){return Object(b.a)(this,t),Object(I.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(C.a)(t,[{key:"clearConversationUnreadMessageCount",value:function(){se.getInstance().zim.clearConversationUnreadMessageCount(this.conversationID,this.type)}}]),t}(function e(t){Object(b.a)(this,e),this.conversationID=void 0,this.conversationName=void 0,this.conversationAvatarUrl=void 0,this.type=void 0,this.unreadMessageCount=void 0,this.lastMessage=void 0,this.orderKey=void 0,this.notificationStatus=void 0,this.conversationID=t.conversationID,this.conversationName=t.conversationName,this.conversationAvatarUrl=t.conversationAvatarUrl,this.type=t.type,this.unreadMessageCount=t.unreadMessageCount,this.lastMessage=t.lastMessage,this.orderKey=t.orderKey,this.notificationStatus=t.notificationStatus}),ge=function(){function e(){return Object(b.a)(this,e),this.pagePullCount=100,this.loadStatus=0,this.conversationList=new Map,this.totalUnreadMessageCount=0,this.isAbnormal=!1,this.activeConversationID="",e.instance||(e.instance=this,e.instance.initListenerHandle()),e.instance}return Object(C.a)(e,[{key:"initListenerHandle",value:function(){var e=this;F.getInstance().addEventListener(q.zimConversationTotalUnreadMessageCountUpdated,[function(t){e.totalUnreadMessageCount=t.totalUnreadMessageCount}]),F.getInstance().addEventListener(q.zimConversationChanged,[function(t){if(console.log("kitlog conversation changed callback",t),2===e.loadStatus){var n=!1,a=!1,r=!1;t.infoList.forEach(function(t){switch(t.event){case 1:if(e.conversationList.size){var i=!1;e.conversationList.get(t.conversation.conversationID)&&(i=!0,e.conversationList.set(t.conversation.conversationID,new he(t.conversation)),e.activeConversationID===t.conversation.conversationID&&(a=!0),n=!0),i||(e.conversationList.set(t.conversation.conversationID,new he(t.conversation)),n=!0,e.activeConversationID||(e.activeConversationID=t.conversation.conversationID,r=!0))}else e.conversationList.set(t.conversation.conversationID,new he(t.conversation)),e.activeConversationID=t.conversation.conversationID,n=!0,r=!0;break;case 0:e.conversationList.set(t.conversation.conversationID,new he(t.conversation)),n=!0,e.activeConversationID||(e.activeConversationID=t.conversation.conversationID,r=!0),2===t.conversation.type&&X.getInstance().queryGroupList();break;case 2:e.conversationList.set(t.conversation.conversationID,new he(t.conversation)),e.activeConversationID===t.conversation.conversationID&&(a=!0),n=!0}}),n&&(e.sortConversationList(),F.getInstance().actionListener(q.zimKitConversationListUpdate,e.conversationList));var i=e.conversationList.get(e.activeConversationID);a&&(F.getInstance().actionListener(q.zimKitCurrentConversationUpdate,i),i.unreadMessageCount&&i.clearConversationUnreadMessageCount()),r&&(F.getInstance().actionListener(q.zimKitCurrentConversationChanged,i),i.unreadMessageCount&&i.clearConversationUnreadMessageCount())}}])}},{key:"loadConversationList",value:function(){var e=this;if(1===this.loadStatus)return Promise.reject();this.loadStatus=1;var t={nextConversation:void 0,count:localStorage.count||this.pagePullCount};return se.getInstance().zim.queryConversationList(t).then(function(t){if(console.log("kitlog queryConversationList data",t),e.loadStatus=2,e.isAbnormal=!1,e.conversationList=new Map,t.conversationList.length){if(t.conversationList.forEach(function(t){0!==t.type&&2!==t.type||e.conversationList.set(t.conversationID,new he(t))}),e.sortConversationList(),e.activeConversationID||(e.activeConversationID=Array.from(e.conversationList)[0][0]),e.conversationList.get(e.activeConversationID).unreadMessageCount)e.conversationList.get(e.activeConversationID).clearConversationUnreadMessageCount();F.getInstance().actionListener(q.zimKitCurrentConversationChanged,e.conversationList.get(e.activeConversationID))}F.getInstance().actionListener(q.zimKitConversationListUpdate,e.conversationList),F.getInstance().actionListener(q.zimKitConversationListQueryAbnormally,!1)}).catch(function(t){console.log("kitlog queryConversationList err",t),e.loadStatus=2,e.isAbnormal=!0,F.getInstance().actionListener(q.zimKitConversationListQueryAbnormally,!0)})}},{key:"loadNextPage",value:function(){var e=this,t={nextConversation:Array.from(this.conversationList)[this.conversationList.size-1][1],count:this.pagePullCount};return se.getInstance().zim.queryConversationList(t).then(function(t){console.log("kitlog loadNextPage data",t),t.conversationList.length&&(t.conversationList.forEach(function(t){0!==t.type&&2!==t.type||e.conversationList.set(t.conversationID,new he(t))}),e.sortConversationList(),F.getInstance().actionListener(q.zimKitConversationListUpdate,e.conversationList))})}},{key:"deleteConversation",value:function(e,t){var n=this;return se.getInstance().zim.deleteConversation(e,t,{isAlsoDeleteServerConversation:!0}).then(function(t){if(n.conversationList.delete(t.conversationID),n.conversationList.size){if(t.conversationID===n.activeConversationID){n.activeConversationID=Array.from(n.conversationList)[0][0];var a=n.conversationList.get(n.activeConversationID);a.unreadMessageCount&&a.clearConversationUnreadMessageCount(),F.getInstance().actionListener(q.zimKitCurrentConversationChanged,n.conversationList.get(Array.from(n.conversationList)[0][0]))}}else n.activeConversationID="";return F.getInstance().actionListener(q.zimKitConversationListUpdate,n.conversationList),F.getInstance().actionListener(q.zimKitDeleteConversation,e),t})}},{key:"sortConversationList",value:function(){var e=Array.from(this.conversationList.values()).sort(function(e,t){return t.orderKey-e.orderKey});this.conversationList=new Map(e.map(function(e){return[e.conversationID,e]}))}},{key:"registerLoginStateChangedCallback",value:function(e){F.getInstance().addEventListener(q.zimKitLoginStateChanged,[e])}},{key:"registerCvTotalUnreadMessageCountUpdatedCallback",value:function(e){F.getInstance().addEventListener(q.zimConversationTotalUnreadMessageCountUpdated,[e])}},{key:"registerConversationListUpdatedCallback",value:function(e){F.getInstance().addEventListener(q.zimKitConversationListUpdate,[e])}},{key:"registerAbnormalCallback",value:function(e){F.getInstance().addEventListener(q.zimKitConversationListQueryAbnormally,[e])}},{key:"registerCurrentCvChangedCallback",value:function(e){F.getInstance().addEventListener(q.zimKitCurrentConversationChanged,[e])}},{key:"unInit",value:function(){this.conversationList=new Map,this.totalUnreadMessageCount=0,this.isAbnormal=!1,this.activeConversationID="",this.loadStatus=0}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();ge.instance=void 0;n(27),n(94);var de=oe.getInstance().getI18next(),me=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).changeNav=n.changeNav.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"changeNav",value:function(){this.props.onNavChange(this.props.item)}},{key:"render",value:function(){return i.a.createElement("div",{className:"title"+(this.props.item.actived?" actived":""),onClick:this.changeNav},this.props.item.text)}}]),t}(i.a.Component),pe=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).state={tabList:n.props.tabList.map(function(e,t){return Object(Z.a)({},e,{actived:!t})})},n.handleNavChange=n.handleNavChange.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"handleNavChange",value:function(e){this.state.tabList.forEach(function(t){t.actived=t.id===e.id}),this.setState({tabList:this.state.tabList}),this.props.onNavChange(e)}},{key:"render",value:function(){var e=this,t=null;return this.state.tabList&&(t=this.state.tabList.map(function(t){return i.a.createElement(me,{key:t.id,item:t,onNavChange:e.handleNavChange})})),i.a.createElement("div",{className:"top"},t)}}]),t}(i.a.Component),ve=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).state={peerErrTip:!1,peerDisabled:!0,groupErrTip:!1,groupDisabled:!0,groupID:"",toUserID:"",groupName:"",userIDList:""},n.closeDialog=n.closeDialog.bind(Object(k.a)(Object(k.a)(n))),n.createPeerChat=n.createPeerChat.bind(Object(k.a)(Object(k.a)(n))),n.createGroupChat=n.createGroupChat.bind(Object(k.a)(Object(k.a)(n))),n.joinGroup=n.joinGroup.bind(Object(k.a)(Object(k.a)(n))),n.handleUserIDInputChange=n.handleUserIDInputChange.bind(Object(k.a)(Object(k.a)(n))),n.handleGroupUserIDInputChange=n.handleGroupUserIDInputChange.bind(Object(k.a)(Object(k.a)(n))),n.handleGroupIDInputChange=n.handleGroupIDInputChange.bind(Object(k.a)(Object(k.a)(n))),n.handleGroupNameInputChange=n.handleGroupNameInputChange.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"closeDialog",value:function(){this.props.onCloseDialog()}},{key:"createPeerChat",value:function(){this.props.onCreatePeerChat(this.state.toUserID)}},{key:"createGroupChat",value:function(){this.props.onCreateGroupChat(this.state.groupName,this.state.userIDList)}},{key:"joinGroup",value:function(){this.props.onJoinGroup(this.state.groupID)}},{key:"handleUserIDInputChange",value:function(e){var t=e.target.value;if(t.length){var n=t.length<6||t.length>12;this.setState({toUserID:t,peerErrTip:n,peerDisabled:n})}else this.setState({toUserID:t,peerErrTip:!1,peerDisabled:!0})}},{key:"handleGroupUserIDInputChange",value:function(e){var t=e.target.value,n=!0,a=!0;if(this.state.groupName.length&&t.length&&(n=!1),t){var r=t.split(";"),i=!1;r.forEach(function(e){(e.length<6||e.length>12)&&(i=!0,n=!0)}),a=i}else a=!1;this.setState({userIDList:t,groupErrTip:a,groupDisabled:n})}},{key:"handleGroupIDInputChange",value:function(e){this.setState({groupID:e.target.value})}},{key:"handleGroupNameInputChange",value:function(e){var t=e.target.value;this.setState({groupName:t,groupDisabled:!(t.length&&this.state.userIDList.length)})}},{key:"render",value:function(){var e=null,t=null,n=this.state,a=n.groupID,r=n.peerDisabled,o=n.groupDisabled,s=n.peerErrTip,c=n.groupErrTip,l=n.toUserID,u=n.userIDList,h=this.props.currentActived;return(s&&l||c&&u)&&(t=i.a.createElement("div",{className:"err-tip"},de.t("demo_input_user_id_error_tips"))),1===h?e=i.a.createElement("div",{className:"peer",key:"peer"},i.a.createElement("div",{className:"input-box"},i.a.createElement("input",{className:"en"===de.language?"en-input":"",type:"text",name:"userID",placeholder:de.t("conversation_enter_touserid_w"),onInput:this.handleUserIDInputChange}),t),i.a.createElement("div",{className:"btn-box"},i.a.createElement("button",{className:"btn cancel-btn",onClick:this.closeDialog},de.t("conversation_cancel")),i.a.createElement("button",{className:"btn create-peer-btn",onClick:this.createPeerChat,disabled:r},de.t("conversation_start_single_chat")))):2===h?e=i.a.createElement("div",{className:"group",key:"group"},i.a.createElement("div",{className:"input-box"},i.a.createElement("input",{className:"en"===de.language?"en-input":"",type:"text",name:"groupName",placeholder:de.t("group_input_group_name"),onInput:this.handleGroupNameInputChange,maxLength:12}),i.a.createElement("input",{className:"en"===de.language?"en-input":"",type:"text",name:"userIDList",placeholder:de.t("group_input_user_id_of_group"),onInput:this.handleGroupUserIDInputChange}),t),i.a.createElement("div",{className:"btn-box"},i.a.createElement("button",{className:"btn cancel-btn",onClick:this.closeDialog},de.t("conversation_cancel")),i.a.createElement("button",{className:"btn create-peer-btn",onClick:this.createGroupChat,disabled:o},de.t("conversation_start_group_chat")))):3===h&&(e=i.a.createElement("div",{className:"attend",key:"attend"},i.a.createElement("div",{className:"input-box"},i.a.createElement("input",{className:"en"===de.language?"en-input":"",type:"text",name:"groupID",placeholder:de.t("group_input_group_id_w"),onInput:this.handleGroupIDInputChange})),i.a.createElement("div",{className:"btn-box"},i.a.createElement("button",{className:"btn cancel-btn",onClick:this.closeDialog},de.t("conversation_cancel")),i.a.createElement("button",{className:"btn create-peer-btn",onClick:this.joinGroup,disabled:!a},de.t("conversation_join_group_chat"))))),i.a.createElement("div",{className:"content"},e)}}]),t}(i.a.Component),fe=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).tabList=[{id:1,text:de.t("conversation_start_single_chat")},{id:2,text:de.t("conversation_start_group_chat")},{id:3,text:de.t("conversation_join_group_chat")}],n.state={currentActived:1},n.handleNavChange=n.handleNavChange.bind(Object(k.a)(Object(k.a)(n))),n.handleCloseDialog=n.handleCloseDialog.bind(Object(k.a)(Object(k.a)(n))),n.handleJoinGroup=n.handleJoinGroup.bind(Object(k.a)(Object(k.a)(n))),n.handleCreatePeerChat=n.handleCreatePeerChat.bind(Object(k.a)(Object(k.a)(n))),n.handleCreateGroupChat=n.handleCreateGroupChat.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"handleNavChange",value:function(e){this.setState({currentActived:e.id})}},{key:"handleCloseDialog",value:function(){this.props.onCloseDialog()}},{key:"handleJoinGroup",value:function(e){this.props.onJoinGroup(e)}},{key:"handleCreatePeerChat",value:function(e){this.props.onCreatePeerChat(e)}},{key:"handleCreateGroupChat",value:function(e,t){this.props.onCreateGroupChat(e,t)}},{key:"render",value:function(){return i.a.createElement("div",{className:"dialog"},i.a.createElement(pe,{tabList:this.tabList,onNavChange:this.handleNavChange}),i.a.createElement(ve,{currentActived:this.state.currentActived,onCloseDialog:this.handleCloseDialog,onJoinGroup:this.handleJoinGroup,onCreatePeerChat:this.handleCreatePeerChat,onCreateGroupChat:this.handleCreateGroupChat}))}}]),t}(i.a.Component),ye=(n(95),oe.getInstance().getI18next());function be(e,t){if(0===e)return"--";var n=new Date(e),a=new Date((new Date).toDateString()),r={1:ye.t("common_monday"),2:ye.t("common_tuesday"),3:ye.t("common_wednesday"),4:ye.t("common_thursday"),5:ye.t("common_friday"),6:ye.t("common_saturday"),0:ye.t("common_sunday")},i=String(n.getFullYear()),o=String(n.getMonth()+1);o.length<1&&(o="0".concat(o));var s=String(n.getDate());1===s.length&&(s="0".concat(s));var c=String(n.getHours());1===c.length&&(c="0".concat(c));var l=String(n.getMinutes());1===l.length&&(l="0".concat(l));var u,h=String(n.getSeconds());(1===h.length&&(h="0".concat(h)),n.getFullYear()!==a.getFullYear())?u=t?"yyyy-MM-dd hh:mm".replace(/yyyy/g,i).replace(/MM/g,o).replace(/dd/g,s).replace(/hh/g,c).replace(/mm/g,l):"yyyy-MM-dd".replace(/yyyy/g,i).replace(/MM/g,o).replace(/dd/g,s):u=e<a.getTime()-5184e5?t?"MM-dd hh:mm".replace(/MM/g,o).replace(/dd/g,s).replace(/hh/g,c).replace(/mm/g,l):"MM-dd".replace(/MM/g,o).replace(/dd/g,s):e<a.getTime()-864e5?t?r[n.getDay()]+" "+"hh:mm".replace(/hh/g,c).replace(/mm/g,l):r[n.getDay()]:e<a.getTime()?t?"".concat(ye.t("common_yesterday")," ")+"hh:mm".replace(/hh/g,c).replace(/mm/g,l):ye.t("common_yesterday"):"hh:mm".replace(/hh/g,c).replace(/mm/g,l);return u}var Ce,Ie=new(n(48).EventEmitter);!function(e){e.ToastOperation="toastOperation",e.DialogOperation="dialogOperation",e.GroupInfoOperation="groupInfoOperation",e.RightClickDialogOperation="rightClickDialogOperation",e.ExpressionBoxOperation="expressionBoxOperation"}(Ce||(Ce={}));var _e=function(e){Ie.emit(Ce.GroupInfoOperation,e)},we=function(e,t){Ie.emit(Ce.ToastOperation,e,t)},Le=function(e,t){Ie.emit(Ce.DialogOperation,e,t)},ke=function(e,t){Ie.emit(Ce.RightClickDialogOperation,e,t)},Ee=Ie;function Me(){Me=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,i=Object.create(r.prototype),o=new w(a||[]);return i._invoke=function(e,t,n){var a="suspendedStart";return function(r,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw i;return k()}for(n.method=r,n.arg=i;;){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var c=l(e,t,n);if("normal"===c.type){if(a=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=c;var u={};function h(){}function g(){}function d(){}var m={};s(m,r,function(){return this});var p=Object.getPrototypeOf,v=p&&p(p(L([])));v&&v!==t&&n.call(v,r)&&(m=v);var f=d.prototype=h.prototype=Object.create(m);function y(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var a;this._invoke=function(r,i){function o(){return new t(function(a,o){!function a(r,i,o,s){var c=l(e[r],e,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){a("next",e,o,s)},function(e){a("throw",e,o,s)}):t.resolve(h).then(function(e){u.value=e,o(u)},function(e){return a("throw",e,o,s)})}s(c.arg)}(r,i,a,o)})}return a=a?a.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=l(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function L(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return g.prototype=d,s(f,"constructor",d),s(d,"constructor",g),g.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,a,r,i){void 0===i&&(i=Promise);var o=new b(c(t,n,a,r),i);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},y(f),s(f,o,"Generator"),s(f,r,function(){return this}),s(f,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return o.type="throw",o.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;_(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}var Oe,xe=oe.getInstance().getI18next(),De=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).switchConversation=n.switchConversation.bind(Object(k.a)(Object(k.a)(n))),n.operationConversation=n.operationConversation.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"switchConversation",value:function(){var e=this.props.conversation;ge.getInstance().activeConversationID!==e.conversationID&&(ge.getInstance().activeConversationID=e.conversationID,e.unreadMessageCount&&e.clearConversationUnreadMessageCount(),F.getInstance().actionListener(q.zimKitCurrentConversationChanged,e))}},{key:"operationConversation",value:function(e){e.preventDefault();var t={x:e.pageX,y:e.pageY,conversationItem:this.props.conversation};ke(!0,t),document.querySelector(".conversation-content").style.overflowY="hidden"}},{key:"nameFormat",value:function(e){return(e.conversationName||e.conversationID).slice(0,1).toLowerCase()}},{key:"render",value:function(){var e=null,t=this.props.conversation,a=this.props.activeConversationID;return t.unreadMessageCount&&(e=i.a.createElement("div",{className:"unread-count"},t.unreadMessageCount>99?"99+":t.unreadMessageCount)),i.a.createElement("div",{className:"conversation-item"+(a&&t.conversationID===a?" actived":""),onClick:this.switchConversation,onContextMenu:this.operationConversation},i.a.createElement("div",{className:"head-portrait"},0===t.type?i.a.createElement("img",{src:t.conversationAvatarUrl?t.conversationAvatarUrl:n(28)}):i.a.createElement("div",{className:"group"}),e),i.a.createElement("div",{className:"conversation-info"},i.a.createElement("div",{className:"info-top"},i.a.createElement("div",{className:"item-name"},t.conversationName||t.conversationID),t.lastMessage?i.a.createElement("div",{className:"item-date"},be(t.lastMessage.timestamp,!1)):null),t.lastMessage?i.a.createElement("div",{className:"item-message"},2===t.lastMessage.sentStatus?i.a.createElement("div",{className:"err-icon"}):null,i.a.createElement("div",{className:"message-text"},1===t.lastMessage.type?t.lastMessage.message:"",11===t.lastMessage.type?xe.t("common_message_photo"):"",12===t.lastMessage.type?xe.t("common_message_file"):"",13===t.lastMessage.type?xe.t("common_message_audio"):"",14===t.lastMessage.type?xe.t("common_message_video"):"")):null))}}]),t}(i.a.Component),je=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).state={isAbnormal:!1,totalUnreadMessageCount:0,conversationList:new Map,showCreateChatDialog:!1,conversationItem:null,activeConversationID:null},n.logout=n.logout.bind(Object(k.a)(Object(k.a)(n))),n.listScroll=n.listScroll.bind(Object(k.a)(Object(k.a)(n))),n.triggerDialog=n.triggerDialog.bind(Object(k.a)(Object(k.a)(n))),n.handleCloseDialog=n.handleCloseDialog.bind(Object(k.a)(Object(k.a)(n))),n.handleCreatePeerChat=n.handleCreatePeerChat.bind(Object(k.a)(Object(k.a)(n))),n.handleCreateGroupChat=n.handleCreateGroupChat.bind(Object(k.a)(Object(k.a)(n))),n.handleJoinGroup=n.handleJoinGroup.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this;se.getInstance().isLoggedIn&&ge.getInstance().loadConversationList(),ge.getInstance().registerLoginStateChangedCallback(function(){var e=Object(V.a)(Me().mark(function e(t){return Me().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&ge.getInstance().loadConversationList();case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),ge.getInstance().registerCvTotalUnreadMessageCountUpdatedCallback(function(t){e.setState({totalUnreadMessageCount:t.totalUnreadMessageCount})}),ge.getInstance().registerConversationListUpdatedCallback(function(t){e.setState({conversationList:t})}),ge.getInstance().registerCurrentCvChangedCallback(function(t){e.setState({activeConversationID:t.conversationID})}),ge.getInstance().registerAbnormalCallback(function(t){e.setState({isAbnormal:t})})}},{key:"componentWillUnmount",value:function(){ge.getInstance().unInit()}},{key:"listScroll",value:function(){var e=document.querySelector(".conversation-content"),t=Math.round(e.scrollTop);t>=e.scrollHeight-e.clientHeight&&ge.getInstance().loadNextPage()}},{key:"triggerDialog",value:function(e){this.setState({showCreateChatDialog:e})}},{key:"handleCloseDialog",value:function(){this.triggerDialog(!1)}},{key:"handleCreatePeerChat",value:function(e){var t=this.state.conversationList.get(e);if(t)ge.getInstance().activeConversationID=t.conversationID,F.getInstance().actionListener(q.zimKitCurrentConversationChanged,t);else{var n={conversationID:e,conversationName:"",type:0};ge.getInstance().activeConversationID=e,F.getInstance().actionListener(q.zimKitCurrentConversationChanged,n)}this.triggerDialog(!1)}},{key:"handleCreateGroupChat",value:function(e,t){var n=this,a=t.split(";").filter(function(e){return e});X.getInstance().createGroup("",e,a).then(function(e){var t=e.groupInfo,a=e.errorUserList,r=t.baseInfo;if(a.length){var i=a.map(function(e){return e.userID}).join(" ");Le(!0,{desc:"".concat(xe.t("message_user_not_exit_please_again").replace("%s",i)),confirmText:xe.t("common_return"),hasCloseBtn:!1})}else{n.triggerDialog(!1);var o={conversationID:r.groupID,conversationName:r.groupName,type:2};ge.getInstance().activeConversationID=o.conversationID,F.getInstance().actionListener(q.zimKitCurrentConversationChanged,o)}}).catch(function(){n.triggerDialog(!1)})}},{key:"handleJoinGroup",value:function(e){var t=this;X.getInstance().joinGroup(e).then(function(e){e.groupInfo.baseInfo;t.triggerDialog(!1);var n={conversationID:e.groupInfo.baseInfo.groupID,conversationName:e.groupInfo.baseInfo.groupName,type:2};ge.getInstance().activeConversationID=n.conversationID,F.getInstance().actionListener(q.zimKitCurrentConversationChanged,n)}).catch(function(t){switch(t.code){case 6000523:Le(!0,{desc:"".concat(xe.t("group_group_id_not_exit").replace("%s",e)),confirmText:xe.t("common_return"),hasCloseBtn:!1});break;case 6000522:we(!0,{text:"".concat(xe.t("group_repeat_join_group_chat")),type:"default"});break;default:we(!0,{text:t.message,type:"default"})}})}},{key:"logout",value:function(){se.getInstance().disconnectUser()}},{key:"render",value:function(){var e=this,t=null,n=null,a=null;(this.state.totalUnreadMessageCount&&(t=i.a.createElement("div",{className:"total"},this.state.totalUnreadMessageCount>99?"99+":this.state.totalUnreadMessageCount)),this.state.showCreateChatDialog&&(n=i.a.createElement(fe,{onCloseDialog:this.handleCloseDialog,onCreatePeerChat:this.handleCreatePeerChat,onCreateGroupChat:this.handleCreateGroupChat,onJoinGroup:this.handleJoinGroup})),this.state.conversationList.size)&&(a=Array.from(this.state.conversationList.values()).map(function(t,n){return i.a.createElement(De,{key:t.conversationID+n,conversation:t,activeConversationID:e.state.activeConversationID})}));return i.a.createElement("div",{className:"conversation"},i.a.createElement("div",{className:"left-banner"},i.a.createElement("div",{className:"top"},i.a.createElement("div",{className:"item"},i.a.createElement("div",{className:"icon message-icon"}),i.a.createElement("div",{className:"text"},xe.t("conversation_message_total_count")),t),i.a.createElement("div",{className:"item",onClick:this.triggerDialog.bind(this,!0)},i.a.createElement("div",{className:"icon create-chat-icon"}),i.a.createElement("div",{className:"text create-chat-text"},xe.t("conversation_start_chat_w")))),i.a.createElement("div",{className:"item",onClick:this.logout},i.a.createElement("div",{className:"icon exit-icon"}),i.a.createElement("div",{className:"text exit-text"},xe.t("common_logout")))),this.state.isAbnormal?i.a.createElement("div",{className:"abnormal-content"},i.a.createElement("div",{className:"btn reload-btn",onClick:ge.getInstance().loadConversationList.bind(ge.getInstance())},xe.t("conversation_reload"))):this.state.conversationList.size?i.a.createElement("div",{className:"conversation-content",onScroll:this.listScroll},a):i.a.createElement("div",{className:"default-content"},i.a.createElement("div",{className:"text"},xe.t("conversation_empty"))),n)}}]),t}(i.a.Component),Ne=n(10),Se=function e(t){Object(b.a)(this,e),this.chatID=void 0,this.chatType=void 0,this.chatName=void 0,this.chatAvatarUrl=void 0,this.chatID=t.conversationID,this.chatType=t.type,this.chatName=t.conversationName,this.chatAvatarUrl=t.conversationAvatarUrl},Ae=function e(t){Object(b.a)(this,e),this.mMessage=void 0,this.senderUserName=void 0,this.senderUserAvatarUrl=void 0,this.loadStatus=void 0,this.type=void 0,this.selected=void 0,this.mMessage=t.mMessage,this.senderUserName=t.senderUserName,this.senderUserAvatarUrl=t.senderUserAvatarUrl,this.loadStatus=t.loadStatus,this.type=t.type,this.selected=t.selected};!function(e){e[e.Tip=99]="Tip"}(Oe||(Oe={}));var Ue=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).thumbnailImgWidth=void 0,n.thumbnailImgHeight=void 0,n.thumbnailImgConWidth=void 0,n.thumbnailImgConHeight=void 0,n.mMessage=void 0,n.thumbnailImgWidth=e.thumbnailImgWidth,n.thumbnailImgHeight=e.thumbnailImgHeight,n.thumbnailImgConWidth=e.thumbnailImgConWidth,n.thumbnailImgConHeight=e.thumbnailImgConHeight,n.mMessage=e.mMessage,n}return Object(w.a)(t,e),t}(Ae),Ge=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).mMessage=void 0,n.type=void 0,n.message=void 0,n.mMessage=e.mMessage,n.type=e.type,n.message=e.message,n}return Object(w.a)(t,e),t}(Ae),ze=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).isPlaying=void 0,n.mMessage=void 0,n.mMessage=e.mMessage,n.isPlaying=e.isPlaying,n}return Object(w.a)(t,e),t}(Ae),Te=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).thumbnailImgWidth=void 0,n.thumbnailImgHeight=void 0,n.thumbnailImgConWidth=void 0,n.thumbnailImgConHeight=void 0,n.mMessage=void 0,n.mMessage=e.mMessage,n.thumbnailImgWidth=e.thumbnailImgWidth,n.thumbnailImgHeight=e.thumbnailImgHeight,n.thumbnailImgConWidth=e.thumbnailImgConWidth,n.thumbnailImgConHeight=e.thumbnailImgConHeight,n}return Object(w.a)(t,e),t}(Ae),Pe=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).mMessage=void 0,n.mMessage=e.mMessage,n}return Object(w.a)(t,e),t}(Ae),He=function(e){var t=e;switch(e.mMessage.type){case 1:t=new Ge(e);break;case 11:t=new Ue(e);break;case 12:t=new Pe(e);break;case 13:t=new ze(e);break;case 14:t=new Te(e)}return t},Ke={normal:0,multiSelect:1};function qe(){qe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,i=Object.create(r.prototype),o=new w(a||[]);return i._invoke=function(e,t,n){var a="suspendedStart";return function(r,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw i;return k()}for(n.method=r,n.arg=i;;){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var c=l(e,t,n);if("normal"===c.type){if(a=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=c;var u={};function h(){}function g(){}function d(){}var m={};s(m,r,function(){return this});var p=Object.getPrototypeOf,v=p&&p(p(L([])));v&&v!==t&&n.call(v,r)&&(m=v);var f=d.prototype=h.prototype=Object.create(m);function y(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var a;this._invoke=function(r,i){function o(){return new t(function(a,o){!function a(r,i,o,s){var c=l(e[r],e,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){a("next",e,o,s)},function(e){a("throw",e,o,s)}):t.resolve(h).then(function(e){u.value=e,o(u)},function(e){return a("throw",e,o,s)})}s(c.arg)}(r,i,a,o)})}return a=a?a.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=l(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function L(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return g.prototype=d,s(f,"constructor",d),s(d,"constructor",g),g.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,a,r,i){void 0===i&&(i=Promise);var o=new b(c(t,n,a,r),i);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},y(f),s(f,o,"Generator"),s(f,r,function(){return this}),s(f,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return o.type="throw",o.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;_(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}var Be=oe.getInstance().getI18next(),Fe=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(I.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).currentMessageList=[],n.messageCount=30,n.memberList=[],n.selectedList=[],n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"queryHistoryMessage",value:function(e,t){var n=this,a={nextMessage:this.currentMessageList.length?this.currentMessageList[0].mMessage:void 0,count:this.messageCount,reverse:!0};return se.getInstance().zim.queryHistoryMessage(e,t,a).then(function(e){e.messageList.length&&(e.messageList.forEach(function(e){var a={mMessage:e};if(2===t){var r=n.memberList.length&&n.memberList.filter(function(t){return t.userID===e.senderUserID})[0];a.senderUserName=r&&r.userName||"",a.senderUserAvatarUrl=r&&r.memberAvatarUrl||""}13===e.type&&(a.loadStatus=0,a.isPlaying=!1),n.currentMessageList.some(function(t){return t.mMessage.messageID===e.messageID})||n.currentMessageList.push(He(a))}),n.currentMessageList.sort(function(e,t){return e.mMessage.orderKey-t.mMessage.orderKey}),F.getInstance().actionListener(q.zimKitCurrentChatUpdated,n)),console.log("kitlog queryHistoryMessage data:",e,"messageList:",n.currentMessageList)})}},{key:"sendPeerMessage",value:function(e){var t=this;if(/\S/.test(e)){var n=He({senderUserName:se.getInstance().userInfo.userName,senderUserAvatarUrl:se.getInstance().userInfo.userAvatarUrl,loadStatus:0,mMessage:{type:1,message:e,senderUserID:se.getInstance().userInfo.userID,sentStatus:0}});return this.currentMessageList.push(n),F.getInstance().actionListener(q.zimKitCurrentChatUpdated,this),se.getInstance().zim.sendPeerMessage(n.mMessage,this.chatID,{priority:1}).then(function(e){console.log("kitlog sendPeerMessage data:",e,"message:",n,"messageList:",t.currentMessageList)}).catch(function(e){switch(console.log("kitlog sendPeerMessage err",e),e.code){case 6000204:var n=He({type:99,senderUserName:se.getInstance().userInfo.userName,senderUserAvatarUrl:se.getInstance().userInfo.userAvatarUrl,loadStatus:0,mMessage:{messageID:String((new Date).getTime()),message:"".concat(Be.t("message_user_not_exit_please_again").replace("%s",t.chatID)),senderUserID:se.getInstance().userInfo.userID,sentStatus:0}});t.currentMessageList.push(n);break;case 6000104:we(!0,{text:"".concat(Be.t("message_network_anomaly")),type:"default"});break;default:we(!0,{text:e.message,type:"default"})}}).finally(function(){F.getInstance().actionListener(q.zimKitCurrentChatUpdated,t)})}we(!0,{text:"".concat(Be.t("message_cant_send_empty_msg")),type:"default"})}},{key:"sendGroupMessage",value:function(e){var t=this;if(/\S/.test(e)){var n=He({senderUserName:se.getInstance().userInfo.userName,senderUserAvatarUrl:se.getInstance().userInfo.userAvatarUrl,loadStatus:0,mMessage:{type:1,message:e,senderUserID:se.getInstance().userInfo.userID,sentStatus:0}});return this.currentMessageList.push(n),F.getInstance().actionListener(q.zimKitCurrentChatUpdated,this),se.getInstance().zim.sendGroupMessage(n.mMessage,this.chatID,{priority:1}).then(function(e){console.log("kitlog sendGroupMessage data:",e,"message:",n,"messageList:",t.currentMessageList)}).catch(function(e){switch(console.log("kitlog sendGroupMessage err",e),e.code){case 6000104:we(!0,{text:"".concat(Be.t("message_network_anomaly")),type:"default"});break;default:we(!0,{text:e.message,type:"default"})}}).finally(function(){F.getInstance().actionListener(q.zimKitCurrentChatUpdated,t)})}we(!0,{text:"".concat(Be.t("message_cant_send_empty_msg")),type:"default"})}},{key:"sendMediaMessage",value:function(e,t,n){var a=this,r=He({senderUserName:se.getInstance().userInfo.userName,senderUserAvatarUrl:se.getInstance().userInfo.userAvatarUrl,loadStatus:0,mMessage:{type:n.fileType,fileLocalPath:e,senderUserID:se.getInstance().userInfo.userID,sentStatus:0,messageID:(new Date).getTime()}});if(n)switch(n.fileType){case 12:r.mMessage.fileName=e.name,r.mMessage.fileSize=e.size;break;case 13:r.mMessage.audioDuration=n.audioDuration;break;case 14:r.mMessage.videoDuration=n.videoDuration}return this.currentMessageList.push(r),F.getInstance().actionListener(q.zimKitCurrentChatUpdated,this),se.getInstance().zim.sendMediaMessage(r.mMessage,this.chatID,this.chatType,{priority:1},t).then(function(e){console.log("kitlog sendMediaMessage data:",e,"message:",r,"messageList:",a.currentMessageList)}).catch(function(e){switch(console.log("kitlog sendMediaMessage err:",e),e.code){case 6000212:we(!0,{text:"".concat(Be.t("message_size_over_limit")),type:"default"});break;case 6000104:we(!0,{text:"".concat(Be.t("message_network_anomaly")),type:"default"});break;case 6000214:e.message.includes("110020")?we(!0,{text:"".concat(Be.t("message_photo_size_err_tips")),type:"default"}):e.message.includes("110024")?we(!0,{text:"".concat(Be.t("message_video_size_err_tips")),type:"default"}):e.message.includes("110017")&&we(!0,{text:"".concat(Be.t("message_file_size_err_tips")),type:"default"});break;default:we(!0,{text:e.message,type:"default"})}}).finally(function(){F.getInstance().actionListener(q.zimKitCurrentChatUpdated,a)})}},{key:"queryCurrentChatGroupMemberList",value:function(){var e=Object(V.a)(qe().mark(function e(t){var n,a=this;return qe().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=X.getInstance().groupList.get(t),e.abrupt("return",X.getInstance().queryGroupMemberList(t).then(function(e){console.log("kitlog queryGroupMemberList data",e),a.memberList=e.userList,n&&(n.memberList=e.userList)}).catch(function(e){console.log("kitlog queryGroupMemberList err",e)}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteMessages",value:function(e){var t=this,n=[];return e?n.push(e):n=this.selectedList,se.getInstance().zim.deleteMessages(n,this.chatID,this.chatType,{isAlsoDeleteServerMessage:!0}).then(function(a){console.log("kitlog deleteMessages data",a),n.forEach(function(e){var n=t.currentMessageList.findIndex(function(t){return t.mMessage.messageID===e.messageID});t.currentMessageList.splice(n,1)}),e||(t.selectedList=[]),we(!0,{type:"default",text:Be.t("message_delete_succeed_tips")})}).catch(function(e){console.log("kitlog deleteMessages err",e)}).finally(function(){F.getInstance().actionListener(q.zimKitCurrentChatUpdated,t),Je.getInstance().mode=Ke.normal,F.getInstance().actionListener(q.zimKitModeChanged,Je.getInstance().mode)})}}]),t}(Se),Re=function(e){function t(){return Object(b.a)(this,t),Object(I.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(w.a)(t,e),Object(C.a)(t,[{key:"queryUsersInfo",value:function(){var e=this;return se.getInstance().zim.queryUsersInfo([this.userID],{isQueryFromServer:!0}).then(function(t){console.log("kitlog queryUsersInfo success===",t),t.userList.forEach(function(t){t.baseInfo.userID===e.userID&&(e.userName=t.baseInfo.userName,e.userAvatarUrl=t.userAvatarUrl)})}).catch(function(e){console.log("kitlog queryUsersInfo err",e)})}}]),t}(function e(t){Object(b.a)(this,e),this.userID=void 0,this.userName=void 0,this.userAvatarUrl=void 0,this.userID=t.userID,this.userName=t.userName,this.userAvatarUrl=t.userAvatarUrl});function We(){We=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,i=Object.create(r.prototype),o=new w(a||[]);return i._invoke=function(e,t,n){var a="suspendedStart";return function(r,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw i;return k()}for(n.method=r,n.arg=i;;){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var c=l(e,t,n);if("normal"===c.type){if(a=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=c;var u={};function h(){}function g(){}function d(){}var m={};s(m,r,function(){return this});var p=Object.getPrototypeOf,v=p&&p(p(L([])));v&&v!==t&&n.call(v,r)&&(m=v);var f=d.prototype=h.prototype=Object.create(m);function y(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var a;this._invoke=function(r,i){function o(){return new t(function(a,o){!function a(r,i,o,s){var c=l(e[r],e,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){a("next",e,o,s)},function(e){a("throw",e,o,s)}):t.resolve(h).then(function(e){u.value=e,o(u)},function(e){return a("throw",e,o,s)})}s(c.arg)}(r,i,a,o)})}return a=a?a.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=l(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function L(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return g.prototype=d,s(f,"constructor",d),s(d,"constructor",g),g.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,a,r,i){void 0===i&&(i=Promise);var o=new b(c(t,n,a,r),i);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},y(f),s(f,o,"Generator"),s(f,r,function(){return this}),s(f,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return o.type="throw",o.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;_(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}var Je=function(){function e(){return Object(b.a)(this,e),this.chatList=new Map,this.currentConversation={},this.currentChat={},this.mode=Ke.normal,e.instance||(e.instance=this,e.instance.initListenerHandle()),e.instance}return Object(C.a)(e,[{key:"initListenerHandle",value:function(){var e=this;F.getInstance().addEventListener(q.zimKitCurrentConversationChanged,[function(){var t=Object(V.a)(We().mark(function t(n){var a,r;return We().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("kitlog conversation changed",n),e.mode=Ke.normal,F.getInstance().actionListener(q.zimKitModeChanged,e.mode),n.conversationName||(a={userID:n.conversationID,userName:n.conversationName,userAvatarUrl:n.conversationAvatarUrl},(r=new Re(a)).queryUsersInfo().then(function(){n.conversationName=r.userName,n.conversationAvatarUrl=r.userAvatarUrl})),e.currentConversation=n,e.chatList.get(n.conversationID)?e.currentChat=e.chatList.get(n.conversationID):e.currentChat=new Fe(n),!se.getInstance().networkStatus){t.next=12;break}if(2!==n.type||e.currentChat.memberList.length){t.next=10;break}return t.next=10,e.currentChat.queryCurrentChatGroupMemberList(n.conversationID);case 10:e.currentChat.currentMessageList=[],e.currentChat.queryHistoryMessage(e.currentConversation.conversationID,e.currentConversation.type);case 12:e.chatList.set(n.conversationID,e.currentChat),F.getInstance().actionListener(q.zimKitCurrentChatChanged,e.currentChat);case 14:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()]),F.getInstance().addEventListener(q.zimKitCurrentConversationUpdate,[function(t){if(e.currentConversation=t,0===t.type&&!e.currentChat.chatAvatarUrl){var n={userID:t.conversationID,userName:t.conversationName,userAvatarUrl:t.conversationAvatarUrl};new Re(n).queryUsersInfo().then(function(){e.currentChat.chatName=e.currentConversation.conversationName,e.currentChat.chatAvatarUrl=e.currentConversation.conversationAvatarUrl})}}]),F.getInstance().addEventListener(q.zimReceivePeerMessage,[function(t){(console.log("kitlog receivePeerMessage",t),e.currentConversation.conversationID===t.fromConversationID)&&t.messageList.sort(function(e,t){return e.orderKey-t.orderKey}).forEach(function(t){var n={mMessage:t};e.currentChat.currentMessageList.some(function(e){return e.mMessage.messageID===t.messageID})||(e.currentChat.currentMessageList.push(He(n)),F.getInstance().actionListener(q.zimKitCurrentChatUpdated,e.currentChat))})}]),F.getInstance().addEventListener(q.zimReceiveGroupMessage,[function(){var t=Object(V.a)(We().mark(function t(n){return We().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log("kitlog zimReceiveGroupMessage",n,e.currentChat),e.currentConversation.conversationID===n.fromConversationID&&n.messageList.sort(function(e,t){return e.orderKey-t.orderKey}).forEach(function(){var t=Object(V.a)(We().mark(function t(n){var a,r,i;return We().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.currentChat.memberList,r=a&&a.filter(function(e){return e.userID===n.senderUserID})[0]){t.next=5;break}return t.next=5,e.currentChat.queryCurrentChatGroupMemberList(e.currentConversation.conversationID).then(function(){a=e.currentChat.memberList,r=a.filter(function(e){return e.userID===n.senderUserID})[0]});case 5:(i={mMessage:n}).senderUserName=r&&r.userName||"",i.senderUserAvatarUrl=r&&r.memberAvatarUrl||"",e.currentChat.currentMessageList.some(function(e){return e.mMessage.messageID===n.messageID})||(e.currentChat.currentMessageList.push(He(i)),F.getInstance().actionListener(q.zimKitCurrentChatUpdated,e.currentChat));case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()]),F.getInstance().addEventListener(q.zimKitDeleteConversation,[function(t){t===e.currentChat.chatID&&(e.currentChat={},e.currentConversation={},F.getInstance().actionListener(q.zimKitCurrentChatChanged,e.currentChat))}]),F.getInstance().addEventListener(q.zimKitNetworkChanged,[function(t){1===t&&F.getInstance().actionListener(q.zimKitCurrentChatUpdated,e.currentChat)}])}},{key:"registerLoginUserUpdatedCallback",value:function(e){F.getInstance().addEventListener(q.zimKitLoginUserUpdate,[e])}},{key:"registerCurrentChatChangedCallback",value:function(e){F.getInstance().addEventListener(q.zimKitCurrentChatChanged,[e])}},{key:"removeCurrentChatChangedCallback",value:function(e){F.getInstance().removeEventListener(q.zimKitCurrentChatChanged,[e])}},{key:"registerCurrentChatUpdatedCallback",value:function(e){F.getInstance().addEventListener(q.zimKitCurrentChatUpdated,[e])}},{key:"removeCurrentChatUpdatedCallback",value:function(e){F.getInstance().removeEventListener(q.zimKitCurrentChatUpdated,[e])}},{key:"registerModeChangedCallback",value:function(e){F.getInstance().addEventListener(q.zimKitModeChanged,[e])}},{key:"removeModeChangedCallback",value:function(e){F.getInstance().removeEventListener(q.zimKitModeChanged,[e])}},{key:"initWithConversationID",value:function(e,t,n){if(2===t&&!n){var a=X.getInstance().groupList.get(e);n=a&&a.baseInfo.groupName}F.getInstance().actionListener(q.zimKitCurrentConversationChanged,{conversationID:e,type:t,conversationName:n})}},{key:"unInit",value:function(){this.chatList=new Map,this.currentConversation={},this.currentChat={}}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();Je.instance=void 0;n(96);var Ve=["\ud83d\ude00","\ud83d\ude03","\ud83d\ude04","\ud83d\ude01","\ud83d\ude06","\ud83d\ude05","\ud83d\ude02","\ud83e\udd23","\ud83d\ude07","\ud83d\ude09","\ud83d\ude0a","\ud83d\ude42","\ud83d\ude43","\ud83d\ude0b","\ud83d\ude0c","\ud83d\ude0d","\ud83e\udd70","\ud83d\ude18","\ud83d\ude17","\ud83d\ude19","\ud83d\ude1a","\ud83e\udd2a","\ud83d\ude1c","\ud83d\ude1d","\ud83d\ude1b","\ud83e\udd11","\ud83d\ude0e","\ud83e\udd13","\ud83e\uddd0","\ud83e\udd20","\ud83e\udd73","\ud83e\udd21","\ud83d\ude0f","\ud83d\ude36","\ud83d\ude10","\ud83d\ude11","\ud83d\ude12","\ud83d\ude44","\ud83e\udd28","\ud83e\udd14","\ud83e\udd2b","\ud83e\udd2d","\ud83e\udd17","\ud83e\udd25","\ud83d\ude33","\ud83d\ude1e","\ud83d\ude1f","\ud83d\ude24","\ud83d\ude20","\ud83d\ude21","\ud83e\udd2c","\ud83d\ude14","\ud83d\ude15","\ud83d\ude41","\ud83d\ude2c","\ud83e\udd7a","\ud83d\ude23","\ud83d\ude16","\ud83d\ude2b","\ud83d\ude29","\ud83e\udd71","\ud83d\ude2a","\ud83d\ude2e","\ud83d\ude31","\ud83d\ude28","\ud83d\ude30","\ud83d\ude25","\ud83d\ude13","\ud83d\ude2f","\ud83d\ude26","\ud83d\ude27","\ud83d\ude22","\ud83d\ude2d","\ud83e\udd24","\ud83e\udd29","\ud83d\ude35","\ud83e\udd74","\ud83d\ude32","\ud83e\udd2f","\ud83e\udd10","\ud83d\ude37","\ud83e\udd15","\ud83e\udd12","\ud83e\udd2e","\ud83e\udd22","\ud83e\udd27","\ud83e\udd75","\ud83e\udd76","\ud83d\ude34","\ud83d\udca4","\ud83d\ude08","\ud83d\udc7f","\ud83d\udc79","\ud83d\udc7a","\ud83d\udca9","\ud83d\udc7b","\ud83d\udc80","\ud83d\udc7d","\ud83e\udd16","\ud83c\udf83","\ud83d\ude3a","\ud83d\ude38","\ud83d\ude39","\ud83d\ude3b","\ud83d\ude3c","\ud83d\ude3d","\ud83d\ude40","\ud83d\ude3f","\ud83d\ude3e","\ud83d\udc50","\ud83e\udd32","\ud83d\ude4c","\ud83d\udc4f","\ud83d\ude4f","\ud83e\udd1d","\ud83d\udc4d","\ud83d\udc4e","\ud83d\udc4a","\u270a","\ud83e\udd1b","\ud83e\udd1c","\ud83e\udd1e","\ud83e\udd18","\ud83e\udd1f","\ud83d\udc4c","\ud83e\udd0f","\ud83d\udc48","\ud83d\udc49","\ud83d\udc46","\ud83d\udc47","\u270b","\ud83e\udd1a","\ud83d\udd90","\ud83d\udd96","\ud83d\udc4b","\ud83e\udd19","\ud83d\udcaa","\ud83e\uddbe","\ud83d\udd95","\ud83e\udd33","\ud83d\udc85","\ud83e\uddb5","\ud83e\uddbf","\ud83e\uddb6","\ud83d\udc44","\ud83e\uddb7","\ud83d\udc45","\ud83d\udc42","\ud83e\uddbb","\ud83d\udc43","\ud83d\udc41","\ud83d\udc40","\ud83e\udde0","\ud83e\uddb4","\ud83d\udc76","\ud83d\udc67","\ud83e\uddd2","\ud83d\udc66","\ud83d\udc69","\ud83e\uddd1","\ud83d\udc68","\ud83d\udc69\u200d\ud83e\uddb1","\ud83d\udc68\u200d\ud83e\uddb1","\ud83d\udc69\u200d\ud83e\uddb0","\ud83d\udc68\u200d\ud83e\uddb0","\ud83d\udc71","\ud83d\udc69\u200d\ud83e\uddb3","\ud83d\udc68\u200d\ud83e\uddb3","\ud83d\udc69\u200d\ud83e\uddb2","\ud83d\udc68\u200d\ud83e\uddb2","\ud83e\uddd4","\ud83d\udc75","\ud83e\uddd3","\ud83d\udc74","\ud83d\udc72","\ud83d\udc73\u200d","\ud83e\uddd5","\ud83d\udc7c","\ud83d\udc78","\ud83e\udd34","\ud83d\udc70","\ud83e\udd35","\ud83d\ude47","\ud83d\udc81","\ud83d\ude45\u200d","\ud83d\ude46","\ud83e\udd37","\ud83d\ude4b","\ud83e\udd26","\ud83e\uddcf","\ud83d\ude4e","\ud83d\ude4d","\ud83d\udc87","\ud83d\udc86","\ud83e\udd30","\ud83e\udd31","\ud83e\uddce","\ud83e\uddcd","\ud83d\udc83","\ud83d\udd7a","\ud83d\udc6b","\ud83d\udc6d","\ud83d\udc6c","\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1","\ud83e\udde1","\ud83d\udc9b","\ud83d\udc9a","\ud83d\udc99","\ud83d\udc9c","\ud83e\udd0e","\ud83d\udda4","\ud83e\udd0d","\ud83d\udc94","\ud83d\udc95","\ud83d\udc9e","\ud83d\udc93","\ud83d\udc97","\ud83d\udc96","\ud83d\udc98","\ud83d\udc9d","\ud83d\udc9f"],Ye=(n(97),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).chooseExpression=n.chooseExpression.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"chooseExpression",value:function(e){this.props.onAddExpression(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"expression-box"},Ve.map(function(t,n){return i.a.createElement("div",{className:"item",key:n,onClick:e.chooseExpression.bind(e,t)},t)}))}}]),t}(i.a.Component)),Qe=(n(98),oe.getInstance().getI18next()),Xe=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).state={isWidthExceed:!1,isHeightExceed:!1,isError:!1},n.handleClose=n.handleClose.bind(Object(k.a)(Object(k.a)(n))),n.handleDownload=n.handleDownload.bind(Object(k.a)(Object(k.a)(n))),n.loadImg=n.loadImg.bind(Object(k.a)(Object(k.a)(n))),n.reload=n.reload.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"componentWillMount",value:function(){if(11===this.props.largeImg.mMessage.type){if(this.props.largeImg.mMessage.largeImageHeight>532)532/this.props.largeImg.mMessage.largeImageHeight*this.props.largeImg.mMessage.largeImageWidth>800?this.setState({isWidthExceed:!0}):this.setState({isHeightExceed:!0});if(this.props.largeImg.mMessage.largeImageWidth>800)800/this.props.largeImg.mMessage.largeImageWidth*this.props.largeImg.mMessage.largeImageHeight>532?this.setState({isHeightExceed:!0}):this.setState({isWidthExceed:!0})}}},{key:"componentDidMount",value:function(){var e=this;11===this.props.largeImg.mMessage.type&&this.loadImg(),F.getInstance().addEventListener(q.zimKitNetworkChanged,[function(t){1===t&&e.reload()}])}},{key:"handleClose",value:function(){this.props.close()}},{key:"handleDownload",value:function(){var e=this,t=new XMLHttpRequest;t.open("GET",this.props.largeImg.mMessage.fileDownloadUrl,!0),t.responseType="blob",t.onload=function(){if(200===t.status){var n=document.createElement("a");n.href=window.URL.createObjectURL(t.response),n.download=e.props.largeImg.mMessage.fileName,n.click()}},t.send()}},{key:"loadImg",value:function(){var e=this,t=document.querySelector("#img"),n=document.querySelector(".err-box");t&&(t.src=this.props.largeImg.mMessage.largeImageDownloadUrl,t.onload=function(){e.setState({isError:!1}),n.style.zIndex="1"},t.onerror=function(){e.setState({isError:!0}),n.style.zIndex="3"})}},{key:"loadVideo",value:function(){var e=document.querySelector("#video");e&&(e.src=this.props.largeImg.mMessage.fileDownloadUrl,e.onloadedmetadata=function(){e.play()})}},{key:"reload",value:function(){11===this.props.largeImg.mMessage.type?this.loadImg():this.loadVideo()}},{key:"render",value:function(){var e=null;return e=this.state.isError?i.a.createElement("div",{className:"btn reload-btn",onClick:this.reload},Qe.t("album_redownload_image")):i.a.createElement("div",{className:"operation-item download-icon",title:"download",onClick:this.handleDownload}),i.a.createElement("div",{className:"large-img-container"},i.a.createElement("div",{className:"large-img-box"},i.a.createElement("div",{className:"top"},i.a.createElement("div",{className:"close-icon",onClick:this.handleClose})),i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"content-box ".concat(this.state.isWidthExceed?"largeW":null," ").concat(this.state.isHeightExceed?"largeH":null," ")},11===this.props.largeImg.mMessage.type?i.a.createElement("img",{id:"img"}):i.a.createElement("video",{id:"video",src:this.props.largeImg.mMessage.fileDownloadUrl,autoPlay:!0,controls:!0,controlsList:"nodownload noplaybackrate noremoteplayback",disablePictureInPicture:!0})),i.a.createElement("div",{className:"content-box err-box"},i.a.createElement("div",{className:"err-img"}))),i.a.createElement("div",{className:"operation"},e)))}}]),t}(i.a.Component),Ze=function(){function e(){return Object(b.a)(this,e),this.isInit=!1,this.renderContainerID="",this.renderImgID="",this.messageList=[],this.maxLoadNum=10,this.scrollListenSwitch=!0,this.cRatio=2,e.instance||(e.instance=this),e.instance}return Object(C.a)(e,[{key:"init",value:function(e,t){this.renderContainerID=e,this.renderImgID=t;var n=document.querySelector(this.renderContainerID);n?(n.removeEventListener("scroll",this.handleScroll.bind(this)),n.addEventListener("scroll",this.handleScroll.bind(this)),this.isInit=!0):this.isInit=!1}},{key:"unInit",value:function(){if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");var e=document.querySelector(this.renderContainerID);e&&e.removeEventListener("scroll",this.handleScroll),this.renderContainerID="",this.renderImgID="",this.messageList.length=0}},{key:"initMessageListHandle",value:function(e){var t=this;if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");e&&(e.forEach(function(e){(11===e.mMessage.type&&e.mMessage.thumbnailDownloadUrl||14===e.mMessage.type&&e.mMessage.videoFirstFrameDownloadUrl)&&(e.loadStatus=0,t.countRenderSizeHandle(e),F.getInstance().actionListener(q.zimKitImgMessageUpdated,e))}),this.messageList=e)}},{key:"appendMessageHandle",value:function(e){var t=this;if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");e.forEach(function(e){(11===e.mMessage.type&&e.mMessage.thumbnailDownloadUrl||14===e.mMessage.type&&e.mMessage.videoFirstFrameDownloadUrl)&&(e.loadStatus=0,t.countRenderSizeHandle(e),F.getInstance().actionListener(q.zimKitImgMessageUpdated,e))}),this.messageList=this.messageList.concat(e)}},{key:"updateMessageHandle",value:function(e){var t=this;if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");e.forEach(function(e){t.countRenderSizeHandle(e)}),this.messageList=e}},{key:"setScrollListenSwitchHandle",value:function(e){if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");console.warn("setScrollListenSwitchHandle",e),this.scrollListenSwitch=!!e}},{key:"loadImgByMessageHandle",value:function(e){if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");this.scrollListenSwitch||(console.warn("loadImgByMessageHandle load"),this.loadImgHandle(e))}},{key:"loadLatestImgHandle",value:function(){if(!this.isInit)throw new Error("Please call the 'init' method first to initialize");this.scrollListenSwitch||(console.warn("loadLatestImgHandle load"),this.loadImgHandle(this.messageList.slice(-8)))}},{key:"registerImgMessageUpdatedCallback",value:function(e){F.getInstance().addEventListener(q.zimKitImgMessageUpdated,[e])}},{key:"countRenderSizeHandle",value:function(e){if(e.mMessage.messageID){var t,n,a,r,i=0,o=0,s=0,c=0;if(11===e.mMessage.type?(t=e.mMessage.thumbnailWidth,n=e.mMessage.thumbnailHeight,a=255,r=127.5):(t=e.mMessage.videoFirstFrameWidth,n=e.mMessage.videoFirstFrameHeight,a=170,r=85),t||n)if(t>n){var l=n/t*a;l<r?(o=r,i=t/n*r,s=a,c=r):(o=l,i=a,s=a,c=l)}else{var u=t/n*a;u<r?(i=r,o=n/t*r,s=r,c=a):(i=u,o=a,s=u,c=a)}else i=a,o=a,s=a,c=a;e.thumbnailImgWidth=i,e.thumbnailImgHeight=o,e.thumbnailImgConWidth=s,e.thumbnailImgConHeight=c}}},{key:"handleScroll",value:function(){this.scrollListenSwitch&&(console.warn("handleScroll load"),this.loadImgHandle(this.messageList))}},{key:"loadImgHandle",value:function(e){var t=this;e.forEach(function(e){if(11===e.mMessage.type||14===e.mMessage.type){if(!se.getInstance().networkStatus&&3===e.loadStatus)return;var n=e.mMessage.thumbnailDownloadUrl||e.mMessage.videoFirstFrameDownloadUrl,a=document.querySelector(".img".concat(e.mMessage.messageID));n&&1!==e.loadStatus&&2!==e.loadStatus?a&&t.countTopHandle(a)&&(e.loadStatus=1,F.getInstance().actionListener(q.zimKitImgMessageUpdated,e),a.src=n,a.onload=function(){e.loadStatus=2,F.getInstance().actionListener(q.zimKitImgMessageUpdated,e)},a.onerror=function(t){e.loadStatus=3,F.getInstance().actionListener(q.zimKitImgMessageUpdated,e)}):a&&!a.src&&(a.src=n,F.getInstance().actionListener(q.zimKitImgMessageUpdated,e))}})}},{key:"countTopHandle",value:function(e){var t=!1,n=document.querySelector(this.renderContainerID);if(n){var a=e.parentElement.parentElement.parentElement;t=n.scrollTop<a.offsetTop+a.clientHeight-0}return t}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();Ze.instance=void 0;var $e=function(e){return e?e<1024?e.toFixed(2)+" B":e<1048576?(e/1024).toFixed(2)+" KB":e<1073741824?(e/1048576).toFixed(2)+" MB":(e/1073741824).toFixed(2)+" GB":"0B"};function et(){et=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,i=Object.create(r.prototype),o=new w(a||[]);return i._invoke=function(e,t,n){var a="suspendedStart";return function(r,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw i;return k()}for(n.method=r,n.arg=i;;){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var c=l(e,t,n);if("normal"===c.type){if(a=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=c;var u={};function h(){}function g(){}function d(){}var m={};s(m,r,function(){return this});var p=Object.getPrototypeOf,v=p&&p(p(L([])));v&&v!==t&&n.call(v,r)&&(m=v);var f=d.prototype=h.prototype=Object.create(m);function y(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var a;this._invoke=function(r,i){function o(){return new t(function(a,o){!function a(r,i,o,s){var c=l(e[r],e,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){a("next",e,o,s)},function(e){a("throw",e,o,s)}):t.resolve(h).then(function(e){u.value=e,o(u)},function(e){return a("throw",e,o,s)})}s(c.arg)}(r,i,a,o)})}return a=a?a.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=l(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function L(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return g.prototype=d,s(f,"constructor",d),s(d,"constructor",g),g.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,a,r,i){void 0===i&&(i=Promise);var o=new b(c(t,n,a,r),i);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},y(f),s(f,o,"Generator"),s(f,r,function(){return this}),s(f,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return o.type="throw",o.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;_(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}var tt=oe.getInstance().getI18next(),nt=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).state={currentChat:null,currentMessageList:[],message:"",oldScrollHeight:0,newScrollHeight:0,userInfo:{},showExpressionBox:!1,showLargeImgBox:!1,largeImg:{},audioItem:{},isScrolled:!1,isMultiSelectMode:Ke.normal,selectedItem:{}},n.listScroll=n.listScroll.bind(Object(k.a)(Object(k.a)(n))),n.sendMessage=n.sendMessage.bind(Object(k.a)(Object(k.a)(n))),n.dateFormat=n.dateFormat.bind(Object(k.a)(Object(k.a)(n))),n.handleInputChange=n.handleInputChange.bind(Object(k.a)(Object(k.a)(n))),n.scrollToBottom=n.scrollToBottom.bind(Object(k.a)(Object(k.a)(n))),n.handleClick=n.handleClick.bind(Object(k.a)(Object(k.a)(n))),n.triggerExpressionUI=n.triggerExpressionUI.bind(Object(k.a)(Object(k.a)(n))),n.handleAddExpression=n.handleAddExpression.bind(Object(k.a)(Object(k.a)(n))),n.handleImageChange=n.handleImageChange.bind(Object(k.a)(Object(k.a)(n))),n.handleVideoFileChange=n.handleVideoFileChange.bind(Object(k.a)(Object(k.a)(n))),n.handleFileChange=n.handleFileChange.bind(Object(k.a)(Object(k.a)(n))),n.handleCloseLargeImgBox=n.handleCloseLargeImgBox.bind(Object(k.a)(Object(k.a)(n))),n.showLargeImg=n.showLargeImg.bind(Object(k.a)(Object(k.a)(n))),n.operation=n.operation.bind(Object(k.a)(Object(k.a)(n))),n.playAudio=n.playAudio.bind(Object(k.a)(Object(k.a)(n))),n.getAudioWidth=n.getAudioWidth.bind(Object(k.a)(Object(k.a)(n))),n.selectMessage=n.selectMessage.bind(Object(k.a)(Object(k.a)(n))),n.closeMultiSelectMode=n.closeMultiSelectMode.bind(Object(k.a)(Object(k.a)(n))),n.handleExpressionBoxOperation=n.handleExpressionBoxOperation.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("click",this.handleClick),Je.getInstance().registerLoginUserUpdatedCallback(function(t){e.setState({userInfo:t})}),Je.getInstance().registerCurrentChatChangedCallback(this.currentChatChangedCallback()),Je.getInstance().registerCurrentChatUpdatedCallback(this.currentChatUpdatedCallback()),Je.getInstance().registerModeChangedCallback(this.modeChangedCallback()),Ze.getInstance().registerImgMessageUpdatedCallback(function(t){e.state.currentMessageList.forEach(function(e){if((11===e.mMessage.type||14===e.mMessage.type)&&e.mMessage.messageID===t.mMessage.messageID){e=t;var n=document.querySelector(".img".concat(t.mMessage.messageID));n&&(2===t.loadStatus&&(n.parentElement.style.zIndex="2"),3===t.loadStatus&&(n.parentElement.style.zIndex="-1"))}}),e.setState({currentMessageList:e.state.currentMessageList})}),Ee.on(Ce.ExpressionBoxOperation,this.handleExpressionBoxOperation)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleClick),Je.getInstance().unInit(),Je.getInstance().removeCurrentChatChangedCallback(this.currentChatChangedCallback()),Je.getInstance().removeCurrentChatUpdatedCallback(this.currentChatUpdatedCallback()),Je.getInstance().removeModeChangedCallback(this.modeChangedCallback()),Ee.off(Ce.ExpressionBoxOperation,this.handleExpressionBoxOperation)}},{key:"currentChatChangedCallback",value:function(){var e=this;return function(t){console.log("kitlog current chat changed",e.state.currentChat,t,e.state.isScrolled),e.setState({currentChat:t,isScrolled:!1,message:"",currentMessageList:se.getInstance().networkStatus?[]:t.currentMessageList},function(){var t=document.querySelector(".text-area");t&&t.focus(),e.scrollToBottom()})}}},{key:"currentChatUpdatedCallback",value:function(){var e=this;return function(t){(console.log("kitlog current chat update",e.state.currentChat,t,e.state.isScrolled),e.state.currentChat&&e.state.currentChat.chatID!==t.chatID)||document.querySelector(".message-content")&&(e.state.currentMessageList.length?e.setState({currentMessageList:t.currentMessageList},function(){Ze.getInstance().updateMessageHandle(t.currentMessageList),Ze.getInstance().setScrollListenSwitchHandle(!1),!e.state.isScrolled&&e.scrollToBottom(),Ze.getInstance().loadImgByMessageHandle(t.currentMessageList),requestAnimationFrame(function(){Ze.getInstance().setScrollListenSwitchHandle(!0)})}):(Ze.getInstance().init(".message-content",".msg-img"),Ze.getInstance().initMessageListHandle(t.currentMessageList),e.setState({currentMessageList:t.currentMessageList},function(){Ze.getInstance().setScrollListenSwitchHandle(!1),!e.state.isScrolled&&e.scrollToBottom(),Ze.getInstance().loadLatestImgHandle(),requestAnimationFrame(function(){Ze.getInstance().setScrollListenSwitchHandle(!0)})})))}}},{key:"modeChangedCallback",value:function(){var e=this;return function(t,n){e.setState({isMultiSelectMode:t}),n&&e.selectMessage(n)}}},{key:"handleExpressionBoxOperation",value:function(e){this.setState({showExpressionBox:!e&&!this.state.showExpressionBox})}},{key:"handleClick",value:function(e){var t=document.querySelector(".expression-box"),n=e.path||e.composedPath&&e.composedPath();if("expression"!==e.target.className){var a=!1;try{n.forEach(function(e){if(e.className&&e.className.includes("expression-box"))throw a=!0,new Error("break")})}catch(r){}t&&!a&&this.triggerExpressionUI()}else this.triggerExpressionUI()}},{key:"triggerExpressionUI",value:function(){var e=this;this.setState({showExpressionBox:!this.state.showExpressionBox},function(){if(e.state.showExpressionBox){var t=document.querySelector(".text-area");t&&t.focus()}})}},{key:"scrollToBottom",value:function(){var e=document.querySelector(".message-content");if(e){var t=Number(e.scrollHeight)-Number(e.clientHeight);e.scrollTo({top:t,behavior:"auto"})}}},{key:"listScroll",value:function(){var e=this,t=document.querySelector(".message-content");if(t){var n=Math.round(t.scrollTop),a=t.scrollHeight,r=this.state.currentChat;0==n&&this.state.currentChat.queryHistoryMessage(r.chatID,r.chatType).then(function(){e.setState({oldScrollHeight:a},function(){e.setState({newScrollHeight:t.scrollHeight},function(){t.scrollTop=e.state.newScrollHeight-e.state.oldScrollHeight})})}),n<a-t.clientHeight?this.setState({isScrolled:!0}):this.setState({isScrolled:!1})}}},{key:"sendMessage",value:function(){2===this.state.currentChat.chatType?this.state.currentChat.sendGroupMessage(this.state.message):this.state.currentChat.sendPeerMessage(this.state.message),this.setState({message:"",isScrolled:!1})}},{key:"dateFormat",value:function(e,t){if(e.mMessage.timestamp){if(0===t)return be(e.mMessage.timestamp,!0);var n=this.state.currentMessageList[t-1];return n&&e.mMessage.timestamp-n.mMessage.timestamp>3e5?be(e.mMessage.timestamp,!0):void 0}}},{key:"handleInputChange",value:function(e){this.setState({message:e.target.value})}},{key:"clickUploadImageFile",value:function(){var e=document.getElementById("uploadImageFile");e.value="",e&&e.click()}},{key:"clickUploadVideoFile",value:function(){var e=document.getElementById("uploadVideoFile");e.value="",e&&e.click()}},{key:"clickUploadFile",value:function(){var e=document.getElementById("uploadFile");e.value="",e&&e.click()}},{key:"handleImageChange",value:function(){var e=Object(V.a)(et().mark(function e(t){var n,a;return et().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Array.from(t.target.files))){e.next=6;break}if(!(n.length>9)){e.next=5;break}return we(!0,{text:tt.t("message_send_img_exceed_tips_w"),type:"default"}),e.abrupt("return");case 5:for(a=0;a<n.length;a++)this.state.currentChat.sendMediaMessage(n[a],function(e,t,n){console.log("===handleImageChange",e,t,n)},{fileType:11}),this.setState({isScrolled:!1});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleVideoFileChange",value:function(e){var t=this,n=Array.from(e.target.files);if(n){if(n.length>9)return void we(!0,{text:tt.t("message_send_video_exceed_tips_w"),type:"default"});for(var a=function(e){var a=new Audio(URL.createObjectURL(n[e]));a.onloadedmetadata=function(){t.state.currentChat.sendMediaMessage(n[e],function(e,t,n){console.log("===handleVideoFileChange",JSON.parse(JSON.stringify(e)),t,n)},{fileType:14,videoDuration:a.duration}),t.setState({isScrolled:!1})}},r=0;r<n.length;r++)a(r)}}},{key:"handleFileChange",value:function(e){var t=Array.from(e.target.files);if(t)for(var n=0;n<t.length;n++){if(!t[n].size)return void we(!0,{text:tt.t("message_file_empty_error_tips"),type:"default"});this.state.currentChat.sendMediaMessage(t[n],function(e,t,n){console.log("===handleVideoFileChange",JSON.parse(JSON.stringify(e)),t,n)},{fileType:12}),this.setState({isScrolled:!1})}}},{key:"handleAddExpression",value:function(e){this.setState({showExpressionBox:!1});var t=document.querySelector(".text-area");t&&t.focus();var n=this.state.message.split(""),a=t.selectionStart;n.splice(a,0,e),this.setState({message:n.join("")}),setTimeout(function(){t.setSelectionRange(a+2,a+2)},0)}},{key:"showLargeImg",value:function(e){var t=e.mMessage.fileName.split("."),n=t&&t[t.length-1].toLocaleLowerCase();if(n&&/mov/.test(n))we(!0,{text:tt.t("message_video_play_error_tips_w"),type:"default"});else if((11!==e.mMessage.type||e.mMessage.largeImageDownloadUrl)&&(14!==e.mMessage.type||e.mMessage.fileDownloadUrl)){if(14===e.mMessage.type&&Object.keys(this.state.audioItem).length){var a=document.querySelector("#audio".concat(this.state.audioItem.mMessage.messageID));a&&(a.pause(),a.currentTime=0),this.state.currentMessageList.filter(function(e){13===e.mMessage.type&&e.isPlaying&&(e.isPlaying=!1)}),this.setState({audioItem:{}})}this.setState({showLargeImgBox:!0,largeImg:e})}}},{key:"handleCloseLargeImgBox",value:function(){this.setState({showLargeImgBox:!1,largeImg:{}})}},{key:"operation",value:function(e,t){if(t.preventDefault(),!Je.getInstance().mode){var n={x:t.pageX,y:t.pageY,messageItem:e};ke(!0,n),document.querySelector(".message-content").style.overflowY="hidden"}}},{key:"playAudio",value:function(e){e.loadStatus=1;var t=document.querySelector("#audio".concat(e.mMessage.messageID));if(this.state.currentMessageList.filter(function(e){13===e.mMessage.type&&e.isPlaying&&(e.isPlaying=!1)}),Object.keys(this.state.audioItem).length){var n=document.querySelector("#audio".concat(this.state.audioItem.mMessage.messageID));n&&(n.pause(),n.currentTime=0),this.state.audioItem.mMessage.messageID!==e.mMessage.messageID?this.startPlayingAudio(e,t):(e.loadStatus=0,e.isPlaying=!1,this.setState({audioItem:{}}))}else this.startPlayingAudio(e,t)}},{key:"startPlayingAudio",value:function(e,t){var n=this;!se.getInstance().networkStatus||t.src&&t.src===e.mMessage.fileDownloadUrl||(t.src=e.mMessage.fileDownloadUrl),t.error?(t.src="",we(!0,{text:tt.t("message_audio_play_error_tips"),type:"default"}),e.loadStatus=3,e.isPlaying=!1,this.setState({audioItem:{}})):t.play(),t.onwaiting=function(t){e.loadStatus=1,e.isPlaying=!1,n.setState({audioItem:e})},t.onplaying=function(){e.loadStatus=2,e.isPlaying=!0,n.setState({audioItem:e})},t.onpause=function(){e.loadStatus=0,e.isPlaying=!1,n.setState({audioItem:{}})},t.onended=function(){e.loadStatus=2,e.isPlaying=!1,n.setState({audioItem:{}})}}},{key:"getAudioWidth",value:function(e){var t=70+e.mMessage.audioDuration/60*204;return t>204?204:t}},{key:"getFileIcon",value:function(e){var t="",n=e.mMessage.fileName&&e.mMessage.fileName.split("."),a=n&&n[n.length-1].toLocaleLowerCase();if(a){Object.entries({ppt:/ppt|pptx|pptm/,word:/doc|docx|rtf|dot|html|tmp|wps/,txt:/txt/,pdf:/pdf/,excel:/xlsx|xlsm|xlsb|xltx|xltm|xls|xlt|xml|xlr|xlw|xla|xlam/,zip:/rar|zip|arj|gz|arj|z/,video:/mp4|m4v|mov|qt|avi|flv|wmv|asf|mpeg|mpg|vob|mkv|asf|rm|rmvb|vob|ts|dat|3gp|3gpp|3g2|3gpp2|webm/,audio:/mp3|wma|wav|mid|ape|flac|ape|alac|m4a/,image:/tiff|heif|heic|jpg|jpeg|png|gif|bmp|webp/}).forEach(function(e){var n=Object(Ne.a)(e,2),r=n[0];n[1].test(a)&&(t=r+"-icon")})}return t||"unknow-icon"}},{key:"selectMessage",value:function(e){if(this.setState({selectedItem:e}),e.selected=!e.selected,e.selected)Je.getInstance().currentChat.selectedList.push(e.mMessage);else{var t=Je.getInstance().currentChat.selectedList.findIndex(function(t){return t.messageID===e.mMessage.messageID});Je.getInstance().currentChat.selectedList.splice(t,1)}}},{key:"closeMultiSelectMode",value:function(){Je.getInstance().mode=Ke.normal,this.setState({isMultiSelectMode:Ke.normal}),this.state.currentMessageList.map(function(e){e.selected=!1}),Je.getInstance().currentChat.selectedList=[]}},{key:"deleteMessage",value:function(){Je.getInstance().currentChat.selectedList.length&&Le(!0,{desc:tt.t("message_delete_confirmation_desc"),confirmText:tt.t("conversation_delete"),cancelText:tt.t("conversation_cancel"),hasCloseBtn:!1,confirmFunc:function(){Je.getInstance().currentChat.deleteMessages()}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentChat,r=t.currentMessageList,o=t.isMultiSelectMode,s=se.getInstance().userInfo,c=s.userID,l=s.userAvatarUrl,u=null;if(a&&a.chatID){var h=a.chatName,g=(a.chatID,a.chatAvatarUrl),d=a.chatType,m=null,p=null;this.state.showExpressionBox&&(m=i.a.createElement(Ye,{onAddExpression:this.handleAddExpression})),this.state.showLargeImgBox&&(p=i.a.createElement(Xe,{largeImg:this.state.largeImg,close:this.handleCloseLargeImgBox})),u=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"title"},h||(0===d?tt.t("message_title_chat"):tt.t("message_title_group_chat"))),2===d?i.a.createElement("div",{className:"more-icon"}):null),i.a.createElement("div",{className:"message-content",onScroll:this.listScroll},r.map(function(t,a){var r=e.dateFormat(t,a),s=t.mMessage.senderUserID!==c,u=99===t.type,h=e.getAudioWidth(t);return i.a.createElement("div",{className:"message-item",key:t.mMessage.messageID?t.mMessage.messageID:a},r?i.a.createElement("div",{className:"time-box"},r):null,i.a.createElement("div",{className:"message-box"},o?i.a.createElement("div",{className:"multi-select"},i.a.createElement("div",{className:"select-icon ".concat(t.selected?"selected":null),onClick:e.selectMessage.bind(e,t)})):null,s?i.a.createElement("div",{className:"left-msg"},i.a.createElement("div",{className:"head-portrait"},0===t.mMessage.conversationType?i.a.createElement("img",{src:g||n(28)}):i.a.createElement("img",{src:t.senderUserAvatarUrl?t.senderUserAvatarUrl:n(28)})),i.a.createElement("div",{className:"message-bubble"},2===t.mMessage.conversationType?i.a.createElement("div",{className:"send-name"},t.senderUserName||t.mMessage.senderUserID):null,1===t.mMessage.type?i.a.createElement("div",{className:"msg-text",onContextMenu:e.operation.bind(e,t)},t.mMessage.message):null,11===t.mMessage.type?i.a.createElement("div",null,i.a.createElement("div",{className:"msg-img",style:{width:"".concat(t.thumbnailImgConWidth,"px"),height:"".concat(t.thumbnailImgConHeight,"px")},onClick:e.showLargeImg.bind(e,t),onContextMenu:e.operation.bind(e,t)},i.a.createElement("img",{className:"img".concat(t.mMessage.messageID),style:{width:"".concat(t.thumbnailImgWidth,"px"),height:"".concat(t.thumbnailImgHeight,"px")}})),i.a.createElement("div",{className:"err-img",style:{width:"".concat(t.thumbnailImgConWidth,"px"),height:"".concat(t.thumbnailImgConHeight,"px")},onClick:e.showLargeImg.bind(e,t),onContextMenu:e.operation.bind(e,t)},i.a.createElement("div",{className:"default-img"}))):null,12===t.mMessage.type?i.a.createElement("div",{className:"msg-file",onContextMenu:e.operation.bind(e,t)},i.a.createElement("div",{className:"file-info"},i.a.createElement("div",{className:"file-name"},t.mMessage.fileName),i.a.createElement("div",{className:"file-size"},$e(t.mMessage.fileSize))),i.a.createElement("div",{className:"file-icon ".concat(e.getFileIcon(t))})):null,13===t.mMessage.type?i.a.createElement("div",{className:"msg-audio ".concat(1===t.loadStatus?"audioLoading":null),onClick:e.playAudio.bind(e,t),onContextMenu:e.operation.bind(e,t),style:{width:"".concat(h,"px")}},i.a.createElement("audio",{id:"audio".concat(t.mMessage.messageID),src:t.mMessage.fileDownloadUrl}),i.a.createElement("div",{className:"play-animation ".concat(t.isPlaying?"playing":null)}),i.a.createElement("div",{className:"audio-length"},t.mMessage.audioDuration,"''")):null,14===t.mMessage.type?i.a.createElement("div",null,i.a.createElement("div",{className:"msg-video",onClick:e.showLargeImg.bind(e,t),onContextMenu:e.operation.bind(e,t),style:{width:"".concat(t.thumbnailImgConWidth,"px"),height:"".concat(t.thumbnailImgConHeight,"px")}},i.a.createElement("img",{className:"img".concat(t.mMessage.messageID),style:{width:"".concat(t.thumbnailImgWidth,"px"),height:"".concat(t.thumbnailImgHeight,"px")}}),i.a.createElement("div",{className:"play-icon"})),i.a.createElement("div",{className:"err-video",style:{width:"".concat(t.thumbnailImgConWidth,"px"),height:"".concat(t.thumbnailImgConHeight,"px")},onClick:e.showLargeImg.bind(e,t),onContextMenu:e.operation.bind(e,t)},i.a.createElement("div",{className:"default-img"}),i.a.createElement("div",{className:"play-icon"}))):null,1!==t.mMessage.type&&11!==t.mMessage.type&&12!==t.mMessage.type&&13!==t.mMessage.type&&14!==t.mMessage.type?i.a.createElement("div",{className:"msg-text"},tt.t("common_message_unknown")):null)):null,s||u?null:i.a.createElement("div",{className:"right-msg"},99!==t.type&&2===t.mMessage.sentStatus?i.a.createElement("div",{className:"err-icon"}):null,0===t.mMessage.sentStatus?i.a.createElement("div",{className:"loading"}):null,i.a.createElement("div",{className:"message-bubble"},1===t.mMessage.type?i.a.createElement("div",{className:"msg-text",onContextMenu:e.operation.bind(e,t)},t.mMessage.message):null,11===t.mMessage.type?i.a.createElement("div",null,i.a.createElement("div",{className:"msg-img",style:{width:"".concat(t.thumbnailImgConWidth,"px"),height:"".concat(t.thumbnailImgConHeight,"px")},onClick:e.showLargeImg.bind(e,t),onContextMenu:e.operation.bind(e,t)},i.a.createElement("img",{className:"img".concat(t.mMessage.messageID),style:{width:"".concat(t.thumbnailImgWidth,"px"),height:"".concat(t.thumbnailImgHeight,"px")}})),i.a.createElement("div",{className:"err-img",style:{width:"".concat(t.thumbnailImgConWidth,"px"),height:"".concat(t.thumbnailImgConHeight,"px")},onClick:e.showLargeImg.bind(e,t),onContextMenu:e.operation.bind(e,t)},i.a.createElement("div",{className:"default-img"}))):null,12===t.mMessage.type?i.a.createElement("div",{className:"msg-file",onContextMenu:e.operation.bind(e,t)},i.a.createElement("div",{className:"file-info"},i.a.createElement("div",{className:"file-name"},t.mMessage.fileName),i.a.createElement("div",{className:"file-size"},$e(t.mMessage.fileSize))),i.a.createElement("div",{className:"file-icon ".concat(e.getFileIcon(t))})):null,13===t.mMessage.type?i.a.createElement("div",{className:"msg-audio ".concat(1===t.loadStatus?"audioLoading":null),onClick:e.playAudio.bind(e,t),onContextMenu:e.operation.bind(e,t),style:{width:"".concat(h,"px")}},i.a.createElement("audio",{id:"audio".concat(t.mMessage.messageID),src:t.mMessage.fileDownloadUrl}),i.a.createElement("div",{className:"audio-length"},t.mMessage.audioDuration,"''"),i.a.createElement("div",{className:"play-animation ".concat(t.isPlaying?"playing":null)})):null,14===t.mMessage.type?i.a.createElement("div",null,i.a.createElement("div",{className:"msg-video",onClick:e.showLargeImg.bind(e,t),onContextMenu:e.operation.bind(e,t),style:{width:"".concat(t.thumbnailImgConWidth,"px"),height:"".concat(t.thumbnailImgConHeight,"px")}},i.a.createElement("img",{className:"img".concat(t.mMessage.messageID),style:{width:"".concat(t.thumbnailImgWidth,"px"),height:"".concat(t.thumbnailImgHeight,"px")}}),i.a.createElement("div",{className:"play-icon"})),i.a.createElement("div",{className:"err-video",style:{width:"".concat(t.thumbnailImgConWidth,"px"),height:"".concat(t.thumbnailImgConHeight,"px")},onClick:e.showLargeImg.bind(e,t),onContextMenu:e.operation.bind(e,t)},i.a.createElement("div",{className:"default-img"}),i.a.createElement("div",{className:"play-icon"}))):null,1!==t.mMessage.type&&11!==t.mMessage.type&&12!==t.mMessage.type&&13!==t.mMessage.type&&14!==t.mMessage.type?i.a.createElement("div",{className:"msg-text"},tt.t("common_message_unknown")):null),i.a.createElement("div",{className:"head-portrait"},i.a.createElement("img",{src:l||n(28)}))),u?i.a.createElement("div",{className:"center-msg"},t.mMessage.message):null))})),o?i.a.createElement("div",{className:"multi-select-operation-box"},i.a.createElement("div",{className:"operation-content"},i.a.createElement("div",{className:"operation-item"},i.a.createElement("div",{className:"operation-icon delete",onClick:this.deleteMessage}),i.a.createElement("div",{className:"operation-desc"},tt.t("conversation_delete")," "))),i.a.createElement("div",{className:"close-icon",onClick:this.closeMultiSelectMode})):i.a.createElement("div",{className:"send-box"},i.a.createElement("div",{className:"tool-box"},i.a.createElement("div",{className:"expression"},i.a.createElement("div",{className:"expression-content"},m)),i.a.createElement("div",{className:"image-file",onClick:this.clickUploadImageFile},i.a.createElement("input",{id:"uploadImageFile",type:"file",multiple:!0,accept:"image/png,image/jpg,image/jpeg,image/bmp,image/gif",onChange:this.handleImageChange})),i.a.createElement("div",{className:"video-file",onClick:this.clickUploadVideoFile},i.a.createElement("input",{id:"uploadVideoFile",type:"file",multiple:!0,accept:".mp4,.MP4,.mov,.MOV",onChange:this.handleVideoFileChange})),i.a.createElement("div",{className:"other-file",onClick:this.clickUploadFile},i.a.createElement("input",{id:"uploadFile",type:"file",onChange:this.handleFileChange}))),i.a.createElement("textarea",{className:"text-area",value:this.state.message,onInput:this.handleInputChange}),i.a.createElement("button",{className:"btn send-button",onClick:this.sendMessage,disabled:!this.state.message},tt.t("message_send"))),p)}else u=i.a.createElement("div",{className:"default-content"},i.a.createElement("div",{className:"img"}),i.a.createElement("div",{className:"text"},tt.t("message_empty_w")));return i.a.createElement("div",{className:"chat"},u)}}]),t}(i.a.Component);n(99);function at(){at=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function c(e,t,n,a){var r=t&&t.prototype instanceof h?t:h,i=Object.create(r.prototype),o=new w(a||[]);return i._invoke=function(e,t,n){var a="suspendedStart";return function(r,i){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw i;return k()}for(n.method=r,n.arg=i;;){var o=n.delegate;if(o){var s=C(o,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var c=l(e,t,n);if("normal"===c.type){if(a=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=c;var u={};function h(){}function g(){}function d(){}var m={};s(m,r,function(){return this});var p=Object.getPrototypeOf,v=p&&p(p(L([])));v&&v!==t&&n.call(v,r)&&(m=v);var f=d.prototype=h.prototype=Object.create(m);function y(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function b(e,t){var a;this._invoke=function(r,i){function o(){return new t(function(a,o){!function a(r,i,o,s){var c=l(e[r],e,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then(function(e){a("next",e,o,s)},function(e){a("throw",e,o,s)}):t.resolve(h).then(function(e){u.value=e,o(u)},function(e){return a("throw",e,o,s)})}s(c.arg)}(r,i,a,o)})}return a=a?a.then(o,o):o()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var a=l(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,u;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function L(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,i=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return g.prototype=d,s(f,"constructor",d),s(d,"constructor",g),g.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,i,function(){return this}),e.AsyncIterator=b,e.async=function(t,n,a,r,i){void 0===i&&(i=Promise);var o=new b(c(t,n,a,r),i);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},y(f),s(f,o,"Generator"),s(f,r,function(){return this}),s(f,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=L,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return o.type="throw",o.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;_(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}var rt=oe.getInstance().getI18next(),it=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).state={currentGroup:null,groupListVM:X.getInstance()},n.copy=n.copy.bind(Object(k.a)(Object(k.a)(n))),n.handleClick=n.handleClick.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"handleClick",value:function(e){var t=e.path||e.composedPath&&e.composedPath();if(e.target.className.includes("more-icon"))_e();else{var n=document.querySelector(".group-container"),a=!1;t.forEach(function(e){e===n&&(a=!0)}),n&&!a&&_e()}}},{key:"componentDidMount",value:function(){var e=this;X.getInstance().registerLoginStateChangedCallback(function(){var e=Object(V.a)(at().mark(function e(t){return at().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&X.getInstance().queryGroupList();case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),se.getInstance().isLoggedIn&&X.getInstance().queryGroupList(),window.addEventListener("click",this.handleClick),F.getInstance().addEventListener(q.zimKitCurrentConversationChanged,[function(){var t=Object(V.a)(at().mark(function t(n){var a;return at().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:2===n.type&&((a=e.state.groupListVM.groupList.get(n.conversationID))?e.setState({currentGroup:a}):X.getInstance().queryGroupList().then(function(){e.setState({currentGroup:e.state.groupListVM.groupList.get(n.conversationID)})}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()])}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleClick),X.getInstance().unInit()}},{key:"copy",value:function(){var e=this.state.currentGroup;navigator.clipboard&&e&&navigator.clipboard.writeText(e.baseInfo.groupID).then(function(){we(!0,{text:rt.t("group_copy_success"),type:"default"})})}},{key:"render",value:function(){var e=this.state.currentGroup,t=null;return this.props.showGroupInfo&&(t=i.a.createElement("div",{className:"group-container"},i.a.createElement("div",{className:"form-box"},i.a.createElement("div",{className:"id"},i.a.createElement("div",{className:"label"},rt.t("group_group_id")),i.a.createElement("div",{className:"value"},e?e.baseInfo.groupID:"")),i.a.createElement("div",{className:"btn copy-btn",onClick:this.copy},rt.t("group_copy"))))),t}}]),t}(i.a.Component),ot=(n(100),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).toastTimer=void 0,n.duration=2e3,n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){this.props.showToast&&(clearTimeout(this.toastTimer),this.toastTimer=setTimeout(function(){Ee.emit(Ce.ToastOperation,!1)},this.duration))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.toastTimer),this.toastTimer=null}},{key:"render",value:function(){var e=null;if(this.props.showToast){var t=this.props.toastData,n=(t.name,t.text),a=t.type;e=i.a.createElement("div",null,i.a.createElement("div",{className:"default"+("loading"===a?" loading":"")},i.a.createElement("div",{className:"toast"+("error"===a?" error":"")},i.a.createElement("span",{className:"text"},n))))}return e}}]),t}(i.a.Component)),st=(n(101),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).closeHandle=n.closeHandle.bind(Object(k.a)(Object(k.a)(n))),n.cancelHandle=n.cancelHandle.bind(Object(k.a)(Object(k.a)(n))),n.confirmHandle=n.confirmHandle.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"closeHandle",value:function(){Ee.emit(Ce.DialogOperation,!1)}},{key:"cancelHandle",value:function(){var e=this.props.dialogData.cancelFunc;e&&e(),this.closeHandle()}},{key:"confirmHandle",value:function(){var e=this.props.dialogData.confirmFunc;e&&e(),this.closeHandle()}},{key:"render",value:function(){var e=null;if(this.props.showBaseDialog){var t=this.props.dialogData,n=t.title,a=t.desc,r=t.hasCloseBtn,o=t.cancelText,s=t.confirmText;e=i.a.createElement("div",{className:"wrapper"},i.a.createElement("div",{className:"dialog"},r?i.a.createElement("div",{className:"close-icon",onClick:this.closeHandle}):null,i.a.createElement("div",{className:"title"},n),i.a.createElement("div",{className:"desc"},a),i.a.createElement("div",{className:"line"}),i.a.createElement("div",{className:"btn-box"},o?i.a.createElement("button",{className:"btn cancel",onClick:this.cancelHandle},o):null,s?i.a.createElement("button",{className:"btn confirm",onClick:this.confirmHandle},s):null)))}return e}}]),t}(i.a.Component)),ct=(n(102),oe.getInstance().getI18next()),lt=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).deleteConversation=n.deleteConversation.bind(Object(k.a)(Object(k.a)(n))),n.downLoad=n.downLoad.bind(Object(k.a)(Object(k.a)(n))),n.deleteMsg=n.deleteMsg.bind(Object(k.a)(Object(k.a)(n))),n.multiSelect=n.multiSelect.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e;_e("close"),e="close",Ie.emit(Ce.ExpressionBoxOperation,e)}},{key:"deleteConversation",value:function(){ge.getInstance().deleteConversation(this.props.rightClickData.conversationItem.conversationID,this.props.rightClickData.conversationItem.type)}},{key:"downLoad",value:function(){var e=this,t=new XMLHttpRequest;t.open("GET",this.props.rightClickData.messageItem.mMessage.fileDownloadUrl,!0),t.responseType="blob",t.onload=function(){if(200===t.status){var n=document.createElement("a");n.href=window.URL.createObjectURL(t.response),n.download=e.props.rightClickData.messageItem.mMessage.fileName,n.click()}},t.send(),ke(!1)}},{key:"deleteMsg",value:function(){var e=JSON.parse(JSON.stringify(this.props.rightClickData.messageItem.mMessage));Le(!0,{desc:ct.t("message_delete_confirmation_desc"),confirmText:ct.t("conversation_delete"),cancelText:ct.t("conversation_cancel"),hasCloseBtn:!1,confirmFunc:function(){Je.getInstance().currentChat.deleteMessages(e)}}),ke(!1)}},{key:"multiSelect",value:function(){Je.getInstance().mode=Ke.multiSelect,F.getInstance().actionListener(q.zimKitModeChanged,Ke.multiSelect,this.props.rightClickData.messageItem),ke(!1)}},{key:"render",value:function(){if(this.props.rightClickData){var e=this.props.rightClickData.conversationItem,t=this.props.rightClickData.messageItem;return i.a.createElement("div",{className:"right-click-box",style:{top:"".concat(this.props.rightClickData.y,"px"),left:"".concat(this.props.rightClickData.x,"px")}},e?i.a.createElement("div",{className:"item",onClick:this.deleteConversation},ct.t("conversation_close_chat_w")):null,t?i.a.createElement("div",null,!t.mMessage.fileDownloadUrl||11!==t.mMessage.type&&12!==t.mMessage.type&&14!==t.mMessage.type?null:i.a.createElement("div",{className:"item",onClick:this.downLoad},ct.t("album_download_image_w")),i.a.createElement("div",{className:"item",onClick:this.deleteMsg},ct.t("conversation_delete")),i.a.createElement("div",{className:"item",onClick:this.multiSelect},ct.t("message_multi_select"))):null)}}}]),t}(i.a.Component),ut=(n(103),oe.getInstance().getI18next()),ht=function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).num=0,n.lastClickTime=0,n.state={showGroupInfo:!1,showToast:!1,showBaseDialog:!1,showRightClickDialog:!1,toastData:{text:"",type:"default"},dialogData:{title:"",desc:"",cancelText:"",confirmText:"",hasCloseBtn:!1},rightClickDialogData:{},connectionState:2,connectionStateObj:{0:"(".concat(ut.t("conversation_disconnected"),")"),1:"(".concat(ut.t("conversation_connecting"),")"),3:"(".concat(ut.t("conversation_connecting"),")")}},n.handleGroupInfoOperation=n.handleGroupInfoOperation.bind(Object(k.a)(Object(k.a)(n))),n.handleToastOperation=n.handleToastOperation.bind(Object(k.a)(Object(k.a)(n))),n.handleDialogOperation=n.handleDialogOperation.bind(Object(k.a)(Object(k.a)(n))),n.handleRightClickDialogOperation=n.handleRightClickDialogOperation.bind(Object(k.a)(Object(k.a)(n))),n.handleClick=n.handleClick.bind(Object(k.a)(Object(k.a)(n))),n.uploadLog=n.uploadLog.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"handleGroupInfoOperation",value:function(e){this.setState({showGroupInfo:!e&&!this.state.showGroupInfo})}},{key:"handleToastOperation",value:function(e,t){this.setState({showToast:e,toastData:t})}},{key:"handleDialogOperation",value:function(e,t){this.setState({showBaseDialog:e,dialogData:t})}},{key:"handleRightClickDialogOperation",value:function(e,t){this.setState({showRightClickDialog:e,rightClickDialogData:t})}},{key:"handleClick",value:function(e){var t=e.path||e.composedPath&&e.composedPath();if(e.target.parentNode&&!e.target.parentNode.className.includes("right-click-box")&&e.target.parentNode.parentNode&&!e.target.parentNode.parentNode.className.includes("right-click-box")){var n=document.querySelector(".right-click-box"),a=!1;if(t.forEach(function(e){e===n&&(a=!0)}),n&&!a)if(this.setState({showRightClickDialog:!this.state.showRightClickDialog}),!this.state.showRightClickMenu)document.querySelector(".message-content").style.overflowY="scroll",document.querySelector(".conversation-content").style.overflowY="auto"}else{if(this.setState({showRightClickDialog:!this.state.showRightClickDialog}),!this.state.showRightClickMenu)document.querySelector(".message-content").style.overflowY="scroll",document.querySelector(".conversation-content").style.overflowY="auto"}}},{key:"uploadLog",value:function(){var e=(new Date).getTime();!this.lastClickTime||e-this.lastClickTime<500?this.num++:this.num=0,this.lastClickTime=e,4===this.num&&(this.num=0,se.getInstance().uploadLog().then(function(e){we(!0,{text:"\u4e0a\u4f20\u65e5\u5fd7\u6210\u529f",type:"default"})}).catch(function(e){we(!0,{text:"\u4e0a\u4f20\u65e5\u5fd7\u5931\u8d25\uff1a".concat(e),type:"default"})}))}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("click",this.handleClick),Ee.on(Ce.GroupInfoOperation,this.handleGroupInfoOperation),Ee.on(Ce.ToastOperation,this.handleToastOperation),Ee.on(Ce.DialogOperation,this.handleDialogOperation),Ee.on(Ce.RightClickDialogOperation,this.handleRightClickDialogOperation),F.getInstance().addEventListener(q.zimConnectionStateChanged,[function(t){e.setState({connectionState:t.state})}])}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleClick),Ee.off(Ce.GroupInfoOperation,this.handleGroupInfoOperation),Ee.off(Ce.ToastOperation,this.handleToastOperation),Ee.off(Ce.DialogOperation,this.handleDialogOperation),Ee.off(Ce.RightClickDialogOperation,this.handleRightClickDialogOperation)}},{key:"render",value:function(){var e=this.state,t=e.showGroupInfo,n=e.showToast,a=e.showBaseDialog,r=e.showRightClickDialog,o=e.toastData,s=e.dialogData,c=e.rightClickDialogData,l=e.connectionStateObj,u=e.connectionState;return i.a.createElement("div",{id:"zegoim"},i.a.createElement("div",{className:"zego-im-container"},i.a.createElement("div",{className:"top-banner"},i.a.createElement("div",{className:"logo",onClick:this.uploadLog},navigator.language.includes("en")?"":"ZEGO"," In-app Chat ",l[u])),i.a.createElement("div",{className:"box"},i.a.createElement(je,null),i.a.createElement(nt,null),i.a.createElement("div",{className:"group-wrap"},i.a.createElement(it,{showGroupInfo:t}))),i.a.createElement(ot,{showToast:n,toastData:o}),i.a.createElement(st,{showBaseDialog:a,dialogData:s}),r?i.a.createElement(lt,{rightClickData:c}):null))}}]),t}(i.a.Component),gt=(n(104),function(e){function t(e){var n;return Object(b.a)(this,t),(n=Object(I.a)(this,Object(_.a)(t).call(this,e))).showPeerChat=n.showPeerChat.bind(Object(k.a)(Object(k.a)(n))),n.showGroupChat=n.showGroupChat.bind(Object(k.a)(Object(k.a)(n))),n.createGroupChat=n.createGroupChat.bind(Object(k.a)(Object(k.a)(n))),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){se.getInstance().on("connectionStateChanged",this.onConnectionStateChange()),se.getInstance().on("loggedStateChanged",this.onLogout()),se.getInstance().isLoggedIn}},{key:"componentWillUnmount",value:function(){se.getInstance().off("connectionStateChanged",this.onConnectionStateChange()),se.getInstance().off("loggedStateChanged",this.onLogout())}},{key:"onConnectionStateChange",value:function(){var e=this;return function(t){(0===t.state&&4===t.event||0===t.state&&0===t.event)&&(e.props.logout(),O())}}},{key:"onLogout",value:function(){var e=this;return function(t){console.log("===login",t),t||(e.props.logout(),O())}}},{key:"render",value:function(){return i.a.createElement("div",{id:"main"},!this.props.isLoggedIn&&i.a.createElement(L.a,{to:"/login",replace:!0}),i.a.createElement(ht,null))}},{key:"showPeerChat",value:function(){Je.getInstance().initWithConversationID("web222",G.ZIMKitConversationTypePeer)}},{key:"showGroupChat",value:function(){Je.getInstance().initWithConversationID("",G.ZIMKitConversationTypeGroup)}},{key:"createGroupChat",value:function(e,t){se.getInstance().createGroup(e,t).then(function(e){console.log("===data",e);var t=e.groupInfo,n=e.errorUserList,a=t.baseInfo;if(n.length);else{var r=a.groupID;Je.getInstance().initWithConversationID(r,G.ZIMKitConversationTypeGroup)}}).catch(function(e){console.log("error",e)})}},{key:"joinGroup",value:function(e){se.getInstance().joinGroup(e).then(function(t){Je.getInstance().initWithConversationID(e,G.ZIMKitConversationTypeGroup)})}}]),t}(i.a.Component)),dt=Object(l.b)(v,function(e){return{logout:function(t){return e(p(t))}}})(gt),mt=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(I.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(r)))).cacheUserInfo=M(),n}return Object(w.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new se;t.init(j).then(function(){if(e.props.initIMKitSDK(!0),e.cacheUserInfo){var n=se.getInstance().generateKitTokenForTest(j,N,e.cacheUserInfo.userID);console.log("===token",n),t.connectUser(e.cacheUserInfo,n).then(function(){e.props.login()})}})}},{key:"render",value:function(){return i.a.createElement(L.d,null,i.a.createElement(L.b,{path:"/",element:i.a.createElement(dt,null)}),i.a.createElement(L.b,{path:"/main",element:i.a.createElement(dt,null)}),i.a.createElement(L.b,{path:"/login",element:i.a.createElement(ue,null)}))}}]),t}(i.a.Component),pt=Object(l.b)(v,function(e){return{initIMKitSDK:function(t){return e(d(t))},login:function(t){return e(m(t))}}})(mt),vt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,108)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)})};s.a.createRoot(document.getElementById("root")).render(i.a.createElement(l.a,{store:y},i.a.createElement(c.a,null,i.a.createElement(pt,null)))),vt()},27:function(e,t,n){},28:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIEAAACBCAYAAADnoNlQAAAAAXNSR0IArs4c6QAAEKZJREFUeF7tnV+MXFUdx3+/O7PbPzs7M7RdoKXQ8qcxKURMePFBg2gUIT7w4B/Ciw+NifBEjDEQIjEKBjWaUBMfTIhB8EHF2JggD76gITxITIoYSgRCof93u+382aVddmaO+Ux68PZ2Zu+5d+7M3tk5J9k06Z57zu/+ft/z+3/uqgw45ufnS1u3bi212+29xpgvqOonjTH7VXVORCrGmM0DbjHxj6vqiojUROSsqh7pdDqHgyD4+8rKyrvGmObc3Nyyqpq0jNI0DxpjCsvLy7etrq7epap3GmPuCIJgtzEm1XppaJj0ZxB6p9M5qaqvGWNeUdWXK5XKYVVtJ+VNYqEtLS1d2263v2+MuUdEdonIpqSb+vnZcgBNYYw5raovttvtn2zbtu2DJDs4g2BxcbE8NTX1NWPMz4wxVyXZxM8dKQfqIvJou93+3fbt2xsuOzuBoNls7u90Ok8ZY+4WkWmXhf2cdeVAS1VfKhQKj5dKpcNxlMSCoNlsfq7dbv9aVW/CF4hb0P8+HxzANzDGHC0Wiw+WSqW/rUVVXxAg8Eaj8Q1jzEER2Z6PV/NUpOBAU1W/XS6X/6CqrV7P9wVBvV5/wBjztIjsSLGxfyRfHDgrIo9Uq9VnnEFwyQS84DVAviQ5IDXnisXi/b1MwxWaACew3W4fEpF9A27qH88fB04UCoUvzc7Ovhkm7TIQEAYWi8XnReRe7wTmT4IZUNQhlxAEwYHZ2dkFu95lIGg0Ggc6nc6vfBiYAbvzu8RHqvrdSqXyyytAcCkT+KZPBOVXehlSVp+amto/MzNzkjW7muBSOHjQGPNQhhv5pXLMAVV9tlwuHyCf0AXB0tLS7a1W688icmOO6fakZcuBM8Vi8e5SqfR6FwTnz59/WFWf8sWgbLmc89VWjTHfq1arTyv9ANPT08+JyH05J9qTlz0HDjWbzQOKQ7i6uvpPVb0++z38innmgDHmWBAEn9d6vf5pEXnVN4TkWVzDoe1SN9I9WqvVHhORJ4azjV817xxQ1SfRBL83xnw978R6+obDgSAIDqEJ3hCR24azhV817xygcRVNcNoYc03eifX0DY0DC4Dggm8LHxqDc78wTaqYg9T96rl/Q0+gEwc8CJzYtLEneRBsbPk6vZ0HgRObNvYkD4KNLV+nt/MgcGLTxp7kQbCx5ev0dh4ETmza2JM8CDa2fJ3ebuQgMMbQ0/jxjxOVG3SSqkr4Z71ec6QgaLVa0mg05MKFC7K6uiqdTqcLhkkdQRBIsViUzZs3y+zsbPff9RgjA8HFixfl5MmTsrKyMtGC7yfkqakpmZubk2q1OnIcDB0EnHQEf+zYse7p96M/B9AMu3bt6moFzMSoxtBB0G63uxqg2WyO6p3Gep9NmzbJ7t27hX9HNYYOgg8//FDef/99bwISSHT79u1yzTWja/EYOgjOnDkji4uLCVjgp+Is7tu3b2QmYeggeO+997rRgB/JOAAIcBZHMYYOgrfffts7hCkkeeONN8qWLVtSPJn8EQ+C5DwbyRN79+6VrVu3jmSvXIOAk0ACBRtJYumjjz4SHE0ijo0+Jh4ECP3qq6/uxsuFQuFjBwnhA4T5+XluUm9oHEw0CBA6cTIA6DcAw4kTJ7op6I06JhoEO3fulG3btsWGR6ShP/jgg65m2IhjYkFAluzmm28W0qdxg3Q0ZmFh4ePvL8U9Mla/n1gQ7NixQ6699lpnYaEN3nnnHef54zRxYkFA8QRT4DrwDY4cOeI6fazmTSwI8AfIm7sO+hPeeust1+ljNW9iQUAtncjAdRAmHj161HX6yOYR4ZDfILeByUrTODOxIIB5OIbT0/F/UgEGEybW6/yNh/wMhI9ZI9GF8M+fPy8U0aA3yZhYEMAk8gPXX3/9mhECzCVHQJ9CnrKHFHz27NnT7QWwTSEIHyCcOnUqCQZkokEAp8gW4hugGaIDAKBi6VTKU44A7XXDDTf07RMklCWkdTUNEw8CTlGpVOpqBdQqYLBtasvLy10TgFOYl4EGuO6662RmZqZvkguNABDOnj3rBISJB4EVLmAAACSPAAGMzJP6h07oQwNQ8YvrC4T206dPd81D3PAgiONQTn5PoQv/BQ0QHvbUl8vlrnkIgwMwk+6O67n0IMiJkNciAwD06gwGANh+WuqYQ8gb1RKYMpzatQpgHgQ5BwEnGxOA3xI1AbaeYR1ANAHaItw9zO9ov8e57dd650GQYxBYDYCqj5oATj85gegAAAg12jMIEOjB7BXleBDkFAT2ckilUrlMA2ACAADef7+kEFFOr/sEhLskvaIawYMgpyAgDAQA0VK3TQbFZQUJeVkDbWIHpoGWOUxDOOz1IMgZCLD7OIFXXXX5n4hGgLVarXuSXQdrUCiLAok6CFGDBZIHgStHRzAPANDjgPDCgrN1AeL+OA0QJZNCGWuGNQJziBbwKfAVbO5hBK8oue42XosBCATVjK0lg0gmcRiD62CksKMnF4GhAdIkrwCWTY2HabZRA6AiDe3SYZXFO48lCGCOPZ0wFOZZxyyNUHoxknW5Ko6wooICcEnvV7Ie0QHA5celUpqFgF3WGDsQwEhOZ9RD52XxtAEDdtq1ULMWAGh3i5oANAAVQdfaBWllMoqElPzbqyjmIqhhzhkrEHB6cND6FWpsfQEnK4mgogxG/aMBogJDAxw/ftz5Wh30AlgyhnkUvn3vsQGBTcGSpXMZnFSAwMl11QqobBxAgBY1AWgZuphczA3rEA6yzqjsugtP+s0ZCxDg/OEDRAs1trmE32MmoilcBEah5ty5c91YfK3BszS5RjUAe6BZyPW7fGkFoWNGWCsOANDHV1xYF9DaD3rZ6invhDYZtv+QexCgSjlR0Y864UFTm+eHtKy9ttZL0DCZeYChn1bAx2CfqNpOcsmFZ625WgsArGkjGoRvP+AVpg0gsAY/gByfAi0YB6w0GiHXIEC4xMvRT7dYAJCmDTMOW45HH76/GGYKWgETEc3Vw2CKPNGSL/OIAlw6mBAOaeF+5so2xQDGtNfn0AyA3YIhrn/BFRC5BIG1qThVUQCgQhE+UUCvU82pQRX3Su/CFLQCGoFUL6ewV+KGdcnlkwdAXccN6IVW1up1UgEReyJ816hirT0xi/gu0SJWHJ1j5RMgQHyAaNXNOntxHcYIAkaRnu1lT20rOKGk9QHCpwqhrVXmjTLTAqkXAAAT2gcTkOVA2wF2/I9BNULuNAGqDrUaTakCAFK0CM51AACAACBcbCkagH0wAa5CQ/OQ5+8lCKtNXMyJ6ztF5wGCaD4j6Vq5AQFCQsX1is9hIgBIY0sRDmoTfwGB9Ts1touZUxsXSVgm2/ayXp+VIaeAOclC/cdFNdYXSqsRcgECiLeIjnrn2GSY6SqYfgzDtLBHv2tuCIsqXpJ9bEgZ1TLQTFLJxZ8I04vm4v2T3lqyPkmSe5zhfdcdBDY+xweIIhkNADOTCCZOFWJurK9g6w74CPgASb5+grCIKKLfFWKtuP7BXjQiQJukgo6ktQmAaOlJqhHWFQSoU0K6Xh+lQPCYgCwBYJnPicP0IEA0AJ570iokYIqGlazPOgAqSXkZLYVfEY6E0H4urelhQFmHOmmKet1AAHI5kXjWUeTCSPsx7LiTnfb3NiuHL+CSCo7uAwCin9RhLXoGXZ1KuyaJMPIh4UiGMLhXv+Ja72u1QTSzGsejdQGBBUCvTp08XjGLMpGTy8cmo4PIBfAmHVmBgH0BAIBKYhJGDgJUHomVaKLD1gEwAS45+qSMznI+5iv6RRV7qSSpWYGuLEHAerfcckuiesNIQdDvypbt1UP9DTukygIMvUyB1WBpAJw1CAiziYRcx9BBwDeF8PJRob28aVulIwpIY5tdXzSreahZPjkbLWhhCtL0Gw5DE0AbNLqahKGDgFCHgfqMJlUQOh4wt3aSeNNZCTTNOvYKetiJA8j2xnGaNbPWBERdgMD1A9lDBwEnBGcFpoWRGS4FjwsAELC9RBJmMPQnTWmHwZI1CHC8k3QrDx0EnBKIigKg35WtNCdplM8A6OgFEvvpnLibxv3oHAYI1iprR+kYOgjY0AKAf3GcUP9JEyGjFPRae5EkIrMXLnB5EDhKBwDYlGpcKdhxyXWZNgxNkFXG0DIkrsFlXTSB3ZT07Dg5gb1Q1s8noPo4CLjDlUDCTTKPaUfufILwi9jLlyRUCBuJDlw7gdMyJOvncHCJw6OXSgeJDiyN+AYIEBAM4iznLjroJQR7P2DcAGDfpVcPI1EQ2iAP70RW9qabbspPniDrk5jX9WxX8iAZT1v9G/TPB1OZ5cd1jCQ6cCVmnOcNUjuwPRW2UZW2NHyntG1puasdjLNgk9Ke5sul7NHr4xW00tHplHTQI8FXVV1Txt0QvlarTe6fLU/K4Zj5aIN333038Qmm2ENlNSw48in8OcEkDiLPkynMXT9BxnzO/XJpOosoq5OFDHcEsU7SMDG3nUW5l1rGBKbpMbTfW7CNojSoYgqSNKrmuscwYx6PxXJECpTGkzp2hHZoAxzDJKEmZoBoIEkPQZiR3icYEqz8vYMhMXbclrUNs2m6jVzfFRNiL+G6PhOd5zVBWs45PkfLPJnEJPbdZWl8AAuAJOFgr7U9CFw4PuCcib+VPCD/Nszj9iY0zTRpm0/sVbro35AelElar9cvGmM2DbqQf96dA3j/FJzwGcKfqbnMY1ftJo/4obpIShnhu9yudqek2/CzAghOG2OuSfKgn5sNB3LyzaIFQPAfY8yt2byWX2XcOKCqb2mj0fhjp9P56rgR7+nNhgOq+heig8dE5IlslvSrjBsHVPVJNMFnjDH/MMbouL2Ap3cwDqgqFeSv6MLCws5isfiaql432JL+6XHjgDHmRBAEd+n8/Hxpenr6ORG5b9xewtM7MAcONZvNA4oZqNVq3wmC4EmfLxiYqWOzgKqudjqdR6vV6i+6fkCtVrtDRP4kInvG5i08oYNyYEFE7qlWq//qgsAYU2g0GgeNMQ8NurJ/fjw4oKrPlsvlA6ra/jgiOHfu3A1BEPxbRCrj8RqeygE40Ni0adPtW7ZsOcoal4WFtVrtQRE5KCL//5ttA+zkH80lB1pBEDxSLpd/bqm7DASLi4vlYrH4vIjci4nI5St4ogbhQEdVXwyC4MDs7Cw+QXdckSBaWlr6VKvVekFEbh5kN/9s/jigqqcKhcK9MzMzr19KFPUGAf+7tLT0xVarRbQwm79X8RSl5MCSqt5fqVRejD7fN1Vcr9cfMMY8LSLun8FKSZ1/bOgcOCsij1Sr1Wd67dQXBMaYYr1e/6aI/FREtg2dTL/BsDiwJCIPLywsPL9v376ef8Ejtmh0yTT8RkR2ikgwLEr9uplzACfwjIh8q5cJCO8WCwImN5vN/Z1O5yljzN0iMp05uX7BrDnQUtWXCoXC46VS6XDc4k4guASEuU6nc78x5kc+oRTH1nX9fSMIgh+q6m9LpdLZcBTQjypnENgFlpeXd7VarR8bY758yVeYWtdX9pvTLLpqjKmp6l+np6d/YDOBrqxJDAIWJpG0vLx82+rq6l2qeqcx5o4gCHb7xhRXtg8+jxPe6XROquprxphXVPXlSqVymFpA0tVTgcBugtCPHz9+VblcJnogufRZVb3VGPMJY8wOVS378nRSkVw5n7ZwY0xDVRdF5L8i8oaIvCoibzcajcXdu3efd1H7/Sj5H69iOEPmEnI5AAAAAElFTkSuQmCC"},50:function(e,t,n){e.exports=n(105)},62:function(e,t,n){},68:function(e,t){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[50,1,2]]]);
//# sourceMappingURL=main.ee4e6e49.chunk.js.map