(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(41),o=n.n(r),s=n(22),c=n(14),l=n(27),u=Object(l.b)({name:"AUTH",initialState:{isInit:!1,isLoggedIn:!1},reducers:{initIMKitSDK:function(e,t){e.isInit=t.payload},login:function(e,t){e.isLoggedIn=!0},logout:function(e,t){e.isLoggedIn=!1}}}),d=u.actions,h=d.initIMKitSDK,g=d.login,m=d.logout,v=function(e){return{isInit:e.isInit,isLoggedIn:e.isLoggedIn}},p=u.reducer,f=Object(l.a)({reducer:p}),C=(c.d,n(61),n(2)),b=n(4),y=n(7),_=n(6),I=n(8),D=n(3),L=n(23),O=n(1),k=["Ada","Aaliyah","Aditi","Adela","Adelaide","Adele","Adora","Afra","Agatha","Agnes","Alani","Alberta","Alice","Alma","Althea","Alva","Alexandra","Alisa","Alison","Alyssa","Amanda","Amelia","Amity","Anila","Amy","Andrea","Angela","Ann","Anna","Annabelle","Antonia","Apphia","April","Arabela","Arlene","Ashley","Astrid","Atalanta","Athena","Audrey","Aurora","Ava","Barbara","Basia","Bblythe","Beatrice","Belen","Bella","Belle","Belinda","Bernice","Bertha","Beryl","Bess","Betsy","Betty","Beulah","Beverly","Blanche","Bonnie","Breenda","Brianna","Bridget","Brook","Calista","Camille","Candice","Candance","Carol","Cara","Caroline","Carlin","Caitlin","Catherine","Cathy","Cecilia","Celeste","Charlotte","Chaya","Cheryl","Cherry","Cheryl","Chloe","Christine","Clara","Claire","Clara","Clementine","Constance","Cora","Coral","Cornelia","Crystal","Cynthia","Daisy","Dale","Dana","Damla","Daphne","Darlene","Dawn","Debby","Deborah","Deirdre","Delia","Denise","Destiny","Diana","Dinah","Dolores","Dominic","Donna","Doreen","Dora","Doris","Dorothy","Eartha","Eden","Edith","Edwina","Eileen","Elaine","Eleanore","Elizabeth","Ella","Ellen","Elma","Elsa","Elsie","Elvira","Elva","Emily","Emma","Enid","Erin","Erica","Esther","Ethel","Eudora","Eunice","Evangeline","Eve","Evelyn","Faithe","Faith","Fanny","Fay","Flora","Florence","Frances","Freda","Frederica","Gabrielle","Gail","Gemma","Genevieve","Georgia","Geraldine","Gill","Gina","Giselle","Gladys","Gloria","Grace","Griselda","Gustave","Gwendolyn","Hannah","Harriet","Hazel","Heather","Hedda","Hedwig","Hedy","Helen","Heloise","Hermosa","Hilda","Hilary","Honey","Hulda","Ida","Ina","Ingrid","Irene","Iris","Irma","Isabel","Ivy","Jacqueline","Jade","Jamie","Jane","Janet","Janice","Jean","Jennifer","Jenny","Jessie","Jessica","Jill","Jo","Joa","Joanna","Joanne","Jocelyn","Jodie","Jolie","Josephine","Joy","Joyce","Judith","Judy","Julia","Julie","Juliet","June","Kama","Karen","Kate","Katherine","Kay","Kelly","Kimberley","Kitty","Kristin","Lara","Laura","Laurel","Lauren","Lee","Leila","Lena","Leona","Lesley","Letitia","Lila","Lilith","Lillian","Linda","Lindsay","Lisa","Liz","Lola","Lorraine","Louise","Lucy","Lyuba","Lydia","Lynn","Mabel","Madge","Madeline","Maggie","Mamie","Mandy","Marcia","Margaret","Marguerite","Maria","Marina","Marian","Marjorie","Martina","Martha","Mary","Maud","Maureen","Mavis","Maxine","Mag","May","Megan","Melissa","Meroy","Meredith","Merry","Michelle","Michaelia","Mignon","Mildred","Miranda","Mirabelle","Miriam","Modesty","Moira","Molly","Mona","Monica","Muriel","Murray","Myra","Myrna","Nancy","Naomi","Natalie","Natividad","Nelly","Nicole","Nicola","Nina","Nora","Norma","Novia","Nydia","Octavia","Odelia","Odelette","Olga","Olive","Olivia","Ophelia","Pag","Page","Pamela","Pandora","Patricia","Paula","Pearl","Penny","Penelope","Philipppa","Phoebe","Phoenix","Phyllis","Polly","Poppy","Prima","Priscilla","Prudence","Queena","Quanna","Quintina","Rachel","Rae","Rebecca","Regina","Renee","Renata","Rita","Riva","Roberta","Rose","Rosalind","Rosemary","Roxanne","Ruby","Ruth","Sabina","Sabrina","Sally","Salome","Samantha","Sandra","Sandy","Sara","Sarah","Sebastiane","Selena","Sharon","Sherry","Sheila","Shirley","Sibyl","Sigrid","Simona","Sophia","Spring","Stacey","Setlla","Stephanie","Susan","Susie","Susanna","Suzanne","Sylvia","Tara","Tabitha","Tammy","Teresa","Tess","Thera","Theresa","Tiffany","Tina","Tobey","Tracy","Trista","Truda","Ula","Una","Ursula","Valerie","Vanessa","Venus","Vera","Verna","Vicky","Victoria","Viola","Violet","Virginia","Vivien","Wallis","Wanda","Wendy","Winni","Winifred","Xanthe","Xaviera","Xenia","Xylia","Yedda","Yetta","Yuri","Yvette","Yvonne","Zara","Zenobia","Zoe","Zona","Zanna","Zora"],E=function(){return localStorage.userInfo?JSON.parse(localStorage.userInfo):null},j=function(e){var t=localStorage.userList?JSON.parse(localStorage.userList):null,n=k[Math.floor(Math.random()*k.length)],a={userName:"",verify:!0};return e.length>=6&&e.length<=12?t&&t.some(function(t){return t.userID===e})?a.userName=t.filter(function(t){return t.userID===e})[0].userName:a.userName=n:(a.verify=!1,a.userName=n),a},M=n(28),N=n(29),U=n.n(N);function S(e,t,n){if(!e)return"";console.log("===appid",n);var a=Date.now()/1e3|0,i={app_id:n.appID,user_id:e,nonce:2147483647*Math.random()|0,ctime:a,expire:a+(t||7200)},r=U.a.enc.Utf8.parse(n.serverSecret),o=Math.random().toString().substring(2,18);o.length<16&&(o+=o.substring(0,16-o.length));var s=U.a.AES.encrypt(JSON.stringify(i),r,{iv:U.a.enc.Utf8.parse(o)}).toString(),c=Uint8Array.from(Array.from(atob(s)).map(function(e){return e.charCodeAt(0)})),l=c.length,u=new Uint8Array(28+l);u.set([0,0,0,0]),u.set(new Uint8Array(Int32Array.from([i.expire]).buffer).reverse(),4),u[8]=o.length>>8,u[9]=o.length-(u[8]<<8),u.set(Uint8Array.from(Array.from(o).map(function(e){return e.charCodeAt(0)})),10),u[26]=l>>8,u[27]=l-(u[26]<<8),u.set(c,28);var d="04".concat(btoa(String.fromCharCode.apply(String,Object(M.a)(Array.from(u)))));return console.log("generateToken",o.length,i,d),d}var w,G={appID:2031514356,serverSecret:"6e46fa37db195c449155c9fbfded9c4b"},z=n(40),x=function e(t){Object(C.a)(this,e),this.platform=t},H=Object({NODE_ENV:"production",PUBLIC_URL:"."}).PLATFORM||"web",T=function(){function e(){Object(C.a)(this,e)}return Object(b.a)(e,[{key:"on",value:function(t,n){return e.getInstance().on(t,n)}},{key:"off",value:function(t){return e.getInstance().off(t)}},{key:"login",value:function(t,n){return e.getInstance().login(t,n)}},{key:"logout",value:function(){return e.getInstance().logout()}},{key:"destroy",value:function(){return e.getInstance().destroy()}},{key:"renewToken",value:function(t){return e.getInstance().renewToken(t)}},{key:"queryConversationList",value:function(t){return e.getInstance().queryConversationList(t)}},{key:"createGroup",value:function(t,n,a){return e.getInstance().createGroup(t,n,a)}},{key:"sendPeerMessage",value:function(t,n,a){return e.getInstance().sendPeerMessage(t,n,a)}},{key:"sendGroupMessage",value:function(t,n,a){return e.getInstance().sendGroupMessage(t,n,a)}},{key:"queryHistoryMessage",value:function(t,n,a){return e.getInstance().queryHistoryMessage(t,n,a)}},{key:"deleteConversation",value:function(t,n,a){return e.getInstance().deleteConversation(t,n,a)}},{key:"clearConversationUnreadMessageCount",value:function(t,n){return e.getInstance().clearConversationUnreadMessageCount(t,n)}},{key:"queryGroupInfo",value:function(t){return e.getInstance().queryGroupInfo(t)}},{key:"queryGroupMemberList",value:function(t,n){return e.getInstance().queryGroupMemberList(t,n)}},{key:"joinGroup",value:function(t){return e.getInstance().joinGroup(t)}},{key:"leaveGroup",value:function(t){return e.getInstance().leaveGroup(t)}}],[{key:"initPlatform",value:function(){return"web"===H?(e.zimPlatformManage=new x(z.b.Web),n.e(3).then(n.bind(null,105)).then(function(t){e.zimModule=t.ZIMWeb})):Promise.resolve()}},{key:"getInstance",value:function(){return e.zimModule.getInstance()}},{key:"create",value:function(t){return e.zimModule.create(t)}}]),e}(),K=n(10);!function(e){e.zimError="error",e.zimConnectionStateChanged="connectionStateChanged",e.zimTokenWillExpire="tokenWillExpire",e.zimReceivePeerMessage="receivePeerMessage",e.zimReceiveGroupMessage="receiveGroupMessage",e.zimConversationTotalUnreadMessageCountUpdated="conversationTotalUnreadMessageCountUpdated",e.zimConversationChanged="conversationChanged",e.zimKitIsLoggedIn="isLoggedIn",e.zimKitLoginUserUpdate="loginUserUpdate",e.zimKitDeleteConversation="deleteConversation",e.zimKitCurrentConversationUpdate="currentConversationUpdate",e.zimKitConversationListUpdate="conversationListUpdate",e.zimKitConversationListQueryAbnormally="conversationListQueryAbnormally",e.zimKitCreateGroup="createGroup",e.zimKitCurrentChatUpdated="currentChatUpdated",e.zimKitCurrentMessageListUpdated="messageListUpdated",e.zimKitCurrentGroupInfoUpdated="currentGroupInfoUpdated"}(w||(w={}));var A=function(){function e(){var t;return Object(C.a)(this,e),this.eventList=(t={},Object(K.a)(t,w.zimError,[]),Object(K.a)(t,w.zimConnectionStateChanged,[]),Object(K.a)(t,w.zimTokenWillExpire,[]),Object(K.a)(t,w.zimReceivePeerMessage,[]),Object(K.a)(t,w.zimReceiveGroupMessage,[]),Object(K.a)(t,w.zimConversationTotalUnreadMessageCountUpdated,[]),Object(K.a)(t,w.zimConversationChanged,[]),Object(K.a)(t,w.zimKitIsLoggedIn,[]),Object(K.a)(t,w.zimKitLoginUserUpdate,[]),Object(K.a)(t,w.zimKitDeleteConversation,[]),Object(K.a)(t,w.zimKitConversationListUpdate,[]),Object(K.a)(t,w.zimKitCurrentConversationUpdate,[]),Object(K.a)(t,w.zimKitConversationListQueryAbnormally,[]),Object(K.a)(t,w.zimKitCreateGroup,[]),Object(K.a)(t,w.zimKitCurrentChatUpdated,[]),Object(K.a)(t,w.zimKitCurrentMessageListUpdated,[]),Object(K.a)(t,w.zimKitCurrentGroupInfoUpdated,[]),t),e.instance||(e.instance=this),e.instance}return Object(b.a)(e,[{key:"addEventListener",value:function(e,t){var n=this;return!!this.eventList[e]&&(!!Array.isArray(t)&&(t.forEach(function(t){!n.eventList[e].includes(t)&&n.eventList[e].push(t)}),!0))}},{key:"removeEventListener",value:function(e,t){if(!this.eventList[e])return!1;var n=this.eventList[e];return t&&t.length?t.forEach(function(e){n.splice(n.indexOf(e),1)}):this.eventList[e]=[],!0}},{key:"actionListener",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];this.eventList[e]&&this.eventList[e].forEach(function(e){e.apply(void 0,n)})}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),P=n(48),J=n(103),B={common_yesterday:"\u6628\u5929",common_user_kick_out:"\u91cd\u590d\u767b\u5f55\uff0c\u7528\u6237\u88ab\u8e22\u51fa",common_monday:"\u5468\u4e00",common_tuesday:"\u5468\u4e8c",common_wednesday:"\u5468\u4e09",common_thursday:"\u5468\u56db",common_friday:"\u5468\u4e94",common_saturday:"\u5468\u516d",common_sunday:"\u5468\u65e5",common_logout:"\u9000\u51fa",common_return:"\u8fd4\u56de",conversation_start_chat_w:"\u53d1\u8d77\u804a\u5929",conversation_empty:"\u6682\u65e0\u6d88\u606f\n\u5feb\u53bb\u53d1\u8d77\u804a\u5929\u5427",conversation_start_single_chat:"\u53d1\u8d77\u5355\u804a",conversation_start_group_chat:"\u53d1\u8d77\u7fa4\u804a",conversation_join_group_chat:"\u52a0\u5165\u7fa4\u804a",conversation_cancel:"\u53d6\u6d88",conversation_delete:"\u5220\u9664",conversation_message_total_count:"\u6d88\u606f\u603b\u6570",conversation_reload:"\u91cd\u65b0\u52a0\u8f7d",conversation_enter_touserid_w:"\u8bf7\u8f93\u5165\u5bf9\u65b9\u7528\u6237ID",conversation_close_chat_w:"\u5173\u95ed\u804a\u5929",demo_login_hint:"\u8f93\u5165\u7528\u6237id",demo_login:"\u767b\u5f55",demo_user_name:"\u7528\u6237\u540d\u4e3a:%s",demo_user_name_w:"\u968f\u673a\u7528\u6237\u6635\u79f0",demo_welcome:"\u60a8\u597d\uff0c\n\u6b22\u8fce\u4f7f\u7528 \nZEGO In-app Chat",demo_input_user_id_error_tips:"\u8bf7\u8f93\u51656\u201312\u4f4d\u82f1\u6587\u6216\u6570\u5b57\u7684\u7528\u6237ID",demo_input_placeholder_w:"\u8bf7\u8f93\u51656\u201312\u4f4d\u82f1\u6587\u6216\u6570\u5b57\u7684\u7528\u6237ID",demo_user_id_login:"\u7528\u6237ID\u767b\u5f55",group_create_chat:"\u53d1\u8d77\u4f1a\u8bdd",group_input_group_id:"\u8f93\u5165\u7fa4ID",group_input_group_id_w:"\u8f93\u5165\u7fa4\u804aID",group_input_group_name:"\u8f93\u5165\u7fa4\u804a\u540d\u79f0",group_input_user_id_of_group:"\u8f93\u5165\u7fa4\u6210\u5458\u7684\u7528\u6237ID\uff0c';'\u82f1\u6587\u5206\u53f7\u9694\u5f00",group_input_user_id_of_group_w:"\u8f93\u5165\u7fa4\u6210\u5458\u7684\u7528\u6237ID\uff0c';'\u82f1\u6587\u5206\u53f7\u9694\u5f00",group_user_id_cant_null:"\u7528\u6237id\u4e0d\u80fd\u4e3a\u7a7a",group_create_group_chat_title:"\u53d1\u8d77\u7fa4\u804a\u4f1a\u8bdd",group_join_group_chat:"\u52a0\u5165\u7fa4\u804a\u4f1a\u8bdd",group_user_not_exit:"\u7528\u6237\u4e0d\u5b58\u5728",group_group_not_exit:"\u7fa4\u4e0d\u5b58\u5728",group_group_user_id_not_exit:"\u7fa4\u6210\u5458\u7528\u6237ID %s \u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de",group_group_user_id_not_exit_w:"\u8bf7\u8fd4\u56de\u4fee\u6539",group_group_id_not_exit:"\u7fa4ID %s \u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de",group_group_id_not_exit_w:"\u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de\u4fee\u6539",group_input_user_id_error_tip:"\u8bf7\u8f93\u51656\u201312\u4f4d\u82f1\u6587\u6216\u6570\u5b57\u7684\u7528\u6237ID",group_group_id:"\u7fa4\u804aID",group_copy:"\u590d\u5236",group_copy_success:"\u590d\u5236\u6210\u529f",message_input_new_message:"\u8f93\u5165\u65b0\u6d88\u606f",message_user_not_exit_please_again:"\u7528\u6237ID:%s\u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de\u91cd\u65b0\u6dfb\u52a0",message_user_not_exit_please_again_w_1:"\u7528\u6237ID",message_user_not_exit_please_again_w_2:"\u4e0d\u5b58\u5728\uff0c\u8bf7\u8fd4\u56de\u91cd\u65b0\u6dfb\u52a0",message_cant_send_empty_msg:"\u4e0d\u5141\u8bb8\u53d1\u9001\u7a7a\u767d\u6d88\u606f",message_create_chat:"\u53d1\u8d77\u4f1a\u8bdd",message_input_user_id_error_tips:"\u8bf7\u8f93\u51656\u201312\u4f4d\u82f1\u6587\u6216\u6570\u5b57\u7684\u7528\u6237ID",message_create_single_chat:"\u53d1\u8d77\u5355\u804a\u4f1a\u8bdd",message_send_w:"\u53d1\u9001",message_empty_w:"\u6682\u65f6\u8fd8\u6ca1\u6709\u6536\u5230\u6d88\u606f"},R={common_yesterday:"Yesterday",common_user_kick_out:"The user is kicked out because the ID is reused for login. ",common_monday:"Monday",common_tuesday:"Tuesday",common_wednesday:"Wednesday",common_thursday:"Thursday",common_friday:"Friday",common_saturday:"Saturday",common_sunday:"Sunday",common_logout:"Log out",common_return:"Back",conversation_start_chat_w:"New Chat",conversation_empty:"No chats.\nStart chatting now.",conversation_start_single_chat:"One-on-one chat",conversation_start_group_chat:"Group chat",conversation_join_group_chat:"Join a group",conversation_cancel:"Cancel",conversation_delete:"Delete",conversation_message_total_count:"Chats",conversation_reload:"Reload",conversation_enter_touserid_w:"Enter a user ID",conversation_close_chat_w:"Delete",demo_login_hint:"User ID",demo_login:"Log in",demo_user_name:"Username: %s",demo_user_name_w:"Random nickname",demo_welcome:"Hi, \nwelcome to \nZEGOCLOUD In-app Chat.",demo_input_user_id_error_tips:"The userID must be between 6-12 characters using letters and numbers.",demo_input_placeholder_w:"6-12 bit userID, include letters and numbers",demo_user_id_login:"User Login",group_create_chat:"OK",group_input_group_id:"Group ID",group_input_group_id_w:"Group ID",group_input_group_name:"Group name",group_input_user_id_of_group:"Enter the user IDS of the group members, separated by ';'.",group_input_user_id_of_group_w:"Enter the user IDS of the group members, separated by ';'.",group_user_id_cant_null:"User ID is required.",group_create_group_chat_title:"New group chat",group_join_group_chat:"Join a group chat",group_user_not_exit:"The user doesn't exist.",group_group_not_exit:"The group doesn't exist.",group_group_user_id_not_exit:"The user ID (%s) doesn't exist. Please modify and try again.",group_group_user_id_not_exit_w:"Please modify and try again.",group_group_id_not_exit:"The group (%s) doesn't exist. Please try again.",group_group_id_not_exit_w:"It doesn't exist. Please modify and try again.",group_input_user_id_error_tip:"The userID must be between 6-12 characters using letters and numbers.",group_group_id:"Group ID",group_copy:"Copy",group_copy_success:"Copied.",message_input_new_message:"",message_user_not_exit_please_again:"The user ID (%s) doesn't exist. Please try again.",message_user_not_exit_please_again_w_1:"User ID",message_user_not_exit_please_again_w_2:"It doesn't exist. Please try again.",message_cant_send_empty_msg:"Blank messages are not allowed",message_create_chat:"OK",message_input_user_id_error_tips:"The userID must be between 6-12 characters using letters and numbers.",message_create_single_chat:"New 1-on-1 chat",message_send_w:"Send",message_empty_w:"No messages received."},F=function(){function e(){if(Object(C.a)(this,e),this.localesData={en:{},zh:{}},this.i18next=P.a.use(J.a),!e.instance){var t={en:R,zh:B};this.localesData=t,e.instance=this}return e.instance}return Object(b.a)(e,[{key:"init",value:function(){var e={resources:{zh:{translation:this.localesData.zh},en:{translation:this.localesData.en}},fallbackLng:navigator.language,detection:{caches:["localStorage","sessionStorage","cookie"]}};return this.i18next.init(e)}},{key:"provideMessage",value:function(e){return this.localesData.en=Object.assign(Object.assign({},this.localesData.en),e.en),this.localesData.zh=Object.assign(Object.assign({},this.localesData.zh),e.zh),this.localesData}},{key:"getLocalesData",value:function(){return this.localesData}},{key:"getI18next",value:function(){return this.i18next}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"destroy",value:function(){e.instance.localesData={en:{},cn:{}},e.instance=null}}]),e}();F.getInstance().init();var q=function(){function e(){return Object(C.a)(this,e),this.eventHandler=A.getInstance(),this.userInfo={},this.isInit=!1,this.isLoggedIn=!1,e.instance||(e.instance=this),e.instance}return Object(b.a)(e,[{key:"createZIM",value:function(e){var t=this;return this.appConfig=e,T.initPlatform().then(function(){t.zim=T.create(e.appID),t.isInit=!0,t.onEvent(),window.manager=t})}},{key:"loginWithUserInfo",value:function(e,t){var n=this;return this.userInfo=e,this.zim.login(e,t).then(function(){n.token=t,n.isLoggedIn=!0,n.eventHandler.actionListener(w.zimKitIsLoggedIn),n.eventHandler.actionListener(w.zimKitLoginUserUpdate,e)})}},{key:"logout",value:function(){return this.isLoggedIn=!1,this.token="",this.zim.logout()}},{key:"destroy",value:function(){this.offEvent(),this.zim.destroy(),this.isInit=!1}},{key:"registerConnectionStateChangedCallback",value:function(e){this.eventHandler.addEventListener(w.zimConnectionStateChanged,[e])}},{key:"onEvent",value:function(){var e=this;this.zim.on(w.zimError,function(t,n){e.eventHandler.actionListener(w.zimError,n)}),this.zim.on(w.zimConnectionStateChanged,function(t,n){0===n.state&&3===n.event&&e.zim.login(e.userInfo,e.token),e.eventHandler.actionListener(w.zimConnectionStateChanged,n)}),this.zim.on(w.zimReceivePeerMessage,function(t,n){e.eventHandler.actionListener(w.zimReceivePeerMessage,n)}),this.zim.on(w.zimReceiveGroupMessage,function(t,n){e.eventHandler.actionListener(w.zimReceiveGroupMessage,n)}),this.zim.on(w.zimConversationTotalUnreadMessageCountUpdated,function(t,n){e.eventHandler.actionListener(w.zimConversationTotalUnreadMessageCountUpdated,n)}),this.zim.on(w.zimConversationChanged,function(t,n){e.eventHandler.actionListener(w.zimConversationChanged,n)})}},{key:"offEvent",value:function(){this.zim.off(w.zimError),this.zim.off(w.zimConversationChanged),this.zim.off(w.zimTokenWillExpire),this.zim.off(w.zimReceivePeerMessage),this.zim.off(w.zimReceiveGroupMessage),this.zim.off(w.zimConversationTotalUnreadMessageCountUpdated)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),W=(n(91),F.getInstance().getI18next()),Z=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(y.a)(this,Object(_.a)(t).call(this,e))).state={userID:"",userName:"",verify:!1},n.getUserName=n.getUserName.bind(Object(O.a)(Object(O.a)(n))),n.loginFun=n.loginFun.bind(Object(O.a)(Object(O.a)(n))),n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=j("");this.setState(Object(L.a)({},e))}},{key:"getUserName",value:function(e){var t=e.target.value,n=j(t);this.setState(Object(L.a)({userID:t},n))}},{key:"loginFun",value:function(){var e=this,t=S(this.state.userID,0,G),n={userID:this.state.userID,userName:this.state.userName};q.getInstance().loginWithUserInfo(n,t).then(function(){!function(e){localStorage.setItem("userInfo",JSON.stringify(e))}(n),function(e){var t=localStorage.userList?JSON.parse(localStorage.userList):[];!t.find(function(t){return e.userID===t.userID})&&t.push(e),localStorage.setItem("userList",JSON.stringify(t))}(n),e.props.login()}).catch(function(t){e.setState({verify:!1})})}},{key:"render",value:function(){return i.a.createElement("div",{id:"login-con"},i.a.createElement("div",{id:"login"},this.props.isLoggedIn&&i.a.createElement(D.a,{to:"/main",replace:!0}),i.a.createElement("div",{className:"login-box"},i.a.createElement("div",{className:"welcome-box"},i.a.createElement("div",{className:"welcome-text"},W.t("demo_welcome"))),i.a.createElement("div",{className:"form ".concat("en"===W.language?"en-form":null)},i.a.createElement("div",{className:"id"},i.a.createElement("div",{className:"label"},W.t("demo_user_id_login")),i.a.createElement("input",{className:"en"===W.language?"en-input":"",placeholder:W.t("demo_input_placeholder_w"),onInput:this.getUserName}),i.a.createElement("div",{className:"login-err-tip",style:{display:!this.state.verify&&this.state.userID?"block":"none"}},W.t("demo_input_user_id_error_tips"))),i.a.createElement("div",{className:"name"},i.a.createElement("div",{className:"label"},W.t("demo_user_name_w")),i.a.createElement("div",{id:"userName"},this.state.userName)),i.a.createElement("button",{className:"login-btn",onClick:this.loginFun,disabled:!this.state.verify},W.t("demo_login"))))))}}]),t}(i.a.Component),V=Object(c.b)(v,function(e){return{login:function(t){return e(g(t))}}})(Z),Y=function e(t){Object(C.a)(this,e),this.conversationID=t.conversationID,this.conversationName=t.conversationName,this.type=t.type,this.unreadMessageCount=t.unreadMessageCount,this.lastMessage=t.lastMessage,this.orderKey=t.orderKey,this.notificationStatus=t.notificationStatus},Q=function(){function e(){return Object(C.a)(this,e),this.eventHandler=A.getInstance(),this.pagePullCount=100,this.conversationList=[],this.totalUnreadMessageCount=0,this.isAbnormal=!1,this.activeCvID="",this.loadStatus=0,e.instance||(e.instance=this,e.instance.initListenerHandle()),e.instance}return Object(b.a)(e,[{key:"initListenerHandle",value:function(){var e=this;this.eventHandler.addEventListener(w.zimConversationTotalUnreadMessageCountUpdated,[function(t){e.totalUnreadMessageCount=t.totalUnreadMessageCount}]),this.eventHandler.addEventListener(w.zimConversationChanged,[function(t){if(2===e.loadStatus){var n=!1,a=!1;if(t.infoList.forEach(function(t){switch(t.event){case 1:if(e.conversationList.length){var i=!1;e.conversationList.forEach(function(r){r.conversationID===t.conversation.conversationID&&(i=!0,Object.assign(r,t.conversation),e.activeCvID===t.conversation.conversationID&&(a=!0),n=!0)}),i||(e.conversationList.push(t.conversation),n=!0)}else e.conversationList.push(t.conversation),e.activeCvID=t.conversation.conversationID,n=!0,a=!0;break;case 0:var r=e.conversationList.length;n=e.insetConversationList(t.conversation),r||(e.activeCvID=t.conversation.conversationID,a=!0)}}),n&&(e.sortCvListHandle(),e.eventHandler.actionListener(w.zimKitConversationListUpdate,e.conversationList)),a){var i=e.getConversationByID(e.activeCvID);e.eventHandler.actionListener(w.zimKitCurrentConversationUpdate,i),i.unreadMessageCount&&e.clearConversationUnreadMessageCount(i.conversationID,i.type)}}}])}},{key:"loadConversationList",value:function(){var e=this,t={nextConversation:void 0,count:localStorage.count||this.pagePullCount};return 1===this.loadStatus?Promise.reject():(this.loadStatus=1,q.getInstance().zim.queryConversationList(t).then(function(t){if(e.loadStatus=2,e.isAbnormal=!1,e.conversationList.length=0,t.conversationList.forEach(function(t){0!==t.type&&2!==t.type||e.conversationList.push(new Y(t))}),e.sortCvListHandle(),e.conversationList.length&&!e.activeCvID){var n=e.conversationList[0];e.activeCvID=n.conversationID,e.clearConversationUnreadMessageCount(n.conversationID,n.type)}e.eventHandler.actionListener(w.zimKitConversationListUpdate,e.conversationList),e.eventHandler.actionListener(w.zimKitCurrentConversationUpdate,e.getConversationByID(e.activeCvID)),e.eventHandler.actionListener(w.zimKitConversationListQueryAbnormally,!1)}).catch(function(t){e.loadStatus=2,e.isAbnormal=!0,e.eventHandler.actionListener(w.zimKitConversationListQueryAbnormally,!0)}))}},{key:"setCurrentConversation",value:function(e){this.activeCvID=e,this.eventHandler.actionListener(w.zimKitCurrentConversationUpdate,this.getConversationByID(e))}},{key:"setTempConversation",value:function(e){this.activeCvID=e.conversationID,this.eventHandler.actionListener(w.zimKitCurrentConversationUpdate,e)}},{key:"loadNextPage",value:function(){var e=this,t={nextConversation:this.conversationList[this.conversationList.length-1],count:this.pagePullCount};q.getInstance().zim.queryConversationList(t).then(function(t){t.conversationList.forEach(function(t){0!==t.type&&2!==t.type||e.conversationList.push(new Y(t))}),e.sortCvListHandle(),e.eventHandler.actionListener(w.zimKitConversationListUpdate,e.conversationList)})}},{key:"deleteConversation",value:function(e,t){var n=this;return q.getInstance().zim.deleteConversation(e,t,{isAlsoDeleteServerConversation:!0}).then(function(t){return n.conversationList.forEach(function(e,a){e.conversationID===t.conversationID&&n.conversationList.splice(a,1)}),e===n.activeCvID&&n.conversationList.length&&(n.activeCvID=n.conversationList[0].conversationID,n.eventHandler.actionListener(w.zimKitCurrentConversationUpdate,n.conversationList[0])),n.eventHandler.actionListener(w.zimKitConversationListUpdate,n.conversationList),n.eventHandler.actionListener(w.zimKitDeleteConversation,e),t})}},{key:"removeData",value:function(){}},{key:"clearConversationUnreadMessageCount",value:function(e,t){return q.getInstance().zim.clearConversationUnreadMessageCount(e,t).catch(function(e){console.error(e)})}},{key:"registerIsLoggedInCallback",value:function(e){this.eventHandler.addEventListener(w.zimKitIsLoggedIn,[e])}},{key:"registerCvTotalUnreadMessageCountUpdatedCallback",value:function(e){this.eventHandler.addEventListener(w.zimConversationTotalUnreadMessageCountUpdated,[e])}},{key:"registerCvListUpdatedCallback",value:function(e){this.eventHandler.addEventListener(w.zimKitConversationListUpdate,[e])}},{key:"registerAbnormalCallback",value:function(e){this.eventHandler.addEventListener(w.zimKitConversationListQueryAbnormally,[e])}},{key:"registerCurrentCvUpdatedCallback",value:function(e){this.eventHandler.addEventListener(w.zimKitCurrentConversationUpdate,[e])}},{key:"unInit",value:function(){this.conversationList.length=0,this.totalUnreadMessageCount=0,this.isAbnormal=!1,this.activeCvID="",this.loadStatus=0}},{key:"getConversationByID",value:function(e){return this.conversationList.filter(function(t){return t.conversationID===e})[0]}},{key:"insetConversationList",value:function(e){var t=!1;return void 0===this.conversationList.find(function(t){return e.conversationID===t.conversationID})&&(this.conversationList.push(e),t=!0),t}},{key:"sortCvListHandle",value:function(){this.conversationList.sort(function(e,t){return t.orderKey-e.orderKey})}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),X=function(){function e(){return Object(C.a)(this,e),this.eventHandler=A.getInstance(),this.memberList=[],e.instance||(e.instance=this,e.instance.initListenerHandle()),e.instance}return Object(b.a)(e,[{key:"initListenerHandle",value:function(){var e=this;this.eventHandler.addEventListener(w.zimKitCreateGroup,[function(){}]),this.eventHandler.addEventListener(w.zimKitCurrentConversationUpdate,[function(t){t&&2===t.type&&(e.currentGroupInfo={baseInfo:{groupID:t.conversationID,groupName:t.conversationName}},e.eventHandler.actionListener(w.zimKitCurrentGroupInfoUpdated,e.currentGroupInfo),e.queryGroupMemberList(t.conversationID))}])}},{key:"createGroup",value:function(e,t,n){var a=this,i={groupID:e,groupName:t};return q.getInstance().zim.createGroup(i,n).then(function(e){return a.currentGroupInfo=e.groupInfo,a.eventHandler.actionListener(w.zimKitCurrentGroupInfoUpdated,a.currentGroupInfo),e})}},{key:"queryGroupMemberList",value:function(e){var t=this;return q.getInstance().zim.queryGroupMemberList(e,{count:100,nextFlag:0}).then(function(e){t.memberList=e.userList})}},{key:"joinGroup",value:function(e){var t=this;return q.getInstance().zim.joinGroup(e).then(function(e){return t.currentGroupInfo=e.groupInfo,t.eventHandler.actionListener(w.zimKitCurrentGroupInfoUpdated,t.currentGroupInfo),e})}},{key:"leaveGroup",value:function(e){return q.getInstance().zim.leaveGroup(e)}},{key:"dismissGroup",value:function(e){}},{key:"inviteUsersJoinGroup",value:function(e,t){}},{key:"kickGroupMembers",value:function(e,t){}},{key:"queryGroupInfo",value:function(e){return q.getInstance().zim.queryGroupInfo(e)}},{key:"unInit",value:function(){this.currentGroupInfo=null,this.memberList.length=0}},{key:"registerCurrentGroupInfoUpdateCallback",value:function(e){this.eventHandler.addEventListener(w.zimKitCurrentGroupInfoUpdated,[e])}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),$=(n(33),n(92),F.getInstance().getI18next()),ee=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(y.a)(this,Object(_.a)(t).call(this,e))).changeNav=n.changeNav.bind(Object(O.a)(Object(O.a)(n))),n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"changeNav",value:function(){this.props.onNavChange(this.props.item)}},{key:"render",value:function(){return i.a.createElement("div",{className:"title"+(this.props.item.actived?" actived":""),onClick:this.changeNav},this.props.item.text)}}]),t}(i.a.Component),te=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(y.a)(this,Object(_.a)(t).call(this,e))).state={tabList:n.props.tabList.map(function(e,t){return Object(L.a)({},e,{actived:!t})})},n.handleNavChange=n.handleNavChange.bind(Object(O.a)(Object(O.a)(n))),n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"handleNavChange",value:function(e){this.state.tabList.forEach(function(t){t.actived=t.id===e.id}),this.setState({tabList:this.state.tabList}),this.props.onNavChange(e)}},{key:"render",value:function(){var e=this,t=null;return this.state.tabList&&(t=this.state.tabList.map(function(t){return i.a.createElement(ee,{key:t.id,item:t,onNavChange:e.handleNavChange})})),i.a.createElement("div",{className:"top"},t)}}]),t}(i.a.Component),ne=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(y.a)(this,Object(_.a)(t).call(this,e))).state={peerErrTip:!1,peerDisabled:!0,groupErrTip:!1,groupDisabled:!0,groupID:"",toUserID:"",groupName:"",userIDList:""},n.closeDialog=n.closeDialog.bind(Object(O.a)(Object(O.a)(n))),n.createPeerChat=n.createPeerChat.bind(Object(O.a)(Object(O.a)(n))),n.createGroupChat=n.createGroupChat.bind(Object(O.a)(Object(O.a)(n))),n.joinGroup=n.joinGroup.bind(Object(O.a)(Object(O.a)(n))),n.handleUserIDInputChange=n.handleUserIDInputChange.bind(Object(O.a)(Object(O.a)(n))),n.handleGroupUserIDInputChange=n.handleGroupUserIDInputChange.bind(Object(O.a)(Object(O.a)(n))),n.handleGroupIDInputChange=n.handleGroupIDInputChange.bind(Object(O.a)(Object(O.a)(n))),n.handleGroupNameInputChange=n.handleGroupNameInputChange.bind(Object(O.a)(Object(O.a)(n))),n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"closeDialog",value:function(){this.props.onCloseDialog()}},{key:"createPeerChat",value:function(){this.props.onCreatePeerChat(this.state.toUserID)}},{key:"createGroupChat",value:function(){this.props.onCreateGroupChat(this.state.groupName,this.state.userIDList)}},{key:"joinGroup",value:function(){this.props.onJoinGroup(this.state.groupID)}},{key:"handleUserIDInputChange",value:function(e){var t=e.target.value;if(t.length){var n=t.length<6||t.length>12;this.setState({toUserID:t,peerErrTip:n,peerDisabled:n})}else this.setState({toUserID:t,peerErrTip:!1,peerDisabled:!0})}},{key:"handleGroupUserIDInputChange",value:function(e){var t=e.target.value,n=!0,a=!0;if(this.state.groupName.length&&t.length&&(n=!1),t){var i=t.split(";"),r=!1;i.forEach(function(e){(e.length<6||e.length>12)&&(r=!0,n=!0)}),a=r}else a=!1;this.setState({userIDList:t,groupErrTip:a,groupDisabled:n})}},{key:"handleGroupIDInputChange",value:function(e){this.setState({groupID:e.target.value})}},{key:"handleGroupNameInputChange",value:function(e){var t=e.target.value;this.setState({groupName:t,groupDisabled:!(t.length&&this.state.userIDList.length)})}},{key:"render",value:function(){var e=null,t=null,n=this.state,a=n.groupID,r=n.peerDisabled,o=n.groupDisabled,s=n.peerErrTip,c=n.groupErrTip,l=n.toUserID,u=n.userIDList,d=this.props.currentActived;return(s&&l||c&&u)&&(t=i.a.createElement("div",{className:"err-tip"},$.t("demo_input_user_id_error_tips"))),1===d?e=i.a.createElement("div",{className:"peer",key:"peer"},i.a.createElement("div",{className:"input-box"},i.a.createElement("input",{className:"en"===$.language?"en-input":"",type:"text",name:"userID",placeholder:$.t("conversation_enter_touserid_w"),onInput:this.handleUserIDInputChange}),t),i.a.createElement("div",{className:"btn-box"},i.a.createElement("button",{className:"btn cancel-btn",onClick:this.closeDialog},$.t("conversation_cancel")),i.a.createElement("button",{className:"btn create-peer-btn",onClick:this.createPeerChat,disabled:r},$.t("conversation_start_single_chat")))):2===d?e=i.a.createElement("div",{className:"group",key:"group"},i.a.createElement("div",{className:"input-box"},i.a.createElement("input",{className:"en"===$.language?"en-input":"",type:"text",name:"groupName",placeholder:$.t("group_input_group_name"),onInput:this.handleGroupNameInputChange,maxLength:12}),i.a.createElement("input",{className:"en"===$.language?"en-input":"",type:"text",name:"userIDList",placeholder:$.t("group_input_user_id_of_group_w"),onInput:this.handleGroupUserIDInputChange}),t),i.a.createElement("div",{className:"btn-box"},i.a.createElement("button",{className:"btn cancel-btn",onClick:this.closeDialog},$.t("conversation_cancel")),i.a.createElement("button",{className:"btn create-peer-btn",onClick:this.createGroupChat,disabled:o},$.t("conversation_start_group_chat")))):3===d&&(e=i.a.createElement("div",{className:"attend",key:"attend"},i.a.createElement("div",{className:"input-box"},i.a.createElement("input",{className:"en"===$.language?"en-input":"",type:"text",name:"groupID",placeholder:$.t("group_input_group_id_w"),onInput:this.handleGroupIDInputChange})),i.a.createElement("div",{className:"btn-box"},i.a.createElement("button",{className:"btn cancel-btn",onClick:this.closeDialog},$.t("conversation_cancel")),i.a.createElement("button",{className:"btn create-peer-btn",onClick:this.joinGroup,disabled:!a},$.t("conversation_join_group_chat"))))),i.a.createElement("div",{className:"content"},e)}}]),t}(i.a.Component),ae=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(y.a)(this,Object(_.a)(t).call(this,e))).tabList=[{id:1,text:$.t("conversation_start_single_chat")},{id:2,text:$.t("conversation_start_group_chat")},{id:3,text:$.t("conversation_join_group_chat")}],n.state={currentActived:1},n.handleNavChange=n.handleNavChange.bind(Object(O.a)(Object(O.a)(n))),n.handleCloseDialog=n.handleCloseDialog.bind(Object(O.a)(Object(O.a)(n))),n.handleJoinGroup=n.handleJoinGroup.bind(Object(O.a)(Object(O.a)(n))),n.handleCreatePeerChat=n.handleCreatePeerChat.bind(Object(O.a)(Object(O.a)(n))),n.handleCreateGroupChat=n.handleCreateGroupChat.bind(Object(O.a)(Object(O.a)(n))),n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"handleNavChange",value:function(e){this.setState({currentActived:e.id})}},{key:"handleCloseDialog",value:function(){this.props.onCloseDialog()}},{key:"handleJoinGroup",value:function(e){this.props.onJoinGroup(e)}},{key:"handleCreatePeerChat",value:function(e){this.props.onCreatePeerChat(e)}},{key:"handleCreateGroupChat",value:function(e,t){this.props.onCreateGroupChat(e,t)}},{key:"render",value:function(){return i.a.createElement("div",{className:"dialog"},i.a.createElement(te,{tabList:this.tabList,onNavChange:this.handleNavChange}),i.a.createElement(ne,{currentActived:this.state.currentActived,onCloseDialog:this.handleCloseDialog,onJoinGroup:this.handleJoinGroup,onCreatePeerChat:this.handleCreatePeerChat,onCreateGroupChat:this.handleCreateGroupChat}))}}]),t}(i.a.Component),ie=(n(93),F.getInstance().getI18next()),re=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(y.a)(this,Object(_.a)(t).call(this,e))).deleteConversation=n.deleteConversation.bind(Object(O.a)(Object(O.a)(n))),n.closeConversation=n.closeConversation.bind(Object(O.a)(Object(O.a)(n))),n.handleClick=n.handleClick.bind(Object(O.a)(Object(O.a)(n))),n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"handleClick",value:function(e){var t=!1;try{e.path.forEach(function(e){if(e.className&&e.className.includes("right-click-box"))throw t=!0,new Error("break")})}catch(n){}t||this.closeConversation()}},{key:"componentDidMount",value:function(){window.addEventListener("click",this.handleClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleClick)}},{key:"deleteConversation",value:function(){this.props.onDeleteConversation()}},{key:"closeConversation",value:function(){this.props.onCloseConversation()}},{key:"render",value:function(){return i.a.createElement("div",{className:"right-click-box",style:{top:"".concat(this.props.y,"px"),left:"".concat(this.props.x,"px")}},i.a.createElement("div",{className:"item",onClick:this.deleteConversation},ie.t("conversation_close_chat_w")))}}]),t}(i.a.Component),oe=(n(94),F.getInstance().getI18next());function se(e,t){if(0===e)return"--";var n=new Date(e),a=new Date((new Date).toDateString()),i={1:oe.t("common_monday"),2:oe.t("common_tuesday"),3:oe.t("common_wednesday"),4:oe.t("common_thursday"),5:oe.t("common_friday"),6:oe.t("common_saturday"),0:oe.t("common_sunday")},r=String(n.getFullYear()),o=String(n.getMonth()+1);o.length<1&&(o="0".concat(o));var s=String(n.getDate());1===s.length&&(s="0".concat(s));var c=String(n.getHours());1===c.length&&(c="0".concat(c));var l=String(n.getMinutes());1===l.length&&(l="0".concat(l));var u,d=String(n.getSeconds());(1===d.length&&(d="0".concat(d)),n.getFullYear()!==a.getFullYear())?u=t?"yyyy-MM-dd hh:mm".replace(/yyyy/g,r).replace(/MM/g,o).replace(/dd/g,s).replace(/hh/g,c).replace(/mm/g,l):"yyyy-MM-dd".replace(/yyyy/g,r).replace(/MM/g,o).replace(/dd/g,s):u=e<a.getTime()-5184e5?t?"MM-dd hh:mm".replace(/MM/g,o).replace(/dd/g,s).replace(/hh/g,c).replace(/mm/g,l):"MM-dd".replace(/MM/g,o).replace(/dd/g,s):e<a.getTime()-864e5?t?i[n.getDay()]+" "+"hh:mm".replace(/hh/g,c).replace(/mm/g,l):i[n.getDay()]:e<a.getTime()?t?"".concat(oe.t("common_yesterday")," ")+"hh:mm".replace(/hh/g,c).replace(/mm/g,l):oe.t("common_yesterday"):"hh:mm".replace(/hh/g,c).replace(/mm/g,l);return u}var ce,le=new(n(47).EventEmitter);!function(e){e.ToastOperation="toastOperation",e.DialogOperation="dialogOperation",e.GroupInfoOperation="groupInfoOperation"}(ce||(ce={}));var ue,de=function(e){le.emit(ce.GroupInfoOperation,e)},he=function(e,t){le.emit(ce.ToastOperation,e,t)},ge=function(e,t){le.emit(ce.DialogOperation,e,t)},me=le,ve=F.getInstance().getI18next(),pe=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(y.a)(this,Object(_.a)(t).call(this,e))).switchConversation=n.switchConversation.bind(Object(O.a)(Object(O.a)(n))),n.operationConversation=n.operationConversation.bind(Object(O.a)(Object(O.a)(n))),n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"switchConversation",value:function(){var e=this.props.conversation;Q.getInstance().setCurrentConversation(e.conversationID),Q.getInstance().clearConversationUnreadMessageCount(e.conversationID,e.type)}},{key:"operationConversation",value:function(e){e.preventDefault();var t=document.querySelector(".zego-im-container .box");this.props.onRightClick({showRightClickDialog:!0,x:e.clientX-t.offsetLeft,y:e.clientY-t.offsetTop,conversationItem:this.props.conversation})}},{key:"nameFormat",value:function(e){return(e.conversationName||e.conversationID).slice(0,1).toLowerCase()}},{key:"render",value:function(){var e=null,t=this.props.conversation,n=this.props.currentConversation;return t.unreadMessageCount&&(e=i.a.createElement("div",{className:"unread-count"},t.unreadMessageCount>99?"99+":t.unreadMessageCount)),i.a.createElement("div",{className:"conversation-item"+(n&&t.conversationID===n.conversationID?" actived":""),onClick:this.switchConversation,onContextMenu:this.operationConversation},i.a.createElement("div",{className:"head-portrait"},0===t.type?this.nameFormat(t):"G",e),i.a.createElement("div",{className:"conversation-info"},i.a.createElement("div",{className:"info-top"},i.a.createElement("div",{className:"item-name"},t.conversationName||t.conversationID),t.lastMessage?i.a.createElement("div",{className:"item-date"},se(t.lastMessage.timestamp,!1)):null),t.lastMessage?i.a.createElement("div",{className:"item-message"},2===t.lastMessage.sentStatus?i.a.createElement("div",{className:"err-icon"}):null,i.a.createElement("div",{className:"message-text"},t.lastMessage.message)):null))}}]),t}(i.a.Component),fe=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(y.a)(this,Object(_.a)(t).call(this,e))).state={isAbnormal:!1,totalUnreadMessageCount:0,conversationList:[],showCreateChatDialog:!1,showRightClickDialog:!1,x:0,y:0,conversationItem:null,currentConversation:null},n.logout=n.logout.bind(Object(O.a)(Object(O.a)(n))),n.listScroll=n.listScroll.bind(Object(O.a)(Object(O.a)(n))),n.triggerDialog=n.triggerDialog.bind(Object(O.a)(Object(O.a)(n))),n.handleRightClick=n.handleRightClick.bind(Object(O.a)(Object(O.a)(n))),n.handleCloseDialog=n.handleCloseDialog.bind(Object(O.a)(Object(O.a)(n))),n.handleCreatePeerChat=n.handleCreatePeerChat.bind(Object(O.a)(Object(O.a)(n))),n.handleCreateGroupChat=n.handleCreateGroupChat.bind(Object(O.a)(Object(O.a)(n))),n.handleJoinGroup=n.handleJoinGroup.bind(Object(O.a)(Object(O.a)(n))),n.handleDeleteConversation=n.handleDeleteConversation.bind(Object(O.a)(Object(O.a)(n))),n.handleCloseConversation=n.handleCloseConversation.bind(Object(O.a)(Object(O.a)(n))),n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;q.getInstance().isLoggedIn&&Q.getInstance().loadConversationList(),Q.getInstance().registerIsLoggedInCallback(function(){Q.getInstance().loadConversationList()}),Q.getInstance().registerCvTotalUnreadMessageCountUpdatedCallback(function(t){e.setState({totalUnreadMessageCount:t.totalUnreadMessageCount})}),Q.getInstance().registerCvListUpdatedCallback(function(t){e.setState({conversationList:t})}),Q.getInstance().registerCurrentCvUpdatedCallback(function(t){e.setState({currentConversation:t})}),Q.getInstance().registerAbnormalCallback(function(t){e.setState({isAbnormal:t})})}},{key:"componentWillUnmount",value:function(){Q.getInstance().unInit()}},{key:"listScroll",value:function(){var e=document.querySelector(".conversation-content"),t=Math.round(e.scrollTop);t>=e.scrollHeight-e.clientHeight&&Q.getInstance().loadNextPage()}},{key:"triggerDialog",value:function(e){this.setState({showCreateChatDialog:e})}},{key:"handleRightClick",value:function(e){this.setState(e)}},{key:"handleCloseDialog",value:function(){this.triggerDialog(!1)}},{key:"handleCreatePeerChat",value:function(e){var t=this.state.conversationList.filter(function(t){return t.conversationID===e})[0];t?Q.getInstance().setCurrentConversation(t.conversationID):Q.getInstance().setTempConversation({conversationID:e,conversationName:e,type:0}),this.triggerDialog(!1)}},{key:"handleCreateGroupChat",value:function(e,t){var n=this,a=t.split(";").filter(function(e){return e});X.getInstance().createGroup("",e,a).then(function(e){var t=e.groupInfo,a=e.errorUserList,i=t.baseInfo;if(a.length){var r=a.map(function(e){return e.userID}).join(" ");ge(!0,{desc:"".concat(ve.t("message_user_not_exit_please_again").replace("%s",r)),cancelText:ve.t("common_return"),hasCloseBtn:!1})}else n.setState({showCreateChatDialog:!1}),Q.getInstance().setTempConversation({conversationID:i.groupID,conversationName:i.groupName,type:2})}).catch(function(){n.setState({showCreateChatDialog:!1})})}},{key:"handleJoinGroup",value:function(e){var t=this;X.getInstance().joinGroup(e).then(function(e){var n=e.groupInfo.baseInfo;t.setState({showCreateChatDialog:!1}),Q.getInstance().setTempConversation({conversationID:n.groupID,conversationName:n.groupName,type:2})}).catch(function(t){switch(t.code){case 6000523:ge(!0,{desc:"".concat(ve.t("group_group_id_not_exit").replace("%s",e)),cancelText:ve.t("common_return"),hasCloseBtn:!1});break;default:he(!0,{text:t.message,type:"default"})}})}},{key:"handleDeleteConversation",value:function(){var e=this,t=this.state.conversationItem,n=t.conversationID,a=t.type;Q.getInstance().deleteConversation(n,a).then(function(){}).finally(function(){e.setState({showRightClickDialog:!1})})}},{key:"handleCloseConversation",value:function(){this.setState({showRightClickDialog:!1})}},{key:"logout",value:function(){q.getInstance().logout()}},{key:"render",value:function(){var e=this,t=null,n=null,a=null,r=null;return this.state.totalUnreadMessageCount&&(t=i.a.createElement("div",{className:"total"},this.state.totalUnreadMessageCount>99?"99+":this.state.totalUnreadMessageCount)),this.state.showCreateChatDialog&&(n=i.a.createElement(ae,{onCloseDialog:this.handleCloseDialog,onCreatePeerChat:this.handleCreatePeerChat,onCreateGroupChat:this.handleCreateGroupChat,onJoinGroup:this.handleJoinGroup})),this.state.showRightClickDialog&&(a=i.a.createElement(re,{x:this.state.x,y:this.state.y,onDeleteConversation:this.handleDeleteConversation,onCloseConversation:this.handleCloseConversation})),this.state.conversationList&&this.state.conversationList.length&&(r=this.state.conversationList.map(function(t,n){return i.a.createElement(pe,{key:t.conversationID+n,conversation:t,currentConversation:e.state.currentConversation,onRightClick:e.handleRightClick})})),i.a.createElement("div",{className:"conversation"},i.a.createElement("div",{className:"left-banner"},i.a.createElement("div",{className:"top"},i.a.createElement("div",{className:"item"},i.a.createElement("div",{className:"icon message-icon"}),i.a.createElement("div",{className:"text"},ve.t("conversation_message_total_count")),t),i.a.createElement("div",{className:"item",onClick:this.triggerDialog.bind(this,!0)},i.a.createElement("div",{className:"icon create-chat-icon"}),i.a.createElement("div",{className:"text create-chat-text"},ve.t("conversation_start_chat_w")))),i.a.createElement("div",{className:"item",onClick:this.logout},i.a.createElement("div",{className:"icon exit-icon"}),i.a.createElement("div",{className:"text exit-text"},ve.t("common_logout")))),this.state.isAbnormal?i.a.createElement("div",{className:"abnormal-content"},i.a.createElement("div",{className:"btn reload-btn",onClick:Q.getInstance().loadConversationList.bind(Q.getInstance())},ve.t("conversation_reload"))):this.state.conversationList.length?i.a.createElement("div",{className:"conversation-content",onScroll:this.listScroll},r):i.a.createElement("div",{className:"default-content"},i.a.createElement("div",{className:"text"},ve.t("conversation_empty"))),n,a)}}]),t}(i.a.Component),Ce=function e(t){Object(C.a)(this,e),this.type=t.type,this.messageID=t.messageID,this.timestamp=t.timestamp,this.message=t.message,this.senderUserID=t.senderUserID,this.conversationID=t.conversationID,this.conversationType=t.conversationType,this.direction=t.direction,this.sentStatus=t.sentStatus,this.orderKey=t.orderKey,this.conversationSeq=t.conversationSeq};!function(e){e[e.Tip=99]="Tip"}(ue||(ue={}));var be=F.getInstance().getI18next(),ye=function(){function e(){return Object(C.a)(this,e),this.eventHandler=A.getInstance(),this.messageCount=30,this.messageIndex=31,this.currentChat={},this.currentMessageList=[],e.instance||(e.instance=this,e.instance.initListenerHandle()),e.instance}return Object(b.a)(e,[{key:"initListenerHandle",value:function(){var e=this;this.eventHandler.addEventListener(w.zimReceivePeerMessage,[function(t){e.currentChat.conversationID===t.fromConversationID&&(t.messageList.forEach(function(t){e.currentMessageList.push(new Ce(t))}),e.eventHandler.actionListener(w.zimKitCurrentMessageListUpdated,e.currentMessageList),e.eventHandler.actionListener(w.zimKitCurrentChatUpdated,e.currentChat))}]),this.eventHandler.addEventListener(w.zimReceiveGroupMessage,[function(t){e.currentChat.conversationID===t.fromConversationID&&(t.messageList.forEach(function(t){e.currentMessageList.push(new Ce(t))}),e.eventHandler.actionListener(w.zimKitCurrentMessageListUpdated,e.currentMessageList),e.eventHandler.actionListener(w.zimKitCurrentChatUpdated,e.currentChat))}]),this.eventHandler.addEventListener(w.zimKitDeleteConversation,[function(t){t===e.currentChat.conversationID&&(e.currentMessageList=[],e.currentChat={},e.eventHandler.actionListener(w.zimKitCurrentMessageListUpdated,e.currentMessageList),e.eventHandler.actionListener(w.zimKitCurrentChatUpdated,e.currentChat))}]),this.eventHandler.addEventListener(w.zimKitCurrentConversationUpdate,[function(t){!t||e.currentChat.conversationID&&t.conversationID===e.currentChat.conversationID||(e.currentChat=t,e.messageCount=30,e.currentMessageList.length=0,e.queryHistoryMessage(e.currentChat.conversationID,e.currentChat.type),e.eventHandler.actionListener(w.zimKitCurrentChatUpdated,e.currentChat))}])}},{key:"queryHistoryMessage",value:function(e,t){var n=this,a={nextMessage:void 0,count:this.messageCount,reverse:!0};return q.getInstance().zim.queryHistoryMessage(e,t,a).then(function(e){n.currentMessageList=[],e.messageList.length&&e.messageList.forEach(function(e){n.currentMessageList.push(new Ce(e))}),n.eventHandler.actionListener(w.zimKitCurrentMessageListUpdated,n.currentMessageList)})}},{key:"clearCurrentMessageList",value:function(){this.currentMessageList=[],this.eventHandler.actionListener(w.zimKitCurrentMessageListUpdated,this.currentMessageList)}},{key:"sendPeerMessage",value:function(e){var t=this;return q.getInstance().zim.sendPeerMessage(e,this.currentChat.conversationID,{priority:1}).then(function(e){t.currentMessageList.push(new Ce(e.message))}).catch(function(n){var a={type:1,messageID:String((new Date).getTime()),message:e.message,timestamp:(new Date).getTime(),senderUserID:q.getInstance().userInfo.userID,conversationID:"",conversationType:0,direction:0,sentStatus:2,orderKey:0,conversationSeq:0};switch(t.currentMessageList.push(new Ce(a)),n.code){case 6000204:var i={type:99,messageID:String((new Date).getTime()),message:"".concat(be.t("message_user_not_exit_please_again").replace("%s",t.currentChat.conversationID)),timestamp:(new Date).getTime(),senderUserID:q.getInstance().userInfo.userID,conversationID:"",conversationType:0,direction:0,sentStatus:2,orderKey:0,conversationSeq:0};t.currentMessageList.push(new Ce(i))}}).finally(function(){t.eventHandler.actionListener(w.zimKitCurrentChatUpdated,t.currentChat),t.eventHandler.actionListener(w.zimKitCurrentMessageListUpdated,t.currentMessageList)})}},{key:"sendGroupMessage",value:function(e){var t=this;return q.getInstance().zim.sendGroupMessage(e,this.currentChat.conversationID,{priority:1}).then(function(e){t.currentMessageList.push(new Ce(e.message))}).catch(function(){var n={type:1,messageID:String((new Date).getTime()),message:e.message,timestamp:(new Date).getTime(),senderUserID:q.getInstance().userInfo.userID,conversationID:"",conversationType:0,direction:0,sentStatus:2,orderKey:0,conversationSeq:0};t.currentMessageList.push(new Ce(n))}).finally(function(){t.eventHandler.actionListener(w.zimKitCurrentChatUpdated,t.currentChat),t.eventHandler.actionListener(w.zimKitCurrentMessageListUpdated,t.currentMessageList)})}},{key:"unInit",value:function(){this.currentChat={},this.currentMessageList.length=0}},{key:"registerLoginUserUpdatedCallback",value:function(e){this.eventHandler.addEventListener(w.zimKitLoginUserUpdate,[e])}},{key:"registerCurrentChatUpdatedCallback",value:function(e){this.eventHandler.addEventListener(w.zimKitCurrentChatUpdated,[e])}},{key:"registerMessageListUpdatedCallback",value:function(e){this.eventHandler.addEventListener(w.zimKitCurrentMessageListUpdated,[e])}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),_e=(n(95),F.getInstance().getI18next()),Ie=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(y.a)(this,Object(_.a)(t).call(this,e))).state={currentChat:null,currentMessageList:[],message:"",oldScrollHeight:0,newScrollHeight:0,userInfo:{}},n.listScroll=n.listScroll.bind(Object(O.a)(Object(O.a)(n))),n.sendMessage=n.sendMessage.bind(Object(O.a)(Object(O.a)(n))),n.dateFormat=n.dateFormat.bind(Object(O.a)(Object(O.a)(n))),n.handleInputChange=n.handleInputChange.bind(Object(O.a)(Object(O.a)(n))),n.getGroupUserName=n.getGroupUserName.bind(Object(O.a)(Object(O.a)(n))),n.scrollToBottom=n.scrollToBottom.bind(Object(O.a)(Object(O.a)(n))),n.triggerGroupInfo=n.triggerGroupInfo.bind(Object(O.a)(Object(O.a)(n))),n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;ye.getInstance().registerLoginUserUpdatedCallback(function(t){e.setState({userInfo:t})}),ye.getInstance().registerCurrentChatUpdatedCallback(function(t){e.setState({currentChat:t,message:""},function(){var e=document.querySelector(".text-area");e&&e.focus()})}),ye.getInstance().registerMessageListUpdatedCallback(function(t){e.setState({currentMessageList:t},function(){e.scrollToBottom()})})}},{key:"componentWillUnmount",value:function(){ye.getInstance().unInit()}},{key:"scrollToBottom",value:function(){var e=document.querySelector(".message-content");if(e){var t=Number(e.scrollHeight)-Number(e.clientHeight);e.scrollTop=t}}},{key:"listScroll",value:function(){var e=this,t=document.querySelector(".message-content");if(t){var n=Math.round(t.scrollTop),a=t.scrollHeight,i=this.state,r=i.currentMessageList,o=i.currentChat;0==n&&ye.getInstance().messageCount<=r.length&&(ye.getInstance().messageCount=r.length+30,ye.getInstance().queryHistoryMessage(o.conversationID,o.type).then(function(){e.setState({oldScrollHeight:a},function(){e.setState({newScrollHeight:t.scrollHeight},function(){t.scrollTop=e.state.newScrollHeight-e.state.oldScrollHeight})})}))}}},{key:"sendMessage",value:function(){var e={type:1,message:this.state.message};2===this.state.currentChat.type?ye.getInstance().sendGroupMessage(e):ye.getInstance().sendPeerMessage(e),this.setState({message:""})}},{key:"getGroupUserName",value:function(e){var t=X.getInstance().memberList,n=e;if(t.length){var a=t.filter(function(t){return t.userID===e})[0];n=a?a.userName:e}return n}},{key:"dateFormat",value:function(e,t){if(0===t)return se(e.timestamp,!0);var n=this.state.currentMessageList[t-1];return n&&e.timestamp-n.timestamp>3e5?se(e.timestamp,!0):void 0}},{key:"handleInputChange",value:function(e){this.setState({message:e.target.value})}},{key:"triggerGroupInfo",value:function(){de(!0)}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentChat,a=t.currentMessageList,r=q.getInstance().userInfo,o=r.userID,s=r.userName,c=null;if(n&&n.conversationID){var l=n.conversationName,u=n.conversationID,d=n.type;c=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"title"},l||u),2===d?i.a.createElement("div",{className:"more-icon",onClick:this.triggerGroupInfo}):null),i.a.createElement("div",{className:"message-content",onScroll:this.listScroll},a.map(function(t,n){var a=e.dateFormat(t,n),r=(t.conversationType,t.senderUserID!==o),c=99===t.type,u=e.getGroupUserName(t.senderUserID);return i.a.createElement("div",{className:"message-item",key:t.messageID+n},a?i.a.createElement("div",{className:"time-box"},a):null,r?i.a.createElement("div",{className:"left-msg"},i.a.createElement("div",{className:"head-portrait"},2===t.conversationType?u.substr(0,1).toLowerCase():l?l.substr(0,1).toLowerCase():""),i.a.createElement("div",{className:"message-box"},2===t.conversationType?i.a.createElement("div",{className:"send-name"},u):null,i.a.createElement("div",{className:"msg-text"},t.message))):null,c?i.a.createElement("div",{className:"center-msg"},t.message):null,r||c?null:i.a.createElement("div",{className:"right-msg"},99!==t.type&&2===t.sentStatus?i.a.createElement("div",{className:"err-icon"}):null,i.a.createElement("div",{className:"message-box"},i.a.createElement("div",{className:"msg-text"},t.message)),i.a.createElement("div",{className:"head-portrait"},s.substr(0,1).toLowerCase())))})),i.a.createElement("div",{className:"send-box"},i.a.createElement("div",{className:"tool-box"}),i.a.createElement("textarea",{className:"text-area",value:this.state.message,onInput:this.handleInputChange}),i.a.createElement("button",{className:"btn send-button",onClick:this.sendMessage,disabled:!this.state.message},_e.t("message_send_w"))))}else c=i.a.createElement("div",{className:"default-content"},i.a.createElement("div",{className:"img"}),i.a.createElement("div",{className:"text"},_e.t("message_empty_w")));return i.a.createElement("div",{className:"chat"},c)}}]),t}(i.a.Component),De=(n(96),F.getInstance().getI18next()),Le=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(y.a)(this,Object(_.a)(t).call(this,e))).state={currentGroupInfo:null},n.copy=n.copy.bind(Object(O.a)(Object(O.a)(n))),n.handleClick=n.handleClick.bind(Object(O.a)(Object(O.a)(n))),n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"handleClick",value:function(e){if(!e.target.className.includes("more-icon")){var t=!1;try{e.path.forEach(function(e){if(e.className&&e.className.includes("group-container"))throw t=!0,new Error("break")})}catch(n){}t||de(!1)}}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("click",this.handleClick),X.getInstance().registerCurrentGroupInfoUpdateCallback(function(t){e.setState({currentGroupInfo:t})})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleClick),X.getInstance().unInit()}},{key:"copy",value:function(){var e=this.state.currentGroupInfo;navigator.clipboard&&e&&navigator.clipboard.writeText(e.baseInfo.groupID).then(function(){he(!0,{text:De.t("group_copy_success"),type:"default"})})}},{key:"render",value:function(){var e=this.state.currentGroupInfo,t=null;return this.props.showGroupInfo&&(t=i.a.createElement("div",{className:"group-container"},i.a.createElement("div",{className:"form-box"},i.a.createElement("div",{className:"id"},i.a.createElement("div",{className:"label"},De.t("group_group_id")),i.a.createElement("div",{className:"value"},e?e.baseInfo.groupID:"")),i.a.createElement("div",{className:"btn copy-btn",onClick:this.copy},De.t("group_copy"))))),t}}]),t}(i.a.Component),Oe=(n(97),function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(y.a)(this,Object(_.a)(t).call(this,e))).toastTimer=void 0,n.duration=2e3,n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){this.props.showToast&&(clearTimeout(this.toastTimer),this.toastTimer=setTimeout(function(){me.emit(ce.ToastOperation,!1)},this.duration))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.toastTimer),this.toastTimer=null}},{key:"render",value:function(){var e=null;if(this.props.showToast){var t=this.props.toastData,n=t.name,a=t.text,r=t.type;e=i.a.createElement("div",null,i.a.createElement("div",{className:"default"+("loading"===r?" loading":"")},i.a.createElement("div",{className:"toast"+("error"===r?" error":"")},n?i.a.createElement("span",{className:"name"},n):null,i.a.createElement("span",{className:"text"},a))))}return e}}]),t}(i.a.Component)),ke=(n(98),function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(y.a)(this,Object(_.a)(t).call(this,e))).closeHandle=n.closeHandle.bind(Object(O.a)(Object(O.a)(n))),n.cancelHandle=n.cancelHandle.bind(Object(O.a)(Object(O.a)(n))),n.confirmHandle=n.confirmHandle.bind(Object(O.a)(Object(O.a)(n))),n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"closeHandle",value:function(){me.emit(ce.DialogOperation,!1)}},{key:"cancelHandle",value:function(){var e=this.props.dialogData.cancelFunc;e&&e(),this.closeHandle()}},{key:"confirmHandle",value:function(){var e=this.props.dialogData.confirmFunc;e&&e(),this.closeHandle()}},{key:"render",value:function(){var e=null;if(this.props.showBaseDialog){var t=this.props.dialogData,n=t.title,a=t.desc,r=t.hasCloseBtn,o=t.cancelText,s=t.confirmText;e=i.a.createElement("div",{className:"wrapper"},i.a.createElement("div",{className:"dialog"},r?i.a.createElement("div",{className:"close-icon",onClick:this.closeHandle}):null,i.a.createElement("div",{className:"title"},n),i.a.createElement("div",{className:"desc"},a),i.a.createElement("div",{className:"line"}),i.a.createElement("div",{className:"btn-box"},o?i.a.createElement("button",{className:"btn cancel",onClick:this.cancelHandle},o):null,s?i.a.createElement("button",{className:"btn confirm",onClick:this.confirmHandle},s):null)))}return e}}]),t}(i.a.Component)),Ee=(n(99),function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(y.a)(this,Object(_.a)(t).call(this,e))).state={showGroupInfo:!1,showToast:!1,showBaseDialog:!1,toastData:{text:"",name:"",type:"default"},dialogData:{title:"",desc:"",cancelText:"",confirmText:"",hasCloseBtn:!1}},n.handleGroupInfoOperation=n.handleGroupInfoOperation.bind(Object(O.a)(Object(O.a)(n))),n.handleToastOperation=n.handleToastOperation.bind(Object(O.a)(Object(O.a)(n))),n.handleDialogOperation=n.handleDialogOperation.bind(Object(O.a)(Object(O.a)(n))),n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"handleGroupInfoOperation",value:function(e){this.setState({showGroupInfo:void 0===e?!this.state.showGroupInfo:!!e})}},{key:"handleToastOperation",value:function(e,t){this.setState({showToast:e,toastData:t})}},{key:"handleDialogOperation",value:function(e,t){this.setState({showBaseDialog:e,dialogData:t})}},{key:"componentDidMount",value:function(){me.on(ce.GroupInfoOperation,this.handleGroupInfoOperation),me.on(ce.ToastOperation,this.handleToastOperation),me.on(ce.DialogOperation,this.handleDialogOperation)}},{key:"componentWillUnmount",value:function(){me.off(ce.GroupInfoOperation,this.handleGroupInfoOperation),me.off(ce.ToastOperation,this.handleToastOperation),me.off(ce.DialogOperation,this.handleDialogOperation)}},{key:"render",value:function(){var e=this.state,t=e.showGroupInfo,n=e.showToast,a=e.showBaseDialog,r=e.toastData,o=e.dialogData;return i.a.createElement("div",{id:"zegoim"},i.a.createElement("div",{className:"zego-im-container"},i.a.createElement("div",{className:"top-banner"},navigator.language.includes("en")?"ZEGOCLOUD":"ZEGO"," In-app Chat"),i.a.createElement("div",{className:"box"},i.a.createElement(fe,null),i.a.createElement(Ie,null),i.a.createElement(Le,{showGroupInfo:t})),i.a.createElement(Oe,{showToast:n,toastData:r}),i.a.createElement(ke,{showBaseDialog:a,dialogData:o})))}}]),t}(i.a.Component)),je=(n(100),function(e){function t(){return Object(C.a)(this,t),Object(y.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;q.getInstance().registerConnectionStateChangedCallback(function(t){0!==t.state||0!==t.event&&4!==t.event||(e.props.logout(),localStorage.removeItem("userInfo"))})}},{key:"render",value:function(){return i.a.createElement("div",{id:"main"},!this.props.isLoggedIn&&i.a.createElement(D.a,{to:"/login",replace:!0}),i.a.createElement(Ee,null))}}]),t}(i.a.Component)),Me=Object(c.b)(v,function(e){return{logout:function(t){return e(m(t))}}})(je),Ne=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(y.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(i)))).cacheUserInfo=E(),n}return Object(I.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;(new q).createZIM(G).then(function(){if(e.props.initIMKitSDK(!0),e.cacheUserInfo){var t=S(e.cacheUserInfo.userID,0,G);q.getInstance().loginWithUserInfo(e.cacheUserInfo,t).then(function(){e.props.login()})}})}},{key:"render",value:function(){return i.a.createElement(D.d,null,i.a.createElement(D.b,{path:"/",element:i.a.createElement(Me,null)}),i.a.createElement(D.b,{path:"/main",element:i.a.createElement(Me,null)}),i.a.createElement(D.b,{path:"/login",element:i.a.createElement(V,null)}))}}]),t}(i.a.Component),Ue=Object(c.b)(v,function(e){return{initIMKitSDK:function(t){return e(h(t))},login:function(t){return e(g(t))}}})(Ne),Se=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,104)).then(function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),r(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(c.a,{store:f},i.a.createElement(s.a,null,i.a.createElement(Ue,null))))),Se()},33:function(e,t,n){},40:function(e,t,n){"use strict";n.d(t,"b",function(){return a});var a,i=n(18);n.d(t,"a",function(){return i.ZIM}),function(e){e[e.Web=0]="Web"}(a||(a={}))},49:function(e,t,n){e.exports=n(101)},61:function(e,t,n){},62:function(e,t){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[49,1,2]]]);
//# sourceMappingURL=main.87e495a4.chunk.js.map